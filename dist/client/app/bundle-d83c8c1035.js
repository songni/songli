!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){r(106),r(169),r(56),e.exports=r(107)},function(e,t,r){!function(e,r){r(t)}(this,function(e){"use strict";function t(e){return Ue.test(e)}function r(e){return ze.test(e)}function n(e){return typeof e===$e}function o(e){return e&&typeof e===Ce}function i(e){return typeof e===Me}function a(e){return typeof e===Te}function s(e){return i(e)||null===e||""===e}function u(e){return Array.isArray(e)||e instanceof Array}function c(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return i(e[t])||r&&r.writable}function p(e){return De.test(e)}function l(e,t){return(t||document).querySelectorAll(e)}function f(e,t){return(t||document).querySelector(e)}function d(){return document.createDocumentFragment()}function h(){return document.createTextNode("")}function y(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(e)}function v(e){if(e.outerHTML)return e.outerHTML;var t=y("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function m(e,t){if(i(e.innerHTML)){var r=(new DOMParser).parseFromString(t,"application/xml"),n=e.ownerDocument.importNode(r.documentElement,!0);e.appendChild(n)}else e.innerHTML=t}function g(e,t){e.removeAttribute(t)}function b(e,t){return e.getAttribute(t)}function w(e,t,r){var n=Ae.exec(t);n&&n[1]?e.setAttributeNS(Ie,n[1],r):e.setAttribute(t,r)}function _(e,t,r){e.insertBefore(t,r.parentNode&&r)}function O(e,t){if(e)for(var r;r=qe.exec(e);)t(r[1].toLowerCase(),r[2]||r[3]||r[4])}function x(e,t,r){if(e){var n,o=t(e,r);if(o===!1)return;for(e=e.firstChild;e;)n=e.nextSibling,x(e,t,o),e=n}}function k(e,t){for(var r,n=e?e.length:0,o=0;o<n;++o)r=e[o],t(r,o)===!1&&o--;return e}function j(e,t){return~e.indexOf(t)}function S(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function P(e,t){return e.slice(0,t.length)===t}function E(e,t,r,n){return Object.defineProperty(e,t,R({value:r,enumerable:!1,writable:!1,configurable:!0},n)),e}function R(e){for(var t,r=arguments,n=1;n<r.length;++n)if(t=r[n])for(var o in t)c(e,o)&&(e[o]=t[o]);return e}function T(e,t,r){var n=this._parent,o=this._item;if(!o)for(;n&&!o;)o=n._item,n=n._parent;if(c(r,"currentTarget")&&(r.currentTarget=e),c(r,"target")&&(r.target=r.srcElement),c(r,"which")&&(r.which=r.charCode||r.keyCode),r.item=o,t.call(this,r),!r.preventUpdate){var i=ae(this);i.isMounted&&i.update()}}function C(e,t,r,n){var o,i=T.bind(n,r,t);return r.addEventListener?(r[e]=null,o=e.replace(tt,""),r._riotEvents||(r._riotEvents={}),r._riotEvents[e]&&r.removeEventListener(o,r._riotEvents[e]),r._riotEvents[e]=i,void r.addEventListener(o,i,!1)):void(r[e]=i)}function M(e,t){var r,n=Ke(e.value,t);return e.tag&&e.tagName===n?void e.tag.update():(e.tag&&(k(e.attrs,function(t){return w(e.tag.root,t.name,t.value)}),e.tag.unmount(!0)),e.impl=we[n],r={root:e.dom,parent:t,hasImpl:!0,tagName:n},e.tag=ie(e.impl,r,e.dom.innerHTML,t),e.tagName=n,e.tag.mount(),void t.on("unmount",function(){var t=e.tag.opts.dataIs,r=e.tag.parent.tags,n=e.tag._parent.tags;le(r,t,e.tag),le(n,t,e.tag),e.tag.unmount()}))}function $(e){var t,r=e.dom,o=e.attr,a=j([Ee,Re],o),s=Ke(e.expr,this),u="riot-value"===o,c=e.root&&"VIRTUAL"===e.root.tagName,p=r&&(e.parent||r.parentNode);if(e.bool?s=!!s&&o:(i(s)||null===s)&&(s=""),e._riot_id){if(e.isMounted)e.update();else if(e.mount(),c){var l=document.createDocumentFragment();he.call(e,l),e.root.parentElement.replaceChild(l,e.root)}}else{if(t=e.value,e.value=s,e.update)return void e.update();if(e.isRtag&&s)return M(e,this);if(t!==s&&(!u||r.value!==s)){if(!o)return s+="",void(p&&(e.parent=p,"TEXTAREA"===p.tagName?(p.value=s,Ve||(r.nodeValue=s)):r.nodeValue=s));if(e.isAttrRemoved&&s||(g(r,o),e.isAttrRemoved=!0),n(s))C(o,s,r,this);else if(a)o===Re&&(s=!s),r.style.display=s?"":"none";else if(u)r.value=s;else if(P(o,Oe)&&o!==ke)o=o.slice(Oe.length),We[o]&&(o=We[o]),null!=s&&w(r,o,s);else{if("selected"===o&&p&&/^(SELECT|OPTGROUP)$/.test(p.tagName)&&s&&(p.value=r.value),e.bool&&(r[o]=s,!s))return;(0===s||s&&typeof s!==Ce)&&w(r,o,s)}}}}function I(e){k(e,$.bind(this))}function A(e,t,r,n){var o=n?Object.create(n):{};return o[e.key]=t,e.pos&&(o[e.pos]=r),o}function N(e,t,r){for(var n,o=t.length,i=e.length;o>i;)n=t[--o],t.splice(o,1),n.unmount(),le(n.parent,r,n,!0)}function F(e){var t=this;k(Object.keys(this.tags),function(r){var n=t.tags[r];u(n)?k(n,function(t){oe.apply(t,[r,e])}):oe.apply(n,[r,e])})}function L(e,t,r){r?ye.apply(this,[e,t]):_(e,this.root,t.root)}function D(e,t,r){r?he.apply(this,[e,t]):_(e,this.root,t.root)}function U(e,t){t?he.call(this,e):e.appendChild(this.root)}function q(e,t,r){g(e,Se);var n,o=typeof b(e,Pe)!==Te||g(e,Pe),i=ue(e),a=we[i]||{tmpl:v(e)},s=Fe.test(i),c=e.parentNode,p=h(),l=re(e),f=b(e,je),y=[],m=[],w=!0,_=!we[i],O="VIRTUAL"===e.tagName;return r=Ke.loopKeys(r),r.isLoop=!0,f&&g(e,je),c.insertBefore(p,e),c.removeChild(e),r.update=function(){var c=Ke(r.val,t),h=d(),v=!u(c),g=p.parentNode;v?(n=c||!1,c=n?Object.keys(c).map(function(e){return A(r,c[e],e)}):[]):n=!1,f&&(c=c.filter(function(e,n){return r.key&&!v?!!Ke(f,A(r,e,n,t)):!!Ke(f,R(Object.create(t),e))})),k(c,function(u,p){var f=o&&typeof u===Ce&&!n,d=m.indexOf(u),v=!~d,b=p<=y.length,x=!v&&f?d:p,k=y[x];u=!n&&r.key?A(r,u,p):u,f&&v||!f&&!k?(k=new te(a,{parent:t,isLoop:w,isAnonymous:_,root:s?g:e.cloneNode(),item:u},e.innerHTML),k.mount(),b?U.apply(k,[h||g,O]):D.apply(k,[g,y[p],O]),b||m.splice(p,0,u),y.splice(p,0,k),l&&pe(t.tags,i,k,!0),x=p):k.update(u),x!==p&&f&&(j(c,m[p])&&L.apply(k,[g,y[p],O]),r.pos&&(k[r.pos]=p),y.splice(p,0,y.splice(x,1)[0]),m.splice(p,0,m.splice(x,1)[0]),!l&&k.tags&&F.call(k,p)),k._item=u,E(k,"_parent",t)}),N(c,y,i),m=c.slice(),g.insertBefore(h,p)},r.unmount=function(){k(y,function(e){e.unmount()})},r}function W(e,t,r){var n=this,o={parent:{children:t}};return x(e,function(t,o){var i,a,s,u=t.nodeType,c=o.parent;if(!r&&t===e)return{parent:c};if(3===u&&"STYLE"!==t.parentNode.tagName&&Ke.hasExpr(t.nodeValue)&&c.children.push({dom:t,expr:t.nodeValue}),1!==u)return o;if(i=b(t,Se))return c.children.push(q(t,n,i)),!1;if(i=b(t,je))return c.children.push(Object.create(rt).init(t,n,i)),!1;if((a=b(t,ke))&&Ke.hasExpr(a))return c.children.push({isRtag:!0,expr:a,dom:t,attrs:[].slice.call(t.attributes)}),!1;if(s=re(t),s&&(t!==e||r)){var p={root:t,parent:n,hasImpl:!0};return c.children.push(ie(s,p,t.innerHTML,n)),!1}return z.apply(n,[t,t.attributes,function(e,t){t&&c.children.push(t)}]),{parent:c}},o),{tree:o,root:e}}function z(e,t,n){var o=this;k(t,function(t){var i,a=t.name,s=r(a);j(xe,a)?i=Object.create(nt).init(e,o,a,t.value):Ke.hasExpr(t.value)&&(i={dom:e,expr:t.value,attr:t.name,bool:s}),n(t,i)})}function V(e,t,r){var n="o"===r[0],o=n?"select>":"table>";if(e.innerHTML="<"+o+t.trim()+"</"+o,o=e.firstChild,n)o.selectedIndex=-1;else{var i=ut[r];i&&1===o.childElementCount&&(o=f(i,o))}return o}function B(e,t){if(!ot.test(e))return e;var r={};return t=t&&t.replace(at,function(e,t,n){return r[t]=r[t]||n,""}).trim(),e.replace(st,function(e,t,n){return r[t]||n||""}).replace(it,function(e,r){return t||r||""})}function H(e,r,n){var o=e&&e.match(/^\s*<([-\w]+)/),i=o&&o[1].toLowerCase(),a=y(pt,n&&t(i));return e=B(e,r),ct.test(i)?a=V(a,e,i):m(a,e),a.stub=!0,a}function G(e,t){var r=this,n=r.name,o=r.tmpl,i=r.css,a=r.attrs,s=r.onCreate;return we[n]||(J(n,o,i,a,s),we[n].class=this.constructor),de(e,n,t,this),i&&Xe.inject(),this}function J(e,t,r,o,i){return n(o)&&(i=o,/^[\w\-]+\s?=/.test(r)?(o=r,r=""):o=""),r&&(n(r)?i=r:Xe.add(r)),e=e.toLowerCase(),we[e]={name:e,tmpl:t,attrs:o,fn:i},e}function Q(e,t,r,n,o){r&&Xe.add(r,e);var i=!!we[e];return we[e]={name:e,tmpl:t,attrs:n,fn:o},i&&mt.hotReloader&&mt.hotReloader(e),e}function X(e,t,r){function n(e){if(e.tagName){var o=b(e,ke);t&&o!==t&&(o=t,w(e,ke,t));var a=de(e,o||e.tagName.toLowerCase(),r);a&&i.push(a)}else e.length&&k(e,n)}var i=[];Xe.inject(),o(t)&&(r=t,t=0);var s,u;if(a(e)?(e="*"===e?u=ve():e+ve(e.split(/, */)),s=e?l(e):[]):s=e,"*"===t){if(t=u||ve(),s.tagName)s=l(t,s);else{var c=[];k(s,function(e){return c.push(l(t,e))}),s=c}t=0}return n(s),i}function Z(e,t,r){if(o(e))return void Z("__unnamed_"+dt++,e,!0);var a=r?ft:lt;if(!t){if(i(a[e]))throw new Error("Unregistered mixin: "+e);return a[e]}a[e]=n(t)?R(t.prototype,a[e]||{})&&t:R(a[e]||{},t)}function K(){return k(be,function(e){return e.update()})}function Y(e){delete we[e]}function ee(e,t,r,n,o){if(!e||!r){var i=!r&&e?this:t||this;k(o,function(e){e.expr&&I.call(i,[e.expr]),n[S(e.name)]=e.expr?e.expr.value:e.value})}}function te(e,t,r){var o,i=R({},t.opts),s=t.parent,u=t.isLoop,c=t.isAnonymous,p=ce(t.item),l=[],f=[],d=[],h=t.root,y=t.tagName||ue(h),v="virtual"===y,m=[];Ye(this),e.name&&h._tag&&h._tag.unmount(!0),this.isMounted=!1,h.isLoop=u,E(this,"_internal",{isAnonymous:c,instAttrs:l,innerHTML:r,virts:[],tail:null,head:null}),E(this,"_riot_id",++ht),R(this,{root:h,opts:i},p),E(this,"parent",s||null),E(this,"tags",{}),E(this,"refs",{}),o=H(e.tmpl,r,u),E(this,"update",function(e){return n(this.shouldUpdate)&&!this.shouldUpdate(e)?this:(e=ce(e),u&&c&&ne.apply(this,[this.parent,m]),R(this,e),ee.apply(this,[u,s,c,i,l]),this.isMounted&&this.trigger("update",e),I.call(this,d),this.isMounted&&this.trigger("updated"),this)}.bind(this)),E(this,"mixin",function(){var e=this;return k(arguments,function(t){var r,o,i=[];t=a(t)?Z(t):t,r=n(t)?new t:t;var s=Object.getPrototypeOf(r);do i=i.concat(Object.getOwnPropertyNames(o||r));while(o=Object.getPrototypeOf(o||r));k(i,function(t){if("init"!==t){var o=Object.getOwnPropertyDescriptor(r,t)||Object.getOwnPropertyDescriptor(s,t),i=o&&(o.get||o.set);!e.hasOwnProperty(t)&&i?Object.defineProperty(e,t,o):e[t]=n(r[t])?r[t].bind(e):r[t]}}),r.init&&r.init.bind(e)()}),this}.bind(this)),E(this,"mount",function(){var t=this;h._tag=this,z.apply(s,[h,h.attributes,function(e,r){!c&&nt.isPrototypeOf(r)&&(r.tag=t),e.expr=r,l.push(e)}]),f=[],O(e.attrs,function(e,t){f.push({name:e,value:t})}),z.apply(this,[h,f,function(e,t){t?d.push(t):w(h,e.name,e.value)}]),this._parent&&c&&ne.apply(this,[this._parent,m]),ee.apply(this,[u,s,c,i,l]);var r=Z(_e);if(r)for(var n in r)r.hasOwnProperty(n)&&t.mixin(r[n]);if(e.fn&&e.fn.call(this,i),this.trigger("before-mount"),W.apply(this,[o,d,!1]),this.update(p),u&&c)this.root=h=o.firstChild;else{for(;o.firstChild;)h.appendChild(o.firstChild);h.stub&&(h=s.root)}return E(this,"root",h),this.isMounted=!0,!this.parent||this.parent.isMounted?this.trigger("mount"):this.parent.one("mount",function(){t.trigger("mount")}),this}.bind(this)),E(this,"unmount",function(t){var r,n=this,o=this.root,i=o.parentNode,a=be.indexOf(this);if(this.trigger("before-unmount"),O(e.attrs,function(e){P(e,Oe)&&(e=e.slice(Oe.length)),g(h,e)}),~a&&be.splice(a,1),i){if(s)r=ae(s),v?Object.keys(this.tags).forEach(function(e){le(r.tags,e,n.tags[e])}):(le(r.tags,y,this),s!==r&&le(s.tags,y,this));else for(;o.firstChild;)o.removeChild(o.firstChild);t?g(i,ke):i.removeChild(o)}return this._internal.virts&&k(this._internal.virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),se(d),k(l,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()}),this.trigger("unmount"),this.off("*"),this.isMounted=!1,delete this.root._tag,this}.bind(this))}function re(e){return e.tagName&&we[b(e,ke)||b(e,ke)||e.tagName.toLowerCase()]}function ne(e,t){var r=this;k(Object.keys(e),function(n){var o=!p(n)&&j(t,n);(i(r[n])||o)&&(o||t.push(n),r[n]=e[n])})}function oe(e,t){var r,n=this.parent;n&&(r=n.tags[e],u(r)?r.splice(t,0,r.splice(r.indexOf(this),1)[0]):pe(n.tags,e,this))}function ie(e,t,r,n){var o=new te(e,t,r),i=t.tagName||ue(t.root,!0),a=ae(n);return E(o,"parent",a),o._parent=n,pe(a.tags,i,o),a!==n&&pe(n.tags,i,o),t.root.innerHTML="",o}function ae(e){for(var t=e;t._internal.isAnonymous&&t.parent;)t=t.parent;return t}function se(e){k(e,function(e){e instanceof te?e.unmount(!0):e.unmount&&e.unmount()})}function ue(e,t){var r=re(e),n=!t&&b(e,ke);return n&&!Ke.hasExpr(n)?n:r?r.name:e.tagName.toLowerCase()}function ce(e){if(!(e instanceof te||e&&n(e.trigger)))return e;var t={};for(var r in e)De.test(r)||(t[r]=e[r]);return t}function pe(e,t,r,n){var o=e[t],i=u(o);o&&o===r||(!o&&n?e[t]=[r]:o?(!i||i&&!j(o,r))&&(i?o.push(r):e[t]=[o,r]):e[t]=r)}function le(e,t,r,n){u(e[t])?(k(e[t],function(n,o){n===r&&e[t].splice(o,1)}),e[t].length?1!==e[t].length||n||(e[t]=e[t][0]):delete e[t]):delete e[t]}function fe(e){for(;e;){if(e.inStub)return!0;e=e.parentNode}return!1}function de(e,t,r,n){var o=we[t],i=we[t].class,a=n||(i?Object.create(i.prototype):{}),s=e._innerHTML=e._innerHTML||e.innerHTML;e.innerHTML="";var u={root:e,opts:r};return r&&r.parent&&(u.parent=r.parent),o&&e&&te.apply(a,[o,u,s]),a&&a.mount&&(a.mount(!0),j(be,a)||be.push(a)),a}function he(e,t){var r,n,o=this,i=h(),a=h(),s=d();for(this._internal.head=this.root.insertBefore(i,this.root.firstChild),this._internal.tail=this.root.appendChild(a),n=this._internal.head;n;)r=n.nextSibling,s.appendChild(n),o._internal.virts.push(n),n=r;t?e.insertBefore(s,t._internal.head):e.appendChild(s)}function ye(e,t){for(var r,n=this,o=this._internal.head,i=d();o;)if(r=o.nextSibling,i.appendChild(o),o=r,o===n._internal.tail){i.appendChild(o),e.insertBefore(i,t._internal.head);break}}function ve(e){if(!e){var t=Object.keys(we);return t+ve(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){var r=t.trim().toLowerCase();return e+",["+ke+'="'+r+'"]'},"")}var me,ge,be=[],we={},_e="__global_mixin",Oe="riot-",xe=["data-ref","ref"],ke="data-is",je="if",Se="each",Pe="no-reorder",Ee="show",Re="hide",Te="string",Ce="object",Me="undefined",$e="function",Ie="http://www.w3.org/1999/xlink",Ae=/^xlink:(\w+)/,Ne=typeof window===Me?void 0:window,Fe=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,Le=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,De=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|trigger|o(?:n|ff|ne))$/,Ue=/^(altGlyph|animate(?:Color)?|circle|clipPath|defs|ellipse|fe(?:Blend|ColorMatrix|ComponentTransfer|Composite|ConvolveMatrix|DiffuseLighting|DisplacementMap|Flood|GaussianBlur|Image|Merge|Morphology|Offset|SpecularLighting|Tile|Turbulence)|filter|font|foreignObject|g(?:lyph)?(?:Ref)?|image|line(?:arGradient)?|ma(?:rker|sk)|missing-glyph|path|pattern|poly(?:gon|line)|radialGradient|rect|stop|svg|switch|symbol|text(?:Path)?|tref|tspan|use)$/,qe=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,We={viewbox:"viewBox"},ze=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,Ve=0|(Ne&&Ne.document||{}).documentMode,Be=Object.freeze({isSVGTag:t,isBoolAttr:r,isFunction:n,isObject:o,isUndefined:i,isString:a,isBlank:s,isArray:u,isWritable:c,isReservedName:p}),He=Object.freeze({$$:l,$:f,createFrag:d,createDOMPlaceholder:h,mkEl:y,getOuterHTML:v,setInnerHTML:m,remAttr:g,getAttr:b,setAttr:w,safeInsert:_,walkAttrs:O,walkNodes:x}),Ge={},Je=[],Qe=!1;Ne&&(me=function(){var e=y("style");w(e,"type","text/css");var t=f("style[type=riot]");return t?(t.id&&(e.id=t.id),t.parentNode.replaceChild(e,t)):document.getElementsByTagName("head")[0].appendChild(e),e}(),ge=me.styleSheet);var Xe={styleNode:me,add:function(e,t){t?Ge[t]=e:Je.push(e),Qe=!0},inject:function(){if(Ne&&Qe){Qe=!1;var e=Object.keys(Ge).map(function(e){return Ge[e]}).concat(Je).join("\n");ge?ge.cssText=e:me.innerHTML=e}}},Ze=function(e){function t(e){return e}function r(e,t){return t||(t=b),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?c:"")}function n(e){if(e===v)return m;var t=e.split(" ");if(2!==t.length||d.test(e))throw new Error('Unsupported brackets "'+e+'"');return t=t.concat(e.replace(h,"\\").split(" ")),t[4]=r(t[1].length>1?/{[\S\s]*?}/:m[4],t),t[5]=r(e.length>3?/\\({|})/g:m[5],t),t[6]=r(m[6],t),t[7]=RegExp("\\\\("+t[3]+")|([[({])|("+t[3]+")|"+f,c),t[8]=e,t}function o(e){return e instanceof RegExp?s(e):b[e]}function i(e){(e||(e=v))!==b[8]&&(b=n(e),s=e===v?t:r,b[9]=s(m[9])),g=e}function a(e){var t;e=e||{},t=e.brackets,Object.defineProperty(e,"brackets",{set:i,get:function(){return g},enumerable:!0}),u=e,i(t)}var s,u,c="g",p=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,l=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,f=l.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,d=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),h=/(?=[[\]()*+?.^$|])/g,y={"(":RegExp("([()])|"+f,c),"[":RegExp("([[\\]])|"+f,c),"{":RegExp("([{}])|"+f,c)},v="{ }",m=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+f,c),v,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],g=e,b=[];return o.split=function(e,t,r){function n(e){t||a?c.push(e&&e.replace(r[5],"$1")):c.push(e)}function o(e,t,r){var n,o=y[t];for(o.lastIndex=r,r=1;(n=o.exec(e))&&(!n[1]||(n[1]===t?++r:--r)););return r?e.length:o.lastIndex}r||(r=b);var i,a,s,u,c=[],p=r[6];for(a=s=p.lastIndex=0;i=p.exec(e);){if(u=i.index,a){if(i[2]){p.lastIndex=o(e,i[2],p.lastIndex);continue}if(!i[3])continue}i[1]||(n(e.slice(s,u)),s=p.lastIndex,p=r[6+(a^=1)],p.lastIndex=s)}return e&&s<e.length&&n(e.slice(s)),c},o.hasExpr=function(e){return b[4].test(e)},o.loopKeys=function(e){var t=e.match(b[9]);return t?{key:t[1],pos:t[2],val:b[0]+t[3].trim()+b[1]}:{val:e.trim()}},o.array=function(e){return e?n(e):b},Object.defineProperty(o,"settings",{set:a,get:function(){return u}}),o.settings="undefined"!=typeof riot&&riot.settings||{},o.set=i,o.R_STRINGS=l,o.R_MLCOMMS=p,o.S_QBLOCKS=f,o}(),Ke=function(){function e(e,n){return e?(a[e]||(a[e]=r(e))).call(n,t):e}function t(t,r){t.riotData={tagName:r&&r.root&&r.root.tagName,_riot_id:r&&r._riot_id},e.errorHandler?e.errorHandler(t):"undefined"!=typeof console&&"function"==typeof console.error&&(t.riotData.tagName&&console.error("Riot template error thrown in the <%s> tag",t.riotData.tagName.toLowerCase()),console.error(t))}function r(e){var t=n(e);return"try{return "!==t.slice(0,11)&&(t="return "+t),new Function("E",t+";")}function n(e){var t,r=[],n=Ze.split(e.replace(p,'"'),1);if(n.length>2||n[0]){var i,a,s=[];for(i=a=0;i<n.length;++i)t=n[i],t&&(t=1&i?o(t,1,r):'"'+t.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[a++]=t);t=a<2?s[0]:"["+s.join(",")+'].join("")'}else t=o(n[1],0,r);return r[0]&&(t=t.replace(l,function(e,t){return r[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),t}function o(e,t,r){function n(t,r){var n,o=1,i=f[t];for(i.lastIndex=r.lastIndex;n=i.exec(e);)if(n[0]===t)++o;else if(!--o)break;r.lastIndex=o?e.length:i.lastIndex}if(e=e.replace(c,function(e,t){return e.length>2&&!t?s+(r.push(e)-1)+"~":e}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var o,a=[],p=0;e&&(o=e.match(u))&&!o.index;){var l,d,h=/,|([[{(])|$/g;for(e=RegExp.rightContext,l=o[2]?r[o[2]].slice(1,-1).trim().replace(/\s+/g," "):o[1];d=(o=h.exec(e))[1];)n(d,h);d=e.slice(0,o.index),e=RegExp.rightContext,a[p++]=i(d,1,l)}e=p?p>1?"["+a.join(",")+'].join(" ").trim()':a[0]:i(e,t)}return e}function i(e,t,r){var n;return e=e.replace(h,function(e,t,r,o,i){return r&&(o=n?0:o+e.length,"this"!==r&&"global"!==r&&"window"!==r?(e=t+'("'+r+d+r,o&&(n="."===(i=i[o])||"("===i||"["===i)):o&&(n=!y.test(i.slice(o)))),e}),n&&(e="try{return "+e+"}catch(e){E(e,this)}"),r?e=(n?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+r+'":""':t&&(e="function(v){"+(n?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}var a={};e.hasExpr=Ze.hasExpr,e.loopKeys=Ze.loopKeys,e.clearCache=function(){a={}},e.errorHandler=null;var s=String.fromCharCode(8279),u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,c=RegExp(Ze.S_QBLOCKS,"g"),p=/\u2057/g,l=/\u2057(\d+)~/g,f={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},d='"in this?this:'+("object"!=typeof window?"global":"window")+").",h=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,y=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return e.version=Ze.version="v3.0.1",e}(),Ye=function(e){e=e||{};var t={},r=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(r,n){return"function"==typeof n&&(t[r]=t[r]||[]).push(n),e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(r,n){if("*"!=r||n)if(n)for(var o,i=t[r],a=0;o=i&&i[a];++a)o==n&&i.splice(a--,1);else delete t[r];else t={};return e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,r){function n(){e.off(t,n),r.apply(e,arguments)}return e.on(t,n)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(n){var o,i,a,s=arguments,u=arguments.length-1,c=new Array(u);for(a=0;a<u;a++)c[a]=s[a+1];for(o=r.call(t[n]||[],0),a=0;i=o[a];++a)i.apply(e,c);return t["*"]&&"*"!=n&&e.trigger.apply(e,["*",n].concat(c)),e},enumerable:!1,writable:!1,configurable:!1}}),e},et=Object.freeze({each:k,contains:j,toCamel:S,startsWith:P,defineProperty:E,extend:R}),tt=/^on/,rt={init:function(e,t,r){g(e,je),this.tag=t,this.expr=r,this.stub=document.createTextNode(""),this.pristine=e;var n=e.parentNode;return n.insertBefore(this.stub,e),n.removeChild(e),this},update:function(){var e=Ke(this.expr,this.tag);e&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=[],W.apply(this.tag,[this.current,this.expressions,!0])):!e&&this.current&&(se(this.expressions),this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current),this.current=null,this.expressions=[]),e&&I.call(this.tag,this.expressions)},unmount:function(){se(this.expressions||[]),delete this.pristine,delete this.parentNode,delete this.stub}},nt={init:function(e,t,r,n){return this.dom=e,this.attr=r,this.rawValue=n,this.parent=t,this.hasExp=Ke.hasExpr(n),this.firstRun=!0,this},update:function(){var e=this.rawValue;if(this.hasExp&&(e=Ke(this.rawValue,this.parent)),this.firstRun||e!==this.value){var t=this.parent&&ae(this.parent),r=this.tag||this.dom;!s(this.value)&&t&&le(t.refs,this.value,r),s(e)?g(this.dom,this.attr):(t&&pe(t.refs,e,r),w(this.dom,this.attr,e)),this.value=e,this.firstRun=!1}},unmount:function(){var e=this.tag||this.dom,t=this.parent&&ae(this.parent);!s(this.value)&&t&&le(t.refs,this.value,e),delete this.dom,delete this.parent}},ot=/<yield\b/i,it=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,at=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,st=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,ut={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},ct=Ve&&Ve<10?Fe:Le,pt="div",lt={},ft=lt[_e]={},dt=0,ht=0,yt=Object.freeze({getTag:re,inheritFrom:ne,moveChildTag:oe,initChildTag:ie,getImmediateCustomParentTag:ae,unmountAll:se,getTagName:ue,cleanUpData:ce,arrayishAdd:pe,arrayishRemove:le,isInStub:fe,mountTo:de,makeVirtual:he,moveVirtual:ye,selectTags:ve}),vt=Object.create(Ze.settings),mt={tmpl:Ke,brackets:Ze,styleManager:Xe,vdom:be,styleNode:Xe.styleNode,dom:He,check:Be,misc:et,tags:yt},gt=G,bt=J,wt=Q,_t=X,Ot=Z,xt=K,kt=Y,jt=Ye,St={settings:vt,util:mt,Tag:gt,tag:bt,tag2:wt,mount:_t,mixin:Ot,update:xt,unregister:kt,observable:jt};e.settings=vt,e.util=mt,e.Tag=gt,e.tag=bt,e.tag2=wt,e.mount=_t,e.mixin=Ot,e.update=xt,e.unregister=kt,e.observable=jt,e.default=St,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function o(e){return e.split(/[\/?#]/)}function i(e,t){var r=t.replace(/\?/g,"\\?").replace(/\*/g,"([^/?#]+?)").replace(/\.\./,".*"),n=new RegExp("^"+r+"$"),o=e.match(n);if(o)return o.slice(1)}function a(e,t){var r;return function(){clearTimeout(r),r=setTimeout(e,t)}}function s(e){v=a(d,1),C[j](P,v),C[j](E,v),M[j](N,h),e&&d(!0)}function u(){this.$=[],_(this),F.on("stop",this.s.bind(this)),F.on("emit",this.e.bind(this))}function c(e){return e.replace(/^\/|\/$/,"")}function p(e){return"string"==typeof e}function l(e){return(e||I.href).replace(O,"")}function f(e){return"#"===m[0]?(e||I.href||"").split(m)[1]||"":(I?l(e):e||"").replace(m,"")}function d(e){var t=0===q;if(!(T<=q)&&(q++,U.push(function(){var t=f();(e||t!==g)&&(F[R]("emit",t),g=t)}),t)){for(var r;r=U.shift();)r();q=0}}function h(e){if(!(1!==e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!==t.nodeName;)t=t.parentNode;!t||"A"!==t.nodeName||t[S]("download")||!t[S]("href")||t.target&&"_self"!==t.target||t.href.indexOf(I.href.match(O)[0])===-1||t.href!==I.href&&(t.href.split("#")[0]===I.href.split("#")[0]||"#"!==m[0]&&0!==l(t.href).indexOf(m)||"#"===m[0]&&t.href.split(m)[0]!==I.href.split(m)[0]||!y(f(t.href),t.title||M.title))||e.preventDefault()}}function y(e,t,r){return $?(e=m+c(e),t=t||M.title,r?$.replaceState(null,t,e):$.pushState(null,t,e),M.title=t,D=!1,d(),D):F[R]("emit",f(e))}var v,m,g,b,w,_=n(r(153)),O=/^.+?\/\/+[^\/]+/,x="EventListener",k="remove"+x,j="add"+x,S="hasAttribute",P="popstate",E="hashchange",R="trigger",T=3,C="undefined"!=typeof window&&window,M="undefined"!=typeof document&&document,$=C&&history,I=C&&($.location||C.location),A=u.prototype,N=M&&M.ontouchstart?"touchstart":"click",F=_(),L=!1,D=!1,U=[],q=0;A.m=function(e,t,r){!p(e)||t&&!p(t)?t?this.r(e,t):this.r("@",e):y(e,t,r||!1)},A.s=function(){this.off("*"),this.$=[]},A.e=function(e){this.$.concat("@").some(function(t){var r=("@"===t?b:w)(c(e),c(t));if("undefined"!=typeof r)return this[R].apply(null,[t].concat(r)),D=!0},this)},A.r=function(e,t){"@"!==e&&(e="/"+c(e),this.$.push(e)),this.on(e,t)};var W=new u,z=W.m.bind(W);z.create=function(){var e=new u,t=e.m.bind(e);return t.stop=e.s.bind(e),t},z.base=function(e){m=e||"#",g=f()},z.exec=function(){d(!0)},z.parser=function(e,t){e||t||(b=o,w=i),e&&(b=e),t&&(w=t)},z.query=function(){var e={},t=I.href||g;return t.replace(/[?&](.+?)=([^&]*)/g,function(t,r,n){e[r]=n}),e},z.stop=function(){L&&(C&&(C[k](P,v),C[k](E,v),M[k](N,h)),F[R]("stop"),L=!1)},z.start=function(e){L||(C&&("complete"===document.readyState?s(e):C[j]("load",function(){setTimeout(function(){s(e)},1)})),L=!0)},z.base(),z.parser(),e.exports=z},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onUse=t.Form=t.View=t.Connect=t.provider=t.Ninjia=t.router=t.Component=void 0;var o=r(28),i=n(o),a=r(102),s=n(a),u=r(89),c=n(u),p=r(26),l=r(11),f=r(91),d=n(f),h=i.default.hub;h.subscribe("history-pending",function(e,t,r,n,o){e&&e.tag&&e.tag.trigger("before-leave"),o()}),h.subscribe("history-resolve",function(e,t,r,n,o,i){i()}),h.on("history-success",function(e,t){}),h.setHandler(function(e,t){if(!i.default.app)return void console.warn("\n\t\t\trouter hub expected a handler.\n\t\t\tplz invoke [app.router] to set the handler to hub.\n\t\t");var r="enter"===e?"$enter":"$leave";i.default.app.store.dispatch({type:r,payload:t})}),t.Component=s.default,t.router=i.default,t.Ninjia=c.default,t.provider=p.provider,t.Connect=p.Connect,t.View=l.View,t.Form=d.default,t.onUse=o.onUse},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=r(5),s=n(a),u=r(2),c=n(u),p=r(6),l=n(p),f=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),d=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=localStorage.getItem("order:recorded")){e.next=5;break}return widgets.Alert.add("warning","当前订单已过期",2e3),setTimeout(function(){(0,c.default)("/")},2e3),e.abrupt("return");case 5:a=JSON.parse(o),r({type:"order/update",payload:a}),r(l.default.getGiftById(a.gift)),t();case 9:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/wx_qrcode?scene=giftSubToPushUnconsumedSuborder");case 2:o=e.sent,r({type:"qrcode/subscribe/update",payload:o.response.ticket}),t();case 5:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=o(regeneratorRuntime.mark(function e(t){var r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(t,o){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.submitted=!0,setTimeout(function(){r.submitted=!1},5e3),i=o().order){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,$.post("/gift/"+i.gift+"/preorder",i);case 7:return a=e.sent,e.prev=8,e.next=11,s.default.chooseWXPay({timestamp:a.timestamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign});case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(8),r.submitted=!1,"cancel"===e.t0.type?widgets.Alert.add("warning",app.config.errors.PAY_CANCEL.message,2e3):widgets.Alert.add("warning",app.config.errors.PAY_FAIL.message,2e3),e.abrupt("return");case 18:(0,c.default)("/order/"+a.id+"/ready");case 19:case"end":return e.stop()}},e,n,[[8,13]])}));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=o(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(o,a){var s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=r.req.query.type,u={type:s},o({type:"record/reset"}),o({type:"order/init"}),"one2one"===s?u.capacity=1:u.capacity=2,u.gift=n.opts.gift.id,o({type:"order/update",payload:u}),t();case 8:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r,n){return e.apply(this,arguments)}}(),m=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop();
}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=o(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/order?my=true");case 2:o=e.sent,r({type:"orders/update"}),t&&t();case 5:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r,n){return e.apply(this,arguments)}}(),b=function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o,a,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n().orders,!o.busy){e.next=3;break}return e.abrupt("return");case 3:return r({type:"orders/busy",payload:!0}),a=o.params,t&&(a.my=!0),Object.assign(a,{limit:o.limit,page:o.page}),e.next=9,$.get("/gift/order/list/s?"+$.util.querystring.stringify(a));case 9:if(s=e.sent,u=s[0],c=s[1],r({type:"orders/count",payload:u}),r({type:"orders/add",payload:c}),r({type:"orders/page/increase"}),!(n().gifts.items.length+c.length>=u)){e.next=18;break}return r({type:"orders/busy",payload:!0}),e.abrupt("return");case 18:r({type:"orders/unbusy",payload:!0});case 19:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o,a,u,c,p,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n(),a=o.order,u=o.user,c=a.gift.info.cover?app.config.phtUri+a.gift.info.cover:app.config.images.SHARE_DEF_COVER,p=location.origin+("/order/"+a.id+"/state"),l={title:a.sender.name+app.config.messages.SHARE_INFO+a.gift.info.name,link:p,imgUrl:c},f={title:a.sender.name+app.config.messages.SHARE_INFO,desc:a.gift.info.name,link:p,imgUrl:c},t(),e.next=8,s.default.config();case 8:wx.onMenuShareTimeline(l),wx.onMenuShareAppMessage(f),wx.onMenuShareQQ(f),wx.onMenuShareWeibo(f);case 12:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),_=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(t,r){var n,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=r(),o=n.order,a=n.user,s=function(e){return e.receivers&&e.receivers[0]&&e.receivers[0].telephone||!1},s(o)||"logistics"!==o.gift.scene||t({type:"order/receive/collection",payload:!0});case 3:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,o){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(x(r.req.params.id));case 2:t();case 3:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),x=function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/order/"+t+"/detail");case 2:o=e.sent,r({type:"order/update",payload:o});case 4:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),k=function(){widgets.Modal.open({tag:"gift-share-modal",size:"lg"})},j=function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o,a,s,u,p,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n(),a=o.order,s=o.user,u=o.suborder,t.poi?t.scene="poi":t.address&&(t.scene="logistics"),e.prev=2,e.next=5,$.post("/gift/order/"+a.id+"/address",t);case 5:p=e.sent,p.rc||console.error("saveAddr",app.config.errors.NO_RES_CODE.message),e.t0=p.rc,e.next=1===e.t0?10:2===e.t0?12:3===e.t0?14:4===e.t0?16:26;break;case 10:return widgets.Alert.add("warning",app.config.messages.GIFT_SAVED,2e3),e.abrupt("break",28);case 12:return widgets.Alert.add("warning",app.config.messages.NO_GIFT_LEFT,2e3),e.abrupt("break",28);case 14:return widgets.Alert.add("warning",app.config.messages.INFO_INCOMPLETE,2e3),e.abrupt("break",28);case 16:if(l=p.suborder,f=$.util.omit(l,"updatedAt","order","gift","express"),r({type:"order/suborders/add",payload:f}),"logistics"!==t.scene){e.next=21;break}return e.abrupt("return",(0,c.default)("/gift/"+a.gift.id+"/share"));case 21:if("poi"!==t.scene){e.next=25;break}if(!s.subscribe){e.next=24;break}return e.abrupt("return",(0,c.default)("/order/"+a.id+"/state"));case 24:return e.abrupt("return",(0,c.default)("/order/"+a.id+"/subscribe"));case 25:return e.abrupt("break",28);case 26:return widgets.Alert.add("warning",app.config.errors.SERVER_ERROR.message,2e3),e.abrupt("break",28);case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(2),widgets.Alert.add("warning",app.config.errors.SERVER_ERROR.message,2e3);case 33:case"end":return e.stop()}},e,i,[[2,30]])}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}();t.default={enterOrderReceive:f,enterOrderPay:d,enterOrderRecord:v,enterOrderSubscribe:h,enterOrderReady:w,enterOrderReadyOne2One:_,enterOrderState:m,enterOrderList:g,enterOrderDetail:O,nextPage:b,getOrderById:x,shareOrder:k,orderReceiveSubmit:j,wxPay:y}},function(e,t){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=navigator.userAgent,u={isAndroid:s.indexOf("Android")>-1||s.indexOf("Adr")>-1,isiOS:!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},c=(i=o=function(){function e(){var t=this;n(this,e),this.cmdQueue=new p,this.configList=e.methods,this.init(),e.methods.forEach(function(e){var r=t;r[e]=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=new Promise(function(t,o){r.cmdQueue.enqueue({$location:window.location.href,method:e,args:n,ctx:r,resolve:t,reject:o,done:function(r){if("fail"===r.type||"cancel"===r.type){var n="[wx:jssdk] Reject action. [method]: "+e+", [type]: "+r.type+", [reason]: "+(r.payload&&r.payload.errMsg),i=new Error(n);return i.type=r.type,i.originMsg=r.payload&&r.payload.errMsg||null,o(i.originMsg)}t(r.payload)}})});return setTimeout(function(){i.catch(function(e){})},0),i}})}return e.prototype.init=function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForWxJsApi(1e3);case 2:wx.error(function(e){});case 3:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.waitForWxJsApi=function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"==typeof wx&&setTimeout(r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitForWxJsApi(n);case 2:case"end":return e.stop()}},e,t)})),n),console.info("[wx:jssdk]: wx is ready.");case 2:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.config=function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._config();case 2:return e.next=4,new Promise(function(e,t){wx.ready(function(){e()})});case 4:case"end":return e.stop()}},e,this)}));return e}(),e.prototype._config=function(){function t(e){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function t(r){var n,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=location.href,t.next=3,$.get("/wechat/sign/jssdk?type=jsapi&url="+encodeURIComponent(n).replace("%3A",":"));case 3:if(o=t.sent,r||(r=e.methods),Array.isArray(r)){t.next=8;break}return alert("[wx:jssdk]: wx config expected a array, but "+("undefined"==typeof r?"undefined":a(r))),t.abrupt("return");case 8:i={debug:!1,appId:o.appId,timestamp:o.timestamp,nonceStr:o.nonceStr,signature:o.signature,jsApiList:r},this.configList=r,wx.config(i);case 11:case"end":return t.stop()}},t,this)}));return t}(),e.prototype.ready=function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){var n,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise(function(){var e=r(regeneratorRuntime.mark(function e(t,r){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(){wx.ready(function(){t(),clearTimeout(n)})},n=setTimeout(function(){r("wx js api is timeout.")},5e3),u.isiOS?i():o._config().then(i);case 3:case"end":return e.stop()}},e,o)}));return function(t,r){return e.apply(this,arguments)}}()),e.next=3,n;case 3:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.exec=function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){var r,n,o,i,a,s,u,c,p,l,f,d,h=t.method,y=t.args,v=t.done,m=t.$location;t.resolve,t.reject;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=function(e){c&&c(),i&&i(),v({type:"fail",payload:e})},f=function(e){p&&p(),a&&a(),v({type:"cancel",payload:e})},l=function(e){u&&u(),o&&o(),v({type:"success",payload:e})},e.prev=3,e.next=6,this.ready(m);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(3),e.abrupt("return");case 11:r=y[0],n=void 0===r?{}:r,o=y[1],i=y[2],a=y[3],s=y[4],u=n.success,c=n.fail,p=n.cancel,n.success=l,n.fail=d,n.cancel=f,wx[h].apply(wx,[n]);case 19:case"end":return e.stop()}},e,this,[[3,8]])}));return e}(),e}(),o.methods=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard","editAddress"],i),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;n(this,e),this.limit=t,this.busy=!1,this.queue=[],this.ready=!1}return e.prototype.waitForWxJsApi=function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"==typeof wx&&setTimeout(r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitForWxJsApi(n);case 2:case"end":return e.stop()}},e,t)})),n),this.ready=!0,console.info("[wx:jssdk]: wx is ready.");case 3:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.enqueue=function(e){return this.crashed?void console.warn("Wechat js sdk crashed."):(this.queue.push(e),void(this.busy||this.startUp()))},e.prototype.startUp=function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.queue[0],!this.crashed){e.next=5;break}return this.queue=[],this.busy=!1,e.abrupt("return");case 5:if(t){e.next=8;break}return this.busy=!1,e.abrupt("return");case 8:if(this.busy=!0,this.ready){e.next=12;break}return e.next=12,this.waitForWxJsApi();case 12:return e.next=14,this.exec(t);case 14:return e.next=16,this.startUp();case 16:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.exec=function(){function e(e){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t){var r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ctx,n=t.args,o=t.method,e.prev=1,e.next=4,r.exec(t);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),console.warn("\n\t\t\t\tWechat js sdk crashed. a error ocurr in cmd queue.\n\t\t\t\t[message]: "+e.t0.message+"\n\t\t\t"),this.crashed=!0,e.abrupt("return");case 11:this.queue.splice(0,1);case 12:case"end":return e.stop()}},e,this,[[1,6]])}));return e}(),e}();t.default=new c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=r(5),s=n(a),u=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,o){var a,s,u,c,p,l,f,d,h,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=20,s=r.req.params.id,e.next=4,$.get("/gift/order/list/s?limit="+a+"&id="+s);case 4:if(u=e.sent,!u[1].length){e.next=23;break}c=[],p=0,l=u[1].length;case 8:if(!(p<l)){e.next=22;break}f=u[1][p],d=0,h=f.receivers.length;case 11:if(!(d<h)){e.next=19;break}if(y=f.receivers[d],!(c.length>=a)){e.next=15;break}return e.abrupt("break",19);case 15:c.push(y);case 16:d++,e.next=11;break;case 19:p++,e.next=8;break;case 22:n({type:"/gift/suborders/update",payload:c});case 23:t();case 24:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),c=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"gifts/reset"}),o=n().merchant,a={title:o.info.name+app.config.messages.SHARE_DESC,link:location.href,imgUrl:app.config.images.SHARE_DEF_COVER},u={title:app.config.messages.SHARE_TITLE,desc:o.info.name+app.config.messages.SHARE_DESC,link:location.href,imgUrl:app.config.images.SHARE_DEF_COVER},e.next=6,s.default.config();case 6:wx.onMenuShareTimeline(a),wx.onMenuShareAppMessage(u),wx.onMenuShareQQ(u),wx.onMenuShareWeibo(u),t();case 11:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(t,r){var n,o,a,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r().gifts,!n.busy){e.next=3;break}return e.abrupt("return");case 3:return t({type:"gifts/busy",payload:!0}),o=n.params,Object.assign(o,{limit:n.limit,page:n.page}),e.next=8,$.get("/gift?"+$.util.querystring.stringify(o));case 8:if(a=e.sent,s=a[0],u=a[1],t({type:"gifts/count",payload:s}),t({type:"gifts/add",payload:u}),t({type:"gifts/page/increase"}),!(r().gifts.items.length+u.length>=s)){e.next=17;break}return t({type:"gifts/busy",payload:!0}),e.abrupt("return");case 17:t({type:"gifts/unbusy",payload:!0});case 18:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,o){var a,u,c,p,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.req.params.id,e.next=3,n(f(a));case 3:return u=o(),c=u.gift,p=c.info.cover?app.config.phtUri+c.info.cover:app.config.images.SHARE_DEF_COVER,l={title:c.info.name,imgUrl:p},d={title:app.config.messages.SHARE_TITLE,desc:c.info.name,imgUrl:p},e.next=9,s.default.config();case 9:wx.onMenuShareTimeline(l),wx.onMenuShareAppMessage(d),wx.onMenuShareQQ(d),wx.onMenuShareWeibo(d),t();case 14:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/"+t);case 2:o=e.sent,r({type:"gift/update",payload:o});case 4:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(t,r){var n,o,a,u,c,p,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r(),o=n.order,a=o.gift,u=null,!a.status||!a.status.lbs){e.next=21;break}return e.prev=4,e.next=7,s.default.getLocation();case 7:u=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),widgets.Alert.add("warning",app.config.errors.LOCATION_NOAUTH.message);case 13:return c=$.util.querystring.stringify({tag:a.poitag,latitude:u.latitude||0,longitude:u.longitude||0}),e.next=16,$.get("/wechat/poi?"+c);case 16:p=e.sent,t({type:"pois/update",payload:p}),t({type:"poi/loaded",payload:!0}),e.next=27;break;case 21:return l=a.poitag?"/wechat/poi?tag="+a.poitag:"/wechat/poi",e.next=24,$.get(l);case 24:f=e.sent,t({type:"pois/update",payload:f}),t({type:"poi/loaded",payload:!0});case 27:case"end":return e.stop()}},e,i,[[4,10]])}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),h=function(e){return{type:"suborder/update",payload:{poi:e}}};t.default={enterGiftList:c,enterGiftShare:u,enterGiftDetail:l,nextPage:p,getPois:d,selectPoi:h,getGiftById:f}},function(e,t,r){"use strict";function n(e){return o(e,"$name","$dirty","$pristine","$valid","$invalid","$submitted","$error","$ok","$allPristine","$allDirty","$validate","$meta")}function o(){var e=[].slice.apply(arguments),t=e[0],r=e.slice(1),n={};for(var o in t)r.indexOf(o)<0&&(n[o]=t[o]);return n}function i(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function a(e,t){e.classList?e.classList.add(t):i(e,t)||(e.className+=" "+t)}function s(e,t){if(e.classList)e.classList.remove(t);else if(i(e,t)){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(e){return Object.keys(e).map(function(t){return e[t]})},p=function(){return Object.assign.apply(Object,arguments)},l=function(e,t){for(var r=[],n=0,o=e.length;n<o;n++)t.indexOf(e[n])>=0&&r.push(e[n]);return r},f=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.keys(e).filter(function(e){return r.indexOf(e)>=0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},d=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0];return Array.isArray(o)&&(r=o),Object.keys(e).filter(function(e){return r.indexOf(e)<0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},h=function e(t){if(!t)return t;var r,n=[Number,String,Boolean];if(n.forEach(function(e){t instanceof e&&(r=e(t))}),"undefined"==typeof r)if("[object Array]"===Object.prototype.toString.call(t))r=[],t.forEach(function(t,n,o){r[n]=e(t)});else if("object"==("undefined"==typeof t?"undefined":u(t)))if(t.nodeType&&"function"==typeof t.cloneNode)var r=t.cloneNode(!0);else if(t.prototype)r=t;else if(t instanceof Date)r=new Date(t);else{r={};for(var o in t)r[o]=e(t[o])}else r=t;return r},y={stringify:function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},parse:function(e){return e.split("&").reduce(function(e,t){var r=t.split("=");return e[r[0]]=r[1],e},{})}},v=null,m=function(e,t){clearTimeout(v),v=setTimeout(function(){e.apply(context),v=null},t)},g=function e(t,r){return t&&r&&"object"===("undefined"==typeof t?"undefined":u(t))&&"object"===("undefined"==typeof r?"undefined":u(r))?Object.keys(t).length===Object.keys(r).length&&Object.keys(t).reduce(function(n,o){return n&&e(t[o],r[o])},!0):t===r},b=function(e){for(var t="",r=0,n=e.length;r<n;r++){var o=e.charAt(r);t+=/^[A-Z]+$/.test(o)?0===r?""+o.toLowerCase():"-"+o.toLowerCase():o}return t};t.default={values:c,mixin:p,querystring:y,throttle:m,clone:h,deepEqual:g,omit:d,pick:f,camelToLine:b,exclude:o,extractField:n,hasClass:i,addClass:a,removeClass:s,intersect:l}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=n(o),a=function(e,t,r){var n=r.store.getState,o=n(),a=o.order,s=o.user;return a.sender.id===s.id?(0,i.default)("/order/"+a.id+"/ready"):void e()},s=function(e,t,r){var n=r.store.getState,o=n(),a=o.order,s=o.user;return a.sender.id!=s.id?(widgets.Alert.add("danger",app.config.errors.NORIGHT_OPEN_PAGE.message,2e3),void setTimeout(function(){(0,i.default)("/")},2e3)):void e()};t.default={isSender:s,isNotSender:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.parent?o(e.parent):e}function i(e){return(0,c.default)(e,"provider expect a state store"),function(t){return(0,c.default)("object"===("undefined"==typeof t?"undefined":s(t))&&t instanceof riot.Tag,"\n\t\t\tprovider expect a riot tag instead of "+t),t.opts.store=e,p=t}}function a(e){return p||o(e)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i,t.getProvider=a;var u=r(27),c=n(u),p=null},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var o=r(35),i=n(o),a=r(152),s=n(a),u=r(151),c=n(u),p=r(150),l=n(p),f=r(34),d=n(f),h=r(36);n(h);t.createStore=i.default,t.combineReducers=s.default,t.bindActionCreators=c.default,t.applyMiddleware=l.default,t.compose=d.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(e){return function(e){return function(t){return"route"===t.type,e(t)}}}}function i(e,t){e.off("state-search").on("state-search",function(e){var r=e.param,n=e.value,o=t.getState().route,i=o.data.req.query;i[r]=n,o(o.$location+"?"+$.util.querystring.stringify(i),null,!0)}),e.off("state-change").on("state-change",function(e){t.dispatch({type:"$route",payload:{route:e}})}),e.off("sync-state-query").on("sync-state-query",function(e){t.dispatch({type:"$query",payload:e})}),e.off("busy-pending").on("busy-pending",function(){}),e.off("busy-resolve").on("busy-resolve",function(){})}Object.defineProperty(t,"__esModule",{value:!0}),t.View=t.syncHistoryWithStore=t.routerMiddlewareCreator=void 0;var a=r(2),s=(n(a),r(97)),u=n(s);t.default={routerMiddlewareCreator:o,syncHistoryWithStore:i,View:u.default},t.routerMiddlewareCreator=o,t.syncHistoryWithStore=i,t.View=u.default},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.provider=t.connect=void 0;var o=r(140),i=n(o),a=r(31),s=n(a);t.connect=i,t.provider=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(e){return function(e){return function(t){return"route"===t.type,e(t)}}}}function i(e,t){e.off("state-search").on("state-search",function(e){var r=e.param,n=e.value,o=t.getState().route,i=o.data.req.query;i[r]=n,o(o.$location+"?"+$.util.querystring.stringify(i),null,!0)}),e.off("state-change").on("state-change",function(e){t.dispatch({type:"$route",payload:{route:e}})}),e.off("sync-state-query").on("sync-state-query",function(e){t.dispatch({type:"$query",payload:e})}),e.off("busy-pending").on("busy-pending",function(){}),e.off("busy-resolve").on("busy-resolve",function(){})}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),s=(n(a),r(144));t.default={routerMiddlewareCreator:o,syncHistoryWithStore:i,view:s.view}},function(e,t,r){function n(e){return r(o(e))}function o(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./app/app.reducers":16,"./bigpack/bigpack.reducers":18,"./gift/gift.reducers":19,"./order/order.reducers":21,"./suborder/suborder.reducers":23};n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id=14},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(1),l=n(p),f=r(41),d=n(f),h=r(3),y=(s=(0,h.Connect)(function(e){return{clientWidth:e.clientWidth}},function(e){return{setClientWidth:function(){return e(d.default.setClientWidth())}}}),s(u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){var t=this;window.addEventListener("resize",function(){$.util.throttle(function(){t.opts.setClientWidth()},50)},!0)},c(t,[{key:"name",get:function(){return"app"}},{key:"tmpl",get:function(){return"\n\t\t\t<router-outlet></router-outlet>\n\t\t"}}]),t}(l.default.Tag))||u);t.default=y},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case"maskShow":return e=!0;case"maskHidden":return e=!1;default:return e}},n=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body.clientWidth,t=arguments[1];return"body/clientWidth"===t.type?e=t.payload:e},o=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"91拼团",t=arguments[1];return"changeTitle"===t.type?e=t.payload:e},i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,arguments[1]);return e},a=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return"user"===t.type?e=t.payload:e},s=function e(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case"hideBar":return!1;default:return e}},u=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"merchant":return Object.assign({},e,t.payload);default:return e}},c=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pos:0,direction:"down"},t=arguments[1];if("scroll"===t.type){if(t.payload-e.pos>0)return e={pos:t.payload,direction:"down"};e={pos:t.payload,direction:"up"}}return e};t.default={clientWidth:n,mask:r,merchant:u,user:a,title:o,showBar:s,scroll:c,lastAction:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=r(2),s=n(a),u=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,o){var a,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o(),u=a.user,e.next=3,$.get("/gift/order/"+r.req.params.id+"/detail");
case 3:if(c=e.sent,u.subscribe){e.next=6;break}return e.abrupt("return",(0,s.default)("/bigpack/"+c.id+"/subscribe"));case 6:if(!c.sender||c.sender.openid!==u.openid){e.next=8;break}return e.abrupt("return",(0,s.default)("/order/"+c.id+"/ready"));case 8:n({type:"bigpack/update",payload:c}),t();case 10:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}(),c=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){var o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n(),a=o.user,u=o.bigpack,!u.sender){e.next=7;break}if(u.sender.id!==a.id){e.next=4;break}return e.abrupt("return",(0,s.default)("/order/"+u.id+"/ready"));case 4:return widgets.Alert.add("danger",app.config.messages.GIFT_RECEIVED,2e3),setTimeout(function(){(0,s.default)("/")},2e3),e.abrupt("return");case 7:t();case 8:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}();t.default={enterBigpackDetail:u,enterBigpackRecord:c}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={localId:null,serverId:null,name:null,capacity:null,type:null,gift:null},n=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case"bigpack/init":return r;case"bigpack/update":return Object.assign({},e,t.payload);default:return e}};t.default={bigpack:n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={loaded:!1},n=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case"poi/loaded":return Object.assign({},e,{loaded:t.payload});default:return e}},o=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case"qrcode/subscribe/update":return t.payload;default:return e}},i={items:[],busy:!1,page:1,limit:10,params:{},count:0},a=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"gifts/reset":return i;case"gifts/init":return Object.assign({},e,t.payload);case"gifts/params/update":return Object.assign({},e,{params:t.payload});case"gifts/page/increase":return Object.assign({},e,{page:e.page+1});case"gifts/busy":return Object.assign({},e,{busy:!0});case"gifts/unbusy":return Object.assign({},e,{busy:!1});case"gifts/count":return Object.assign({},e,{count:t.payload});case"gifts/add":return Object.assign({},e,{items:[].concat(e.items,t.payload)});default:return e}},s=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"gift/update":return Object.assign({},e,t.payload);default:return e}},u=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"/gift/suborders/update":return t.payload;default:return e}},c=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"pois/update":return[].concat(t.payload);default:return e}};t.default={gifts:a,gift:s,suborders:u,pois:c,poi:n,qrForSubscribe:o}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(4)),b=n(g),w=r(8),_=n(w),O=r(3),x=function(e,t){switch(e.scene){case"poi":return"poi";case"logistics":return"logistics";case"multi":if("poi"===t.scene)return"poi";if("logistics"===t.scene)return"logistics"}},k=(u=(0,O.Connect)(function(e){return{order:e.order,scene:x(e.order.gift,e.receive)}},function(e){return{share:b.default.shareOrder,enterOrderReceive:function(t,r){return e(b.default.enterOrderReceive(t,r))}}}),c=(0,O.onUse)([_.default.isNotSender,"enterOrderReceive"]),(0,O.Component)(p=(0,O.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-receive"}},{key:"tmpl",get:function(){return"\n\t\t\t<order-receive-poi if=\"{ opts.scene === 'poi' }\"></order-receive-poi>\n\t\t\t<order-receive-logistics if=\"{ opts.scene === 'logistics' }\"></order-receive-logistics>\n\t\t"}}]),t}(v.default.Tag),f.originName="order-receive",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p)||p);t.default=k},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0},n=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case"record/reset":return r;case"record/update":return Object.assign({},e,t.payload);default:return e}},o={items:[],busy:!1,page:1,limit:10,params:{},count:0},i=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"orders/init":return Object.assign({},e,t.payload);case"orders/params/update":return Object.assign({},e,{params:t.payload});case"orders/page/increase":return Object.assign({},e,{page:e.page+1});case"orders/busy":return Object.assign({},e,{busy:!0});case"orders/unbusy":return Object.assign({},e,{busy:!1});case"orders/count":return Object.assign({},e,{count:t.payload});case"orders/add":return Object.assign({},e,{items:[].concat(e.items,t.payload)});default:return e}},a={localId:null,serverId:null,name:null,capacity:null,type:null,gift:null,receivers:[]},s=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case"order/init":return a;case"order/update":return Object.assign({},e,t.payload);case"order/suborders/add":return Object.assign({},e,{receivers:[].concat(e.receivers,[t.payload])});default:return e}},u=function e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return"order/receive/collection"===t.type?t.payload:e};t.default={order:s,orders:i,record:n,orderReceiveCollection:u}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=r(5),s=(n(a),r(2)),u=(n(s),function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}()),c=function(){var e=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,r){return e.apply(this,arguments)}}();t.default={enterPersonal:u,enterPersonalOrderInfo:c}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={consignee:null,address:null,telephone:null,poi:null},n=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case"suborder/init":return r;case"suborder/update":return Object.assign({},e,t.payload);default:return e}};t.default={suborder:n}},function(e,t,r){var n,o;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i){n=i,o="function"==typeof n?n.call(t,r,t,e):n,!(void 0!==o&&(e.exports=o))}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(r){function n(t,o,i){var a;if("undefined"!=typeof document){if(arguments.length>1){if(i=e({path:"/"},n.defaults,i),"number"==typeof i.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(e){}return o=r.write?r.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}t||(a={});for(var u=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,p=0;p<u.length;p++){var l=u[p].split("="),f=l.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var d=l[0].replace(c,decodeURIComponent);if(f=r.read?r.read(f,d):r(f,d)||f.replace(c,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===d){a=f;break}t||(a[d]=f)}catch(e){}}return a}}return n.set=n,n.get=function(e){return n(e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,r){n(t,"",e(r,{expires:-1}))},n.withConverter=t,n}return t(function(){})})},function(e,t){"use strict";function r(e,t){if(!e||"string"!=typeof e)throw new Error("invalid validator name [name]="+e);if(!t||"function"!=typeof t)throw new Error("invalid validator name [fn]="+t);n[e]=t}Object.defineProperty(t,"__esModule",{value:!0});var n={},o=[{name:"required",fn:function(e){return""===e.trim()}},{name:"max",fn:function(e,t){return parseInt(e.trim(),10)>t}},{name:"min",fn:function(e,t){return parseInt(e.trim(),10)<t}},{name:"maxlength",fn:function(e,t){return e.length>t}},{name:"minlength",fn:function(e,t){return e.length<t}},{name:"pattern",fn:function(e,t){return!new RegExp(t).test(e.trim())}}];o.map(function(e){r(e.name,e.fn)}),t.validators=n,t.registerValidators=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.provider=t.Connect=void 0;var o=r(93),i=n(o),a=r(9),s=n(a);t.Connect=i.default,t.provider=s.default},function(e,t){"use strict";function r(e,t){if("undefined"==typeof e||!e)throw new Error(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.onUse=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=n(u),p=r(2),l=n(p),f=r(7),d=(n(f),r(100)),h=n(d),y=r(101),v=n(y),m=r(99),g=n(m),b=function(){function e(t){o(this,e),this._root=null,this._busy=!1,this._routes=[],this._defaultRoute=null,this._location=null,this._prev=null,this.state={},this._title=null,this._emitter=t,this.refinedRoutes=[],this.prevHints=[],this.currHints=[],this.evtListeners=[]}return e.prototype.startup=function(){return this._parseRoute(),l.default.base("/"),(0,l.default)(this.doRoute.bind(this)),v.default.nextTick(function(){l.default.start(),l.default.exec()}),this},e.prototype.parse=function(e){var t={},r=e.split("?"),n=r[0],o=r[1],i=null;this.location&&(i=v.default.compareUrl(this.location,n));var a=""===n||"/"===n?["/"]:n.split("/");if(t.query={},o&&o.split("&").map(function(e){return t.query[e.split("=")[0]]=e.split("=")[1]}),t.hints=[],a.length)for(var s=0,u=a.length;s<u;s++){var c=a[s];0===s?t.hints.push(v.default.completePart(c)):t.hints.indexOf(c)<0&&t.hints.push(v.default.combineUriParts(a,s,c))}return t},e.prototype._parseRoute=function(){return l.default.parser(this.parse.bind(this)),this},e.prototype.matches=function(e){var t=e.routes,r=e.location,n=this.parse(r);return this.doRoute(n,t)},e.prototype.match=function(e,t){var r=e.split("/").map(function(e){return v.default.completePart(e)}),n=t.split("/").map(function(e){return v.default.completePart(e)});if(!(e&&t&&r&&r.length&&n&&n.length&&n.length==r.length))return!1;var o=r.map(function(e,t){return e.startsWith("/:")?{key:e.slice(1),index:t}:e===n[t]||null}).filter(function(e){return e});return o.length!=r.length?null:o.filter(function(e){return"object"===("undefined"==typeof e?"undefined":a(e))}).reduce(function(e,t){return e[t.key.slice(1)]=n[t.index].slice(1),e},{})},e.prototype.doRoute=function(e,t){if(e){this.busy=!0,this.trigger("busy-pending");var r={req:e},n=this.recurMatch(r,this.root||{},this.refinedRoutes,[]),o=n.ctx,i=n.components,a=i[i.length-1];if(a&&a.route.abstract)return(0,h.default)("cannot transition to a abstract state("+a.route.path+")"),this.routeToDefault();this.currHints=i,this.resolveRoutes(o,this.currHints,this.prevHints,[],[],this.loopRouteTo.bind(this)),this.prevHints=i}},e.prototype.recurMatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],n=arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.req,s=a.hints,u=s[o],c=r?r:this.routes;if(!u)return{components:n,ctx:e};for(var p=0,l=c.length;p<l;p++){var f=c[p],d=this.match(v.default.completePart(f.path),v.default.completePart(u));if(d){e.req.params||(e.req.params={}),Object.assign(e.req.params,d),!e.req.body&&(e.req.body={}),Object.assign(e.req.body,v.default.omit(f,"resolve","redirectTo","tag","path","name")||{}),f.location=v.default.completePart(u),n.push({param:i({},d),ctx:Object.assign({},e),route:f});break}}return this.recurMatch(e,t,r,n,++o)},e.prototype.resolveRoutes=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=t[0],u=r[0];return t.length?r.length?s.route.path==u.route.path&&v.default.isEqual(s.param,u.param)?this.resolveRoutes(e,t.slice(1),r.slice(1),n,o,i,++a):(n.push(s),o=o.concat(r),this.resolveRoutes(e,t.slice(1),[],n,o,i,++a)):(n=n.concat(t),this.resolveRoutes(e,[],[],n,o,i,++a)):(r.length&&(o=o.concat(r)),i(n,o))},e.prototype.loopRouteTo=function(e,t){var r=e[e.length-1],n=null;r&&(n=r.route.tag),t&&t.length&&this.leaveTags(t,n),e&&e.length&&this.enterTags.apply(this,[e,0])},e.prototype.leaveTags=function(e,t){for(var r=this,n=function(n,o){var i=e[n],a=i.route.tag;if(!i)return"break";if(!a)return(0,h.default)("failed to leave tag with route, [path]="+i.route.path),"break";if(!t){var s=r.refinedRoutes.filter(function(e){return e.id===i.route.parent})[0];s&&(t=s.tag)}a.trigger("leave",t),i.route.cache?(a.opts.show||a.opts.$show)&&(a.opts.show=!1,a.opts.hidden=!0,a.update()):(a.unmount(!0),a.parent.update(),delete i.route.tag),r.handler&&r.handler("leave",a)},o=e.length-1,i=e.length;o>=0;o--){var a=n(o,i);if("break"===a)break}},e.prototype.enterTags=function(e,t){var r=this;if(e&&e.length){var n=e[0];if(!n)return this.enterTags(e.slice(1),++t);var o=n.route,i=n.ctx,a=o.tag,s=o.path,u=o.component;n?!function(){var n=function(){var r=this;if(!a||!a.isMounted){var n=null;if(o.components){var c=i.req.query.component,l=o.components[c];if(n=p.parent.root.querySelector('div[data-tag-name="'+l.displayName+'"]'),a=new l(n,{parent:p.parent}),!l)return(0,h.default)("component provider expected a component."),this.routeToDefault(!0)}else n=p.parent.root.querySelector('div[data-tag-name="'+u.displayName+'"]'),a=new o.component(n,{parent:p.parent});a&&(a.$routePath=s,o.tag=a,p.update())}if(a)return this.routeTo(o,i,!1,t,function(){r.enterTags.apply(r,[e.slice(1),++t])})};r.state.hint=s;var c=r.refinedRoutes.filter(function(e){return e.id===o.parent})[0],p=(c&&c.tag||r.root).tags["router-outlet"];p.$isMounted?n.apply(r):p.one("$mounted",n.bind(r))}():((0,h.default)("404"),recurEnter(e.slice(1)))}},e.prototype.routeTo=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this,o=arguments[3],i=arguments[4];if(this.busy=!1,this.trigger("busy-resolve"),r)return e(e.path);if(e.tag.opts.show||e.tag.opts.$show||v.default.completePart(e.path)!==this.location){var a=e.path,s=e.location;if(this.trigger("state-change",{$state:a,$location:s,ctx:t}),e.redirectTo)return e(e.redirectTo),!0;var u={hints:t.req.hints,req:t.req,route:e,tag:e.tag,$state:a,$location:s,index:o};return e.resolve?e.resolve.apply(e.tag,[function(e){n.routeToDone(e,t,u,i)},t]):void this.routeToDone(null,t,u,i)}},e.prototype.routeToDone=function(e,t,r,n){var o=this,i=r.hints,a=r.req,s=r.route,u=r.tag,c=r.$state,p=r.$location,l=r.index,f=this;t&&e&&(!t.body&&(t.body={}),Object.assign(t.body,e));var d=0,h=function(){d++;var e=o.evtListeners.filter(function(e){var t=e.evt,r=e.fn;if("history-pending"===t)return 1===r.toString().match(/\(.*?\)/)[0].replace("(","").replace(")","").split(",").filter(function(e){return"next"===e}).length}),t=e.length;t===d&&y()},y=function(){f.executeMiddlewares(u,u.$mws,t,function(){f.routeSuccess(e,t,{hints:i,req:a,route:s,tag:u,$state:c,$location:p,index:l},n)})()};f.trigger("history-pending",f.prev,c,p,t,h)},e.prototype.routeSuccess=function(e,t,r,n){var o=this,i=r.hints,a=(r.req,r.route),s=r.tag,u=(r.$state,r.$location),c=r.index,p=this,l=0,f=function(){l++;var e=o.evtListeners.filter(function(e){var t=e.evt,r=e.fn;if("history-resolve"===t)return 1===r.toString().match(/\(.*?\)/)[0].replace("(","").replace(")","").split(",").filter(function(e){return"next"===e}).length}),t=e.length;t===l&&d()},d=function(){s.enter(p.prev,a,t),p.handler&&p.handler("enter",s),s.update(),p.trigger("history-success",p.prev,a),p.location=u,p.prev=a,n()};p.trigger("history-resolve",p.prev,a,t,i,c,f)},e.prototype.routeToDefault=function(e){var t=this.refinedRoutes.filter(function(e){return e.defaultRoute})[0].path;return e?location.href=location.origin+t:(0,l.default)(t)},e.prototype.setHandler=function(e){this.handler=e},e.prototype.go=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments[2];return!t&&this.title&&(t=this.title()),(0,l.default)(e,t,r),this},e.prototype.setTitle=function(e){this.title=e},e.prototype.executeMiddlewares=function(e,t,r,n){var o=this;return function(){return t&&t.length?void t[0].call(e,function(){return o.executeMiddlewares(e,t.slice(1),r,n)()},r):n()}},e.prototype.search=function(e,t){return this.trigger("state-search",{param:e,value:t}),this},e.prototype.subscribe=function(e,t){var r=this;return this.evtListeners.push({evt:e,fn:t}),this.on(e,t),function(){for(var n=0,o=r.evtListeners.length;n<o;n++){var i=r.evtListeners[n];if(t===i.fn)return r.off(e,t),!0}return!1}},e.prototype.trigger=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._emitter.trigger.apply(this._emitter,t)},e.prototype.on=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._emitter.on.apply(this._emitter,t)},e.prototype.off=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._emitter.off.apply(this._emitter,t)},e.prototype.one=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._emitter.one.apply(this._emitter,t)},s(e,[{key:"root",get:function(){return this._root},set:function(e){this._root=e}},{key:"prev",get:function(){return this._prev},set:function(e){this._prev=e}},{key:"busy",get:function(){return this._busy},set:function(e){this._busy=e}},{key:"title",get:function(){return this._title},set:function(e){this._title=e}},{key:"routes",get:function(){return this._routes},set:function(e){this._routes=e,v.default.flatAndComposePrefix(this.routes,this.refinedRoutes)}},{key:"defaultRoute",get:function(){return this._defaultRoute},set:function(e){this._defaultRoute=e}},{key:"location",get:function(){return this._location},set:function(e){this._location=e}}]),e}(),w=new b(c.default.observable());t.default={hub:w,$use:function(e){!this.$mws&&(this.$mws=[]),this.$mws.push(e)}};t.onUse=g.default.onUse},function(e,t,r){var n=r(136),o=n.Symbol;e.exports=o},function(e,t,r){function n(e){if(!a(e)||o(e)!=s)return!1;var t=i(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&p.call(r)==f}var o=r(130),i=r(132),a=r(137),s="[object Object]",u=Function.prototype,c=Object.prototype,p=u.toString,l=c.hasOwnProperty,f=p.call(Object);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.parent?o(e.parent):e}function i(e){return(0,c.default)(e,"provider expect a state store"),function(t){return(0,c.default)("object"===("undefined"==typeof t?"undefined":s(t))&&t instanceof riot.Tag,"\n\t\t\tprovider expect a riot tag instead of "+t),t.opts.store=e,p=t}}function a(e){return p||o(e)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i,t.getProvider=a;var u=r(32),c=n(u),p=null},function(e,t){"use strict";function r(e,t){if("undefined"==typeof e||!e)throw new Error(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(1),p=o(c),l=r(2),f=n(l),d=function(){function e(t){i(this,e),this._root=null,this._view=null,this._busy=!1,this._routes=[],this._defaultRoute=null,this._location=null,this._prev=null,this.state={},this._title=null,this._emitter=t,this.refinedRoutes=[]}return u(e,[{key:"startup",value:function(){return this._parseRoute(),f.default.base("/"),(0,f.default)(this.doRoute.bind(this)),h.nextTick(function(){f.default.start(),f.default.exec()}),this}},{key:"matches",value:function(e){var t=e.routes,r=e.location,n=this.parse(r);return this.doRoute(n,t)}},{key:"parse",value:function(e){var t={},r=e.split("?"),n=s(r,2),o=n[0],i=n[1],a=null;this.location&&(a=h.compareUrl(this.location,o));var u=""===o||"/"===o?["/"]:o.split("/");if(t.query={},i&&i.split("&").map(function(e){return t.query[e.split("=")[0]]=e.split("=")[1]}),this.location&&this.location==="/"+o)return this.trigger("sync-state-query",t.query),null;if(t.hints=[],u.length)for(var c=0,p=u.length;c<p;c++){var l=u[c];0===c?t.hints.push(h.completePart(l)):t.hints.indexOf(l)<0&&t.hints.push(h.combineUriParts(u,c,l))}return t}},{key:"_parseRoute",value:function(){return f.default.parser(this.parse.bind(this)),this}},{key:"routeTo",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this,i=arguments[4],a=arguments[5];if(this.busy=!1,this.trigger("busy-resolve"),n)return e(e.path);if(e.tag.opts.show||e.tag.opts.$show||h.completePart(e.path)!==this.location){var s=e.path,u=r;if(this.trigger("state-change",{$state:s,$location:u,ctx:t}),e.redirectTo)return e(e.redirectTo),!0;var c={hints:t.req.hints,req:t.req,route:e,tag:e.tag,$state:s,$location:u,index:i};return e.resolve?e.resolve.apply(e.tag,[function(e){o.routeToDone(e,t,c,a)},t]):void this.routeToDone(null,t,c,a)}}},{key:"match",value:function(e,t){var r=h.distinct(e.split("/").map(function(e){return h.completePart(e)})),n=h.distinct(t.split("/").map(function(e){return h.completePart(e)}));if(!(e&&t&&r&&r.length&&n&&n.length&&n.length==r.length))return!1;var o=r.map(function(e,t){return e.startsWith("/:")?{key:e.slice(1),index:t}:e===n[t]||null}).filter(function(e){return e});return o.length!=r.length?null:o.filter(function(e){return"object"===("undefined"==typeof e?"undefined":a(e))}).reduce(function(e,t){return e[t.key.slice(1)]=n[t.index].slice(1),e},{})}},{key:"recurMatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],n=this,o=arguments[3],i=arguments[4],a=e.req,s=a.hints,u=s[r];if(!t||!u)return{ctx:e,components:i};for(var c=null,p=o?o:this.routes,l=0,f=p.length;l<f;l++){var d=p[l],y=this.match(h.completePart(d.path),h.completePart(u));if(y){e.req.params||(e.req.params={}),Object.assign(e.req.params,y),!e.req.body&&(e.req.body={}),Object.assign(e.req.body,h.omit(d,"resolve","redirectTo","tag","path","name")||{}),c=d;break}}return c||r!==s.length?c?void!function(){var t=function(){var t=this;if(!c.tag||!c.tag.isMounted){var n=p.root.querySelector('div[data-tag-name="'+c.component.name+'"]'),a=new c.component(n);a&&(a.$routePath=c.path,p.parent.tags[a.opts.riotTag]=a,a.parent=p.parent,c.tag=a)}return c.tag?this.routeTo(c,e,u,!1,r,function(){if(s[r+1])return t.recurMatch(e,c.tag,r+1,o,i.concat(c))}):this.recurMatch(e,c,r+1,o,i.concat(c))};n.state.hint=c.path;var a=o.filter(function(e){return e.id===c.parent})[0],p=(a&&a.tag||n.root).tags["router-outlet"];p.$isMounted?t.apply(n):p.one("$mounted",t.bind(n))}():(console.info("404"),this.recurMatch(e,t,r+1,o,i)):t.defaultRoute?(this.routeTo(t.defaultRoute,e,u,!0,r),{ctx:e,components:i.concat(c)}):(console.info("404"),this.busy=!1,this.trigger("busy-resolve"),{ctx:e,components:i})}},{key:"doRoute",value:function(e,t){if(e){this.busy=!0,this.trigger("busy-pending");var r={req:e};return this.recurMatch(r,this.root||{},0,this.refinedRoutes,[])}}},{key:"routeToDone",value:function(e,t,r,n){var o=r.hints,i=r.req,a=r.route,s=r.tag,u=r.$state,c=r.$location,p=r.index,l=this;t&&e&&(!t.body&&(t.body={}),Object.assign(t.body,e));var f=requestAnimationFrame(function(){cancelAnimationFrame(f),f=void 0,l.trigger("history-pending",l.prev,u,c,t,l.executeMiddlewares(s,s.$mws,t,function(){l.routeSuccess(e,t,{hints:o,req:i,route:a,tag:s,$state:u,$location:c,index:p},n)}))})}},{key:"routeSuccess",value:function(e,t,r,n){var o=r.hints,i=(r.req,r.route),a=(r.tag,r.$state,r.$location),s=r.index,u=this,c=u.getMetaDataFromRouteMap(u.location).route,p=i,l=requestAnimationFrame(function(){cancelAnimationFrame(l),l=void 0,u.trigger("history-resolve",u.prev,p,t,o,s,function(){u.trigger("history-success",c,p),u.location=a,u.prev=i,n()})})}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments[2];return!t&&this.title&&(t=this.title()),(0,f.default)(e,t,r),this}},{key:"setTitle",value:function(e){this.title=e}},{key:"getMetaDataFromRouteMap",value:function(e){e=e&&e.startsWith("/")?e:"/"+e;for(var t=Object.keys(this.routes),r=0,n=t.length;r<n;r++){var o=t[r],i=this.routes[o];if(h.toPattern(o)===h.toPattern(e)){var a=(h.extractParams(o)||[]).map(function(e){return e.slice(2)}),s=(h.extractParams(e)||[]).map(function(e){return e.slice(1)});return{route:i,$state:o,$location:e,params:h.composeObject(a,s)}}}return{tag:null,params:null}}},{key:"executeMiddlewares",value:function(e,t,r,n){var o=this;return function(){return t&&t.length?void t[0].call(e,function(){return o.executeMiddlewares(e,t.slice(1),r,n)()},r):n()}}},{key:"search",value:function(e,t){return this.trigger("state-search",{param:e,value:t}),this}},{key:"trigger",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._emitter.trigger.apply(this._emitter,t)}},{key:"on",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._emitter.on.apply(this._emitter,t)}},{key:"off",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._emitter.off.apply(this._emitter,t)}},{key:"one",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._emitter.one.apply(this._emitter,t)}},{key:"view",get:function(){return this._view},set:function(e){this._view=e}},{key:"root",get:function(){return this._root},set:function(e){this._root=e}},{key:"prev",get:function(){return this._prev},set:function(e){this._prev=e}},{key:"busy",get:function(){return this._busy},set:function(e){this._busy=e}},{key:"title",get:function(){return this._title},set:function(e){this._title=e}},{key:"routes",get:function(){return this._routes},set:function(e){this._routes=e,h.flatAndComposePrefix(this.routes,this.refinedRoutes)}},{key:"defaultRoute",get:function(){return this._defaultRoute},set:function(e){this._defaultRoute=e}},{key:"location",get:function(){return this._location},set:function(e){this._location=e}}]),e}(),h=function(){function e(){i(this,e)}return u(e,null,[{key:"distinct",value:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];t.indexOf(o)<0&&t.push(o)}return t}},{key:"genId",value:function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r="",n=0;n<e;n++){
var o=Math.ceil(35*Math.random());r+=t[o]}return r}},{key:"completePart",value:function(e){return e.startsWith("/")?e:"/"+e}},{key:"assert",value:function(e,t){if(!e)throw new Error(t)}},{key:"omit",value:function(e){for(var t={},r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(var i in e)n.indexOf(i)<0&&(t[i]=e[i]);return t}},{key:"compareUrl",value:function(e,t){for(var r=[],n=e.split("/"),o=t.split("/"),i=0,a=n.length;i<a&&n[i]===o[i];i++)r.push(n[i]);return r.join("/")}},{key:"combineUriParts",value:function(t,r,n){if(!t.length||r<=0)return n;var o=t[r-1]+"/"+n;return e.combineUriParts(t,--r,o)}},{key:"composeObject",value:function(e,t){var r={};return Array.isArray(e)&&Array.isArray(t)&&e.length==t.length?(e.forEach(function(e,n){r[e]=t[n]}),r):r}},{key:"extractParams",value:function(e){return e.match(/_[a-zA-Z0-9:]+/g)}},{key:"toPattern",value:function(e){return e.replace(/_[a-zA-Z0-9:]+/g,"*")}},{key:"nextTick",value:function(e){return setTimeout(e,0)}}]),e}();h.flatAndComposePrefix=function(e,t){var r=e.children;if(r)for(var n=0,o=r.length;n<o;n++){var i=r[n];i.path=(e.path||"")+i.path,i.parent=e.id||"",i.id=h.genId(8),t.push(i),h.flatAndComposePrefix(i,t)}};var y=new d(p.observable());t.default={hub:y,$use:function(e){!this.$mws&&(this.$mws=[]),this.$mws.push(e)}}},function(e,t){"use strict";function r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var n=t[t.length-1],o=t.slice(0,-1);return function(){return o.reduceRight(function(e,t){return t(e)},n.apply(void 0,arguments))}}t.__esModule=!0,t.default=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){function n(){m===v&&(m=v.slice())}function i(){return y}function s(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return n(),m.push(e),function(){if(t){t=!1,n();var r=m.indexOf(e);m.splice(r,1)}}}function p(e){if(!(0,a.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(g)throw new Error("Reducers may not dispatch actions.");try{g=!0,y=h(y,e)}finally{g=!1}for(var t=v=m,r=0;r<t.length;r++)t[r]();return e}function l(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");h=e,p({type:c.INIT})}function f(){var e,t=s;return e={subscribe:function(e){function r(){e.next&&e.next(i())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");r();var n=t(r);return{unsubscribe:n}}},e[u.default]=function(){return this},e}var d;if("function"==typeof t&&"undefined"==typeof r&&(r=t,t=void 0),"undefined"!=typeof r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(o)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,y=t,v=[],m=v,g=!1;return p({type:c.INIT}),d={dispatch:p,subscribe:s,getState:i,replaceReducer:l},d[u.default]=f,d}t.__esModule=!0,t.ActionTypes=void 0,t.default=o;var i=r(30),a=n(i),s=r(164),u=n(s),c=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=r},function(e,t,r){var n,o;n=[t],o=function(e){"use strict";function t(e){var t=[];for(var r in e)t.push(r);return t}function r(e,t){var r=function(r){r&&r instanceof Event?(r.preventUpdate=!0,e[t](r),e.update()):e[t](r)};return r._inherited=!0,r}function n(e){var t=/^[a-zA-Z]+(\-[a-zA-Z]+)*$/;return e.replace(t,function(e){return e+', [data-is="'+e+'"]'})}var o={triggerDomEvent:function(e){var t=this;return setTimeout(function(){var r;"function"==typeof Event?r=new Event(e):(r=document.createEvent("Event"),r.initEvent(e,!0,!0)),t.root.dispatchEvent(r)},0),this}},i={init:function(){var e=this;this._shouldSyncFromOpts=!0,this.on("update",function(){e._shouldSyncFromOpts&&e.trigger("sync"),e._shouldSyncFromOpts=!0})},skipSync:function(){return this._shouldSyncFromOpts=!1,this}},a={init:function(){var e=this;this.one("update",function(){e._ownPropKeys=t(e),e._ownOptsKeys=t(e.opts)}),this.on("update",function(){var n=["root","triggerDomEvent"];t(e.parent).filter(function(t){return!~e._ownPropKeys.concat(n).indexOf(t)}).forEach(function(t){e[t]="function"!=typeof e.parent[t]||e.parent[t]._inherited?e.parent[t]:r(e.parent,t)}),t(e.parent.opts).filter(function(t){return!~e._ownOptsKeys.indexOf(t)&&"riotTag"!=t}).forEach(function(t){e.opts[t]="function"!=typeof e.parent.opts[t]||e.parent.opts[t]._inherited?e.parent.opts[t]:r(e.parent,t)})})}},s={init:function(){this.$=this.querySelector,this.$$=this.querySelectorAll},querySelector:function(e,t){var r=this.root.querySelector(n(e));return t?r._tag||void 0:r},querySelectorAll:function(e,t){var r=this.root.querySelectorAll(n(e));return t?Array.prototype.map.call(r,function(e){return e._tag||void 0}):r}};e.domEvent=o,e.syncEvent=i,e.parentScope=a,e.querySelector=s}.apply(t,n),!(void 0!==o&&(e.exports=o))},function(e,t,r){riot.tag2("radio",'<button type="button" __disabled="{opts.disabled || opts.__disabled}" data-selected="{selected ? \'yes\' : \'no\'}" data-size="{opts.size}" onclick="{onClick}"><input type="radio" __checked="{selected}" onclick="{onClick}"><yield></yield></button></style>','radio button,[riot-tag="radio"] button,[data-is="radio"] button{ display: inline-block; padding: 6px 12px; margin-bottom: 0; font-size: 14px; font-weight: normal; line-height: 1.42857143; text-align: center; white-space: nowrap; vertical-align: middle; cursor: pointer; background-image: none; border: 1px solid transparent; border-radius: 4px; } radio button:focus,[riot-tag="radio"] button:focus,[data-is="radio"] button:focus{ outline: thin dotted; outline: 5px auto -webkit-focus-ring-color; outline-offset: -2px; } radio button:hover,[riot-tag="radio"] button:hover,[data-is="radio"] button:hover,radio button:focus,[riot-tag="radio"] button:focus,[data-is="radio"] button:focus{ color: #333; text-decoration: none; } radio button:active,[riot-tag="radio"] button:active,[data-is="radio"] button:active{ background-image: none; outline: 0; box-shadow: inset 0 3px 5px rgba(0, 0, 0, .125); } radio button[disabled],[riot-tag="radio"] button[disabled],[data-is="radio"] button[disabled]{ pointer-events: none; cursor: not-allowed; box-shadow: none; opacity: .65; } radio button,[riot-tag="radio"] button,[data-is="radio"] button{ color: #333; background-color: #fff; border-color: #ccc } radio button:hover,[riot-tag="radio"] button:hover,[data-is="radio"] button:hover,radio button:focus,[riot-tag="radio"] button:focus,[data-is="radio"] button:focus,radio button:active,[riot-tag="radio"] button:active,[data-is="radio"] button:active,radio button[data-selected="yes"],[riot-tag="radio"] button[data-selected="yes"],[data-is="radio"] button[data-selected="yes"]{ color: #FFFFFF; background-color: #F0373D; border-color: #F0373D } radio button[data-size="lg"],[riot-tag="radio"] button[data-size="lg"],[data-is="radio"] button[data-size="lg"]{ padding: 10px 16px; font-size: 18px; line-height: 1.3333333; border-radius: 6px; } radio button[data-size="sm"],[riot-tag="radio"] button[data-size="sm"],[data-is="radio"] button[data-size="sm"]{ padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 3px; } radio button[data-size="xs"],[riot-tag="radio"] button[data-size="xs"],[data-is="radio"] button[data-size="xs"]{ padding: 1px 5px; font-size: 12px; line-height: 1.5; border-radius: 3px; }',"",function(e){"use strict";var t=this,n=r(37);this.mixin(n.parentScope),this.onClick=function(r){r.stopPropagation(),t.selected=!0,t.trigger("radioClicked",e.value||t.root.innerText)},this.on("update",function(){t.selected=e.value==t.parent.value})})},function(e,t,r){function n(e){return r(o(e))}function o(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./app/app/app.reducers.js":16,"./app/bigpack/bigpack.reducers.js":18,"./app/gift/gift.reducers.js":19,"./app/order/order.reducers.js":21,"./app/suborder/suborder.reducers.js":23,"./framework/ninjiajs/src/riot-router-redux/riot.router.reducers.js":98};n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id=39},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),f=n(l),d=r(2),h=(n(d),r(3)),y=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(){!this.opts.theme&&(this.opts.theme="white"),this.theme=this.opts.theme},p(t,[{key:"name",get:function(){return"icon-href"}},{key:"tmpl",get:function(){return'\n\t\t\t<div class="icon-href-container" >\n\t\t\t\t<a href="http://www.91songli.com/">\n\t\t\t\t\t<img riot-src="{\'https://img.91pintuan.com/songli/icon-herf/\' + theme + \'_icon_xx.png\' }">\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t'}}]),t}(f.default.Tag),u.originName="icon-href",s=c))||s;t.default=y},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={setClientWidth:function(){return{type:"body/clientWidth",payload:document.body.clientWidth}}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),f=n(l),d=r(2),h=(n(d),r(3)),y=(0,h.View)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},p(t,[{key:"name",get:function(){return"bigpack"}},{key:"tmpl",get:function(){return"<router-outlet></router-outlet>"}}]),t}(f.default.Tag),u.originName="bigpack",s=c))||s;t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(3)),b=r(17),w=n(b),_=(u=(0,g.Connect)(function(e){return{merchant:e.merchant,order:e.bigpack,clientWidth:e.clientWidth,isUnavailable:e.bigpack&&e.bigpack.sender&&e.bigpack.sender.id}},function(e){return{enterBigpackDetail:function(t,r){return e(w.default.enterBigpackDetail(t,r))}}}),c=(0,g.onUse)("enterBigpackDetail"),(0,g.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"bigpack-detail"}},{key:"tmpl",get:function(){return r(109)}}]),t}(v.default.Tag),f.originName="bigpack-detail",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,p,l,f,d,h,y,v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),m=r(1),g=n(m),b=r(2),w=n(b),_=r(3),O=r(5),x=n(O),k=r(17),j=n(k),S=(c=(0,_.Form)({name:{maxlength:20,required:!0}}),p=(0,_.Connect)(function(e){return{merchant:e.merchant,order:e.bigpack,user:e.user,recordState:e.record}},function(e){return{enterBigpackRecord:function(t,r){return e(j.default.enterBigpackRecord(t,r))}}}),l=(0,_.onUse)("enterBigpackRecord"),(0,_.View)(f=c(f=p((y=h=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.onSubmit=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,i,a,s,u,c,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),r=app.store,n=r.dispatch,o=r.getState,i=o(),a=i.bigpack,s=i.user,this.opts.submit("bigpackRecordForm"),!this.opts.forms.bigpackRecordForm.$invalid){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,x.default.uploadVoice({localId:a.localId,isShowProgressTips:1});case 9:return u=e.sent,a.serverId=u.serverId,1===a.capacity&&(a.name=this.refs.name.value),e.next=14,$.post("/gift/order/"+a.id+"/complete",a);case 14:a.sender=s,n({type:"order/update",payload:a}),c=o(),p=c.order,(0,w.default)("/order/"+a.id+"/ready"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),widgets.Alert.add("danger",e.t0.message,2e3);case 23:case"end":return e.stop()}},e,this,[[0,20]])}));return e}(),v(t,[{key:"name",get:function(){return"bigpack-record"}},{key:"tmpl",get:function(){return r(110)}}]),t}(g.default.Tag),h.originName="bigpack-record",d=y,u(d.prototype,"onCreate",[l],Object.getOwnPropertyDescriptor(d.prototype,"onCreate"),d.prototype),f=d))||f)||f)||f);t.default=S},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(3)),v=(s=(0,y.Connect)(function(e){return{merchant:e.merchant,order:e.bigpack,clientWidth:e.clientWidth}}),(0,y.View)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"bigpack-subscribe"}},{key:"tmpl",get:function(){return r(111)}}]),t}(d.default.Tag),c.originName="bigpack-subscribe",u=p))||u)||u);t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=r(24),s=n(a),u=r(170),c=n(u),p=r(5),l=n(p),f=function(){var e=o(regeneratorRuntime.mark(function e(t,r){var n,o,a,u,p,f,d,h,y,v,m,g,b,w,_,O=r.origin;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.env,o=t.store,a=c.default[n],u=o.dispatch,Object.assign($,$.ajax.base(a.apiUri[O]+"/api")),window.config=a,$.setErrorInterceptor(function(e,t){var r=e.response;return r?void(r&&401===r.status):(console.error("[action Failed]"),void console.error(e))}),$.addResponseInterceptor(function(e){return e}),p={"X-API-From":a.from},Object.assign($,$.withProps({headers:p})),f=function(e){return $.util.querystring.parse(window.location.search.replace("?",""))[e]},d=f("code"),!d){e.next=24;break}return e.next=15,fetch(a.apiUri[O]+"/api/wechat/token?code="+d,{method:"get",headers:{"X-API-From":a.from,"X-Component":a.component}});case 15:return h=e.sent,e.next=18,h.json();case 18:return y=e.sent,v=y.token,v&&s.default.set("token",v),m=s.default.get("referer"),location.href=""+location.origin+m,e.abrupt("return");case 24:if(g=s.default.get("token"),!g){e.next=32;break}return p.Authorization=g,Object.assign($,$.withProps({headers:p})),e.next=30,$.get("/wechat/userinfo");case 30:b=e.sent,u({type:"user",payload:b});case 32:return e.next=34,$.get("/merchant");case 34:w=e.sent,t.store.dispatch({type:"merchant",payload:w}),_=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseWXPay","editAddress","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","getLocation","onVoicePlayEnd","uploadVoice","downloadVoice","openLocation"],l.default.config(_),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(0),alert(e.t0.message);case 43:case"end":return e.stop()}},e,i,[[0,40]])}));return function(t,r){return e.apply(this,arguments)}}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),f=n(l),d=r(2),h=(n(d),r(3)),y=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){this.on("mount",this.componentDidMounted.bind(this)),this.on("unmount",this.componentUnmounted.bind(this))},t.prototype.componentDidMounted=function(){var e=this;this.gap=this.opts.gap||60,this.height=this.opts.height,this.speed=parseInt(this.opts.speed)||3e3,this.index=0,this.count=0,this.capacity=Math.ceil(parseInt(this.height/this.gap,10)),this.nextItem(),setTimeout(function(){e.initPoi()},100),this.itemsInterval=setInterval(function(){e.nextItem(),e.resetPoi()},this.speed)},t.prototype.nextItem=function(){var e=this.opts.items.length,t=this.index+this.capacity-e,r=this.opts.items.slice(this.index,this.index+this.capacity);r.length<this.capacity&&(r=r.concat(this.opts.items.slice(0,t))),this.items=r,t>=this.capacity&&(this.index=0),this.index++,this.update()},t.prototype.initPoi=function(){var e=document.querySelector(".marquee_body");e.style.transition="margin "+this.speed/1e3+"s",e.style.transitionTimingFunction="linear",e.style.marginTop="-"+this.gap+"px"},t.prototype.resetPoi=function(){var e=this,t=document.querySelector(".marquee_body");t.style.transition="none",t.style.marginTop="0px",setTimeout(function(){e.initPoi()},20)},t.prototype.componentUnmounted=function(){clearInterval(this.itemsInterval)},p(t,[{key:"name",get:function(){return"imarquee"}},{key:"css",get:function(){return"\n\t\t\t.marquee_container {\n\t\t\t\tposition: relative;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\t\t\t.marquee_body {\n\t\t\t\ttransition: margin 3s;\n\t\t\t\ttransition-timing-function: linear;\n\t\t\t\tmargin: 0px;\n\t\t\t}\n\t\t"}},{key:"tmpl",get:function(){return'\n\t\t\t<div class="marquee_container" style="height: { gap * (capacity - 1) }px">\n\t\t\t\t<div ref="marquee_body" class="marquee_body">\n\t\t\t\t\t<yield/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'}}]),t}(f.default.Tag),u.originName="imarquee",s=c))||s;t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),f=n(l),d=r(2),h=(n(d),r(3)),y=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){this.$isMounted=!1,this.hasNoChildren=!0,this.skipSync=!1,this.on("update",this.componentOnUpdate.bind(this)),this.on("unmount",this.componentUnMounted.bind(this)),this.on("mount",this.componentDidMount.bind(this))},t.prototype.componentOnUpdate=function(){this.hasNoChildren=this.routes.filter(function(e){return e.tag&&e.tag.isMounted}).length<=0,this.skipSync||(this.skipSync=!0,this.update()),this.skipSync=!1},t.prototype.componentUnMounted=function(){this.$isMounted=!1,this.routes.forEach(function(e){e.tag&&e.tag.unmount()})},t.prototype.componentDidMount=function(){var e=this;this.$isMounted=!1,this.routes=[],app.hub.state.hint?!function(){var t=app.hub.refinedRoutes.filter(function(e){return e.path===app.hub.state.hint})[0];e.routes=app.hub.refinedRoutes.filter(function(e){return e.id===t.id})[0].children}():this.routes=app.hub.routes.children,this.update(),this.trigger("$mounted"),this.$isMounted=!0},t.prototype.distinct=function(e){var t=[];if(e)for(var r=0,n=e.length;r<n;r++){var o=e[r];o.components?Object.keys(o.components).forEach(function(e){var r=o.components[e];t.filter(function(e){return e.component.displayName===r.displayName}).length<=0&&(o.component=r,t.push(o))}):t.filter(function(e){return e.component.displayName===o.component.displayName}).length<=0&&t.push(o)}return t},p(t,[{key:"name",get:function(){return"router-outlet"}},{key:"tmpl",get:function(){return'\n\t\t\t<div if="{hasNoChildren}" data-yield>\n\t\t\t\t<yield/>\n\t\t\t</div>\n\t\t\t<div data-tag-name="{ route.component.displayName }" each="{ route in distinct(routes) }"></div>\n\t\t'}}]),t}(f.default.Tag),u.originName="router-outlet",s=c))||s;t.default=y},function(e,t,r){"use strict";function n(e,t){for(var r in t)e[r]=t[r]}Object.defineProperty(t,"__esModule",{value:!0});var o={};o["wx.dev.91pintuan.com"]="https://apidev.91pintuan.com",o["99.dev.91pintuan.com"]="https://api99dev.91pintuan.com";var i={};i["wx.91pintuan.com"]="https://api.91pintuan.com",i["91pintuan.com"]="https://api.91pintuan.com",i["99.91pintuan.com"]="https://api99.91pintuan.com";var a={phtStlList:"@1e_1c_0o_0l_300h_430w_100q.src",phtStlList2:"@1e_1c_0o_0l_100sh_240h_360w_90q.src",phtStlList3:"@1e_1c_0o_0l_100sh_125h_180w_90q.src",phtStlList4:"@1e_1c_0o_0l_100sh_85h_120w_90q.src",phtStlComm:"@1e_1c_0o_0l_600h_860w_100q.src",phtStlSmll:"@1e_1c_0o_1l_399sh_84h_120w_100q.src",phtStl120:"@1e_1c_0o_0l_100sh_120h_120w_90q.src",phtStl500:"@0o_1l_500w_90q.src",images:{SHARE_DEF_COVER:"https://img.91pintuan.com/songli/icon-herf/default-img.png",GIFTSHRAE_DEF_COVER:"https://img.91pintuan.com/songli/icon-herf/present_sent_demo.png",GIFT_DEF_COVER:"https://img.91pintuan.com/songli/rose_demo.png"},messages:{GIFT_SAVED:"该礼物已被领取",NO_GIFT_LEFT:"手慢了，没有礼物了",INFO_INCOMPLETE:"信息不全",SHARE_INFO:"送给你一份礼物，快快收礼吧～",SHARE_TITLE:"会说话的礼物",SHARE_DESC:"的礼物货架",GIFT_REDUCE:"礼物份数至少是2份",GIFT_RECEIVED:"礼物已被他人领取"},errors:{NORIGHT_OPEN_PAGE:{code:404,message:"无权打开此页面"},SERVER_ERROR:{code:500,message:"系统内部错误"},NO_RES_CODE:{code:501,message:"没有response code !"},PAY_CANCEL:{code:503,message:"您取消了支付"},PAY_FAIL:{code:504,message:"支付失败"},NETWORK_ERR:{code:502,message:"网络错误"},LOCATION_NOAUTH:{code:801,message:"您拒绝授权获取地理位置"}}},s={development:{uri:"https://apidev.91pintuan.com",imgUri:"https://img.91pintuan.com",phtUri:"https://photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5726bf8700bbe21526c4ccbe",apiUri:o,debug:!0,from:"client"},production:{uri:"https://api.91pintuan.com",imgUri:"https://img.91pintuan.com",phtUri:"https://photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5581117b5f225e4c401c9259",apiUri:i,debug:!1,from:"client"}};n(s.development,a),n(s.production,a),t.default=s.production},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),f=n(l),d=r(2),h=(n(d),r(6)),y=(n(h),r(3)),v=(0,y.View)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},p(t,[{key:"name",get:function(){return"gift"}},{key:"tmpl",get:function(){return"<router-outlet></router-outlet>"}}]),t}(f.default.Tag),u.originName="gift",s=c))||s;t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(6)),b=n(g),w=r(3),_=(u=(0,w.Connect)(function(e){return{gift:e.gift,clientWidth:e.clientWidth}},function(e){return{enterGiftDetail:function(t,r){return e(b.default.enterGiftDetail(t,r))}}}),c=(0,w.onUse)("enterGiftDetail"),(0,w.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"gift-detail"}},{key:"tmpl",get:function(){return r(112)}}]),t}(v.default.Tag),
f.originName="gift-detail",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,p,l,f,d,h,y=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),v=r(1),m=n(v),g=r(2),b=n(g),w=r(6),_=n(w),O=r(3),x=(c=(0,O.Connect)(function(e){return{gifts:e.gifts,clientWidth:e.clientWidth}},function(e){return{nextPage:function(){return e(_.default.nextPage())},enterGiftList:function(t,r){return e(_.default.enterGiftList(t,r))}}}),p=(0,O.onUse)("enterGiftList"),(0,O.View)(l=c((h=d=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.onLink=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,b.default)("/gift/"+t.item.gift.id);case 1:case"end":return e.stop()}},e,this)}));return e}(),y(t,[{key:"name",get:function(){return"gift-list"}},{key:"tmpl",get:function(){return r(113)}}]),t}(m.default.Tag),d.originName="gift-list",f=h,u(f.prototype,"onCreate",[p],Object.getOwnPropertyDescriptor(f.prototype,"onCreate"),f.prototype),l=f))||l)||l);t.default=x},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(3)),v=r(6),m=n(v),g=(s=(0,y.Connect)(function(e){return{order:e.order,pois:e.pois,clientWidth:e.clientWidth,poiLoaded:e.poi.loaded}},function(e){return{getPois:function(){return e(m.default.getPois())},selectPoi:function(t){return e(m.default.selectPoi(t))}}}),(0,y.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){this.on("mount",this.onMount.bind(this)),this.on("mount",function(){app.store.dispatch({type:"poi/loaded",payload:!0})})},t.prototype.selPoi=function(e){var t=this;return function(r){t.opts.selectPoi(e),t.trigger("dismiss",e)}},t.prototype.onMount=function(){this.opts.getPois()},t.prototype.dismiss=function(){this.trigger("dismiss")},l(t,[{key:"name",get:function(){return"gift-poi-modal"}},{key:"tmpl",get:function(){return r(114)}}]),t}(d.default.Tag),c.originName="gift-poi-modal",u=p))||u)||u);t.default=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(6)),b=n(g),w=r(3),_=(u=(0,w.Connect)(function(e){return{gift:e.gift,clientWidth:e.clientWidth,suborders:e.suborders,receivedCount:e.suborders.length}},function(e){return{enterGiftShare:function(t,r){return e(b.default.enterGiftShare(t,r))}}}),c=(0,w.onUse)("enterGiftShare"),(0,w.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},t.prototype.getSuborderInfo=function(e,t){return e&&e.info&&e.info.benedictory&&e.info.benedictory.content?e.info.benedictory.content.replace("{RECEIVER}",t.name.slice(0,1)+"** "||t.consignee.slice(0,1)+"** "):(t.name&&t.name.slice(0,1)||t.consignee&&t.consignee.slice(0,1))+"** 收到了礼物"},h(t,[{key:"name",get:function(){return"gift-share"}},{key:"tmpl",get:function(){return r(115)}}]),t}(v.default.Tag),f.originName="gift-share",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),f=n(l),d=r(2),h=(n(d),r(3)),y=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){this.shareSrc="https://img.91pintuan.com/songli/gift_shared.png"},t.prototype.dismiss=function(){this.trigger("dismiss")},p(t,[{key:"name",get:function(){return"gift-share-modal"}},{key:"css",get:function(){return"\n      .share{\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n      }\n      .share img{\n        width: 80%;\n        float: right;\n        margin-right: 2%;\n      }\n    "}},{key:"tmpl",get:function(){return'\n      <div class="share" id="share" onclick="{ dismiss }">\n        <img riot-src="{ shareSrc }" />\n      </div>\n\t\t'}}]),t}(f.default.Tag),u.originName="gift-share-modal",s=c))||s;t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}var i=this,a=r(1),s=n(a),u=r(168),c=n(u),p=r(104);r(85),r(87);var l=r(24),f=n(l),d=r(46),h=n(d),y=r(49),v=n(y),m=r(3),g=r(83),b=n(g),w=r(57),_=n(w),O=r(84),x=n(O),k=r(15),j=n(k);window.libs={riot:s.default,wx:c.default},window.riot=s.default,window.wx=c.default;var S=(0,m.Ninjia)({container:window,reducer:b.default,middlewares:_.default,state:{}});S.config=v.default,S.set("env","production"),S.set("mode","browser"),S.set("context",{store:S.store,hub:m.router.hub,tags:{},util:{promisify:p.promisify,promisifyAll:p.promisifyAll}}),m.router.hub.routes=x.default,S.router(m.router),s.default.util.tmpl.errorHandler=function(e){},S.start(o(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.app=S,t=location.host.replace(location.host.split(".")[0],"").slice(1),e.next=4,(0,h.default)(S,{origin:t});case 4:S.hub.subscribe("history-pending",function(){var e=o(regeneratorRuntime.mark(function e(t,r,n,o,a){var s,u,c,p=o.req;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.body.authenticate){e.next=11;break}if(f.default.get("token")){e.next=11;break}return s=p.query,u=location.pathname+location.search,u=u.startsWith("/")?u:"/"+u,f.default.set("referer",u),e.next=8,$.get("/wechat/client?referer="+u);case 8:return c=e.sent,location.href=c.link,e.abrupt("return");case 11:a&&a();case 12:case"end":return e.stop()}},e,i)}));return function(t,r,n,o,i){return e.apply(this,arguments)}}()),S.hub.on("history-resolve",function(e,t,r,n,o){}),r(159),r(158),r(154),r(163),r(157),r(155),r(162),r(156),r(160),r(161),r(38),r(48),r(47),r(40),r(55),r(53),r(58),r(73),r(74),r(62),r(61),r(67),r(66),r(20),r(69),r(68),r(71),r(64),S.registerWidget({name:"alert",methods:["add"]}),S.registerWidget({name:"modal",methods:["open"]}),window.widgets.Alert=S.context.tags.alert,window.widgets.Modal=S.context.tags.modal,n=new j.default(document.getElementById("app"),{store:S.store}),S.hub.root=n,S.set("entry",n),(0,m.provider)(S.store)(S.entry);case 42:case"end":return e.stop()}},e,i)})))},function(e,t,r){"use strict";function n(e){return e&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=r(108),s=function(e){return function(t){return function(r){var n=null,o=null;"object"===("undefined"==typeof r?"undefined":i(r))&&(n=r.type,o=r),"function"==typeof r&&(n=(r.name||r.toString().match(/function\s*([^(]*)\(/)[1])+"[Async-Thunk]",o="thunk is pending"),r.then&&"function"==typeof r.then&&(n="[Async-Promise]",o=r),console.group(n),console.info("dispatching",o);var a=t(r);return console.log("next state",e.getState()),console.groupEnd(n),a}}},u=function(e){return function(e){return function(t){return"changeTitle"===t.type&&(document.title=t.payload),e(t)}}},c=function(e){return function(e){return function(t){if(!t.meta||!t.meta.delay)return e(t);var r=setTimeout(function(){return e(t)},t.meta.delay);return function(){clearTimeout(r)}}}},p=function(e){var t=e.dispatch;return function(e){return function(r){return(0,a.isFSA)(r)?n(r.payload)?r.payload.then(function(e){return t(o({},r,{payload:e}))},function(e){return t(o({},r,{payload:e,error:!0})),Promise.reject(e)}):e(r):n(r)?r.then(t):e(r)}}},l=function(e){return function(e){return function(t){function r(e,r){var n=Object.assign({},t,{ready:e},r);return delete n.promise,n}return t.promise?(e(r(!1)),t.promise.then(function(t){return e(r(!0,{result:t}))},function(t){return e(r(!0,{error:t}))})):e(t)}}},f=function(e){return function(t){return function(r){return"function"==typeof r?r(e.dispatch,e.getState):t(r)}}},d={logger:s,timeoutScheduler:c,vanillaPromise:p,readyStatePromise:l,thunk:f,changeTitle:u};d={timeoutScheduler:c,vanillaPromise:p,readyStatePromise:l,thunk:f,changeTitle:u},t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(3)),v=(s=(0,y.Connect)(function(e){return{merchant:e.merchant,clientWidth:e.clientWidth}}),(0,y.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},t.prototype.dismiss=function(){this.trigger("dismiss")},l(t,[{key:"name",get:function(){return"merchant-info"}},{key:"tmpl",get:function(){return'\n      <div class="merchant-info" onclick="{ dismiss }">\n        <div class="merchant-pubno">\n          <div class="pubno">\n            <span><img width="50px"  riot-src="{ opts.merchant.pubno.head_img }"></span>\n            <span>{ opts.merchant.pubno.nick_name }</span>\n          </div>\n          <div class="pubno">\n            <span>联系人</span>\n            <span>{ opts.merchant.info.linkman }</span>\n          </div>\n          <div class="pubno">\n            <span>联系商家</span>\n            <span>{ opts.merchant.info.phone ? opts.merchant.info.phone : opts.merchant.info.telephone }</span>\n          </div>\n          <div class="pubno">\n            <span>官方微信</span>\n            <span>{ opts.merchant.pubno.nick_name }</span>\n          </div>\n        </div>\n      </div>\n    '}}]),t}(d.default.Tag),c.originName="merchant-info",u=p))||u)||u);t.default=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),f=n(l),d=r(2),h=(n(d),r(3)),y=(0,h.View)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},p(t,[{key:"name",get:function(){return"order"}},{key:"tmpl",get:function(){return"<router-outlet></router-outlet>"}}]),t}(f.default.Tag),u.originName="order",s=c))||s;t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(3)),b=r(4),w=n(b),_=(u=(0,g.Connect)(null,function(e){return{enterOrderDetail:function(t,r){return e(w.default.enterOrderDetail(t,r))}}}),c=(0,g.onUse)("enterOrderDetail"),(0,g.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-detail"}},{key:"tmpl",get:function(){return"\n\t\t\t<router-outlet></router-outlet>\n\t\t"}}]),t}(v.default.Tag),f.originName="order-detail",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(3)),v=function(e){return e.capacity-(e.receivers&&e.receivers.length||0)},m=function(e){return e.receivers&&e.receivers.sort(function(e,t){return e.id-t.id})||[]},g=(s=(0,y.Connect)(function(e){return{order:e.order,remainCount:v(e.order),suborders:m(e.order)}}),(0,y.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"order-interact"}},{key:"tmpl",get:function(){return'\n\t\t\t<div if="{ (opts.order.capacity > 1) && opts.order.receivers && opts.order.receivers.length }" class="interact">\n\t\t\t\t<p>{ opts.order.receivers.length }人已领取 ，<span if="{ opts.remainCount === 0 }">礼物已经领完</span><span if="{ opts.remainCount !== 0 }">还有{ opts.remainCount }份</span></p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li each="{ suborder in opts.suborders }">\n\t\t\t\t\t\t\t<img riot-src="{ suborder.headimgurl }"/>\n\t\t\t\t\t\t\t<span>{ suborder.name || suborder.consignee }</span>\n\t\t\t\t\t\t\t<span> 已领取</span>\n\t\t\t\t\t\t\t<span>{ $.util.filter.date(suborder.fillinDate, \'MM-dd hh:mm:ss\') }</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t'}}]),t}(d.default.Tag),c.originName="order-interact",u=p))||u)||u);t.default=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(3)),b=r(4),w=n(b),_=(u=(0,g.Connect)(function(e){return{orders:e.orders,clientWidth:e.clientWidth}},function(e){return{enterOrderList:function(t,r){return e(w.default.enterOrderList(t,r))},nextPageCreator:function(t){return function(){return e(w.default.nextPage(t))}}}}),c=(0,g.onUse)("enterOrderList"),(0,g.Component)(p=(0,g.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-list"}},{key:"tmpl",get:function(){return r(116)}}]),t}(v.default.Tag),f.originName="order-list",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p)||p);t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(3)),b=r(4),w=n(b),_=(u=(0,g.Connect)(function(e){return{order:e.order,gift:e.gift}},function(e){return{enterOrderPay:function(t,r){return e(w.default.enterOrderPay(t,r))},wxPay:function(t){return e(w.default.wxPay.apply(this))}}}),c=(0,g.onUse)("enterOrderPay"),(0,g.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){this.on("mount",function(){setTimeout(function(){},3e3)})},h(t,[{key:"name",get:function(){return"order-pay"}},{key:"tmpl",get:function(){return r(117)}}]),t}(v.default.Tag),f.originName="order-pay",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(4)),v=(n(y),r(3)),m=function(e){return!e.receivers||!e.receivers.length||e.capacity-g(e)>0},g=function(e){return e.receivers&&e.receivers.length?e.receivers.filter(function(e){return e.telephone}).length:0},b=(s=(0,v.Connect)(function(e){return{order:e.order,type:e.order.capacity>1?"one2many":"one2one",availableCount:e.order.capacity-g(e.order),receivedCount:g(e.order),isInteract:!0,isAvailable:m(e.order)}}),(0,v.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"order-pre-receive"}},{key:"tmpl",get:function(){return r(118)}}]),t}(d.default.Tag),c.originName="order-pre-receive",u=p))||u)||u);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(4)),b=n(g),w=r(3),_=r(8),O=n(_),x=(u=(0,w.Connect)(function(e){return{order:e.order}},function(e){return{enterOrderReady:function(t,r){return e(b.default.enterOrderReady(t,r))}}}),c=(0,w.onUse)([O.default.isSender,"enterOrderReady"]),(0,w.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-ready"}},{key:"tmpl",get:function(){return'\n\t\t\t<order-ready-one2one if="{ opts.order.capacity === 1 }"></order-ready-one2one>\n\t\t\t<order-ready-one2many if="{ opts.order.capacity > 1 }"></order-ready-one2many>\n\t\t'}}]),t}(v.default.Tag),f.originName="order-ready",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=x},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(3)),v=r(4),m=n(v),g=(s=(0,y.Connect)(function(e){return{order:e.order}},function(e){return{share:m.default.shareOrder}}),(0,y.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"order-ready-one2many"}},{key:"tmpl",get:function(){return'\n      <div class="ready_multi">\n        <div class="multi_wrap">\n          <div class="multi_cont">\n            <img class="right_top_corner" src="https://img.91pintuan.com/songli/i.png" />\n            <div class="head_portrait">\n              <img riot-src="{ opts.order.sender.info.headimgurl }"/>\n            </div>\n            <div class="head_nickname">\n              <span>{ opts.order.sender.info.nickname }的礼物</span>\n            </div>\n            <div class="receive_status">\n              <div if="{ !opts.order.receivers || !opts.order.receivers.length }">\n                <span class="gift_num">{ opts.order.capacity }份礼物已备好</span>\n                <span class="receive_num">开始送礼吧</span>\n              </div>\n              <div if="{ opts.order.receivers && opts.order.receivers.length && opts.order.receivers.length != opts.order.capacity }">\n                <span class="gift_num">还有{ opts.order.capacity - opts.order.receivers.length }份</span><br/>\n                <span class="receive_num">{ opts.order.receivers.length }人已领取</span>\n              </div>\n              <div if="{ opts.order.receivers && opts.order.receivers.length && opts.order.receivers.length === opts.order.capacity }">\n                <span class="gift_num">礼物已被抢完</span><br />\n                <span class="receive_num">{ opts.order.receivers.length }人已领取</span>\n              </div>\n            </div>\n            <div class="gift_inform">\n              <span>您已成功购买{ opts.order.capacity }份{ opts.order.gift.info.name },发至到微信好友/微信群或朋友圈,开始送礼吧！</span>\n            </div>\n            <div class="btn_receive">\n              <!--礼物领取中-->\n              <a href="javascript:void(0)" \n                if="{ !opts.order.receivers || !opts.order.receivers.length || (opts.order.receivers.length && opts.order.receivers.length !== opts.order.capacity) }"\n                onclick="{ opts.share }" \n                class="{ btn_null : opts.order.receivers.length === opts.order.capacity }"\n                class="btn-fill">\n                  { opts.order.receivers && opts.order.receivers.length ? \'继续送礼\' : \'开始送礼\' }\n              </a>\n              <!--礼物被抢完时-->\n              <a href="/gift/list" class="btn_continue"\n                if="{ opts.order.receivers && opts.order.receivers.length && opts.order.receivers.length === opts.order.capacity }">继续送礼\n              </a>\n            </div>\n          </div>\n          <!--receive gifts interact information-->\n          <order-interact></order-interact>\n        </div>\n        <!--Bottom mark-->\n        <icon-href theme="{ white }"></icon-href\'>\n      </div>\n\t\t';
}}]),t}(d.default.Tag),c.originName="order-ready-one2many",u=p))||u)||u);t.default=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r(1),h=n(d),y=r(2),v=(n(y),r(4)),m=n(v),g=r(3),b=function(e){return e.receivers&&e.receivers[0]&&e.receivers[0].telephone||!1},w=(u=(0,g.Connect)(function(e){return{order:e.order,isReceived:b(e.order)}},function(e){return{enterOrderReadyOne2One:e(m.default.enterOrderReadyOne2One),share:m.default.shareOrder}}),(0,g.Component)(c=u((l=p=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,app.store.dispatch(m.default.enterOrderReadyOne2One());case 2:case"end":return e.stop()}},e,this)}));return e}(),f(t,[{key:"name",get:function(){return"order-ready-one2one"}},{key:"tmpl",get:function(){return'\n\t\t\t<div if="{ opts.isReceived }" class="ready_single">\n        <div class="single_wrap">\n          <div class="single_cont">\n            <img class="right_top_corner" src="https://img.91pintuan.com/songli/i.png">\n            <div class="head_portrait">\n              <img riot-src="{ opts.order.sender.info.headimgurl }" />\n            </div>\n            <div class="head_nickname">\n              <span>{ opts.order.sender.info.nickname }的礼物</span>\n            </div>\n            <div class="receive_status">\n              <span class="gift_num">{ opts.order.receivers[0].consignee }</span>\n              <span class="receive_num">已经领取了你的礼物</span>\n            </div>\n            <div class="gift_inform">\n                <span>您已经成功购买1份{ opts.order.gift.info.name }；自己领取或转发送给好友。</span>\n              </div>\n            <div class="btn_continue"> \n              <a href="/">继续送礼</a>\n            </div>\n          </div>\n        </div>\n        <icon-href theme="{ white }"></icon-href\'>\n      </div>\n\n      <div if="{ !opts.isReceived }">\n        <div  if="{ opts.order.gift.scene === \'poi\' }"  class="ready_single">\n          <div class="single_wrap">\n            <div class="single_cont">\n              <img class="right_top_corner" src="https://img.91pintuan.com/songli/i.png">\n              <div class="head_portrait">\n                <img riot-src="{ opts.order.sender.info.headimgurl }" />\n              </div>\n              <div class="head_nickname">\n                <span>{ opts.order.sender.info.nickname }的礼物</span><br />\n              </div>\n              <div class="receive_status">\n                <span class="gift_num">已购买成功</span>\n                <span class="receive_num">开始送礼吧</span>\n              </div>\n              <div class="gift_inform">\n                <span>您已经成功购买1份{ opts.order.gift.info.name }；自己领取或转发送给朋友。</span>\n              </div>\n              <div class="btn_receive">\n                <a href="javascript:void(0)" onclick="{ opts.share }">送给朋友</a>\n              </div>\n            </div>\n          </div>\n          <icon-href theme="{ white }"></icon-href\'>\n        </div>\n        <div if="{opts.order.gift.scene === \'logistics\'}">\n          <order-receive force="true"></order-receive>\n        </div>\n      </div>\n\t\t'}}]),t}(h.default.Tag),p.originName="order-ready-one2one",c=l))||c)||c);t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=r(1),y=n(h),v=r(2),m=(n(v),r(4)),g=n(m),b=r(3),w=(u=(0,b.Form)({consignee:{required:!0,minlength:2,maxlength:20},telephone:{required:!0,minlength:6,maxlength:11},address:{required:!0,maxlength:500}}),c=(0,b.Connect)(function(e){return{order:e.order,isShare:e.orderReceiveCollection}},function(e){return{share:g.default.shareOrder,orderReceiveSubmit:function(t){return e(g.default.orderReceiveSubmit(t))}}}),(0,b.Component)(p=u(p=c((f=l=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.onSubmit=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=app.store,n=r.dispatch,o=r.getState,i=this,this.opts.submit("orderReceiveLogisticsForm"),!this.opts.forms.orderReceiveLogisticsForm.$invalid){e.next=6;break}return e.abrupt("return");case 6:return a={consignee:this.refs.consignee.value,telephone:this.refs.telephone.value,address:this.refs.address.value},e.next=9,this.opts.orderReceiveSubmit(a);case 9:case"end":return e.stop()}},e,this)}));return e}(),d(t,[{key:"name",get:function(){return"order-receive-logistics"}},{key:"tmpl",get:function(){return r(119)}}]),t}(y.default.Tag),l.originName="order-receive-logistics",p=f))||p)||p)||p);t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=r(1),y=n(h),v=r(2),m=(n(v),r(4)),g=n(m),b=r(3),w=(u=(0,b.Form)({consignee:{required:!0,minlength:1,maxlength:20},telephone:{required:!0,minlength:6,maxlength:11},poi:{required:!0}}),c=(0,b.Connect)(function(e){return{order:e.order,clientWidth:e.clientWidth,poi:e.suborder.poi,poiLoaded:e.poi.loaded}},function(e){return{orderReceiveSubmit:function(t){return e(g.default.orderReceiveSubmit(t))}}}),(0,b.Component)(p=u(p=c((f=l=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){this.on("mount",function(){app.store.dispatch({type:"poi/loaded",payload:!0})})},t.prototype.selPoi=function(){var e=this,t=(this.pois,this.address,widgets.Modal.open({tag:"gift-poi-modal",props:{poi:this.opts.poi}}));t.one("dismiss",function(t){function r(e,t){var r=document.createEvent("Event");r.initEvent(e,!0,!0),setTimeout(function(){t.dispatchEvent(r)},0)}e.refs.poi.value=t,r("change",e.refs.poi)}),this.opts.poi&&this.opts.poi.id&&(this.refs.poi.value=this.opts.poi.id)},t.prototype.onSubmit=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,i,a,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=app.store,n=r.dispatch,o=r.getState,i=o(),a=i.suborder,s=i.order,u=i.user,this.opts.submit("orderReceivePoiForm"),!this.opts.forms.orderReceivePoiForm.$invalid){e.next=6;break}return e.abrupt("return");case 6:return c={consignee:this.refs.consignee.value,telephone:this.refs.telephone.value,poi:a.poi},e.next=9,this.opts.orderReceiveSubmit(c);case 9:case"end":return e.stop()}},e,this)}));return e}(),d(t,[{key:"name",get:function(){return"order-receive-poi"}},{key:"tmpl",get:function(){return r(120)}}]),t}(y.default.Tag),l.originName="order-receive-poi",p=f))||p)||p)||p);t.default=w},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r(1),h=n(d),y=r(2),v=n(y),m=r(3),g=r(5),b=n(g),w=r(4),_=(n(w),u=(0,m.Connect)(function(e){return{order:e.order,suborder:e.suborder,merchant:e.merchant,clientWidth:e.clientWidth}}),(0,m.View)(c=u((l=p=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){this.mixin("router"),this.$use(this.onUse)},t.prototype.openMerchant=function(){widgets.Modal.open({tag:"merchant-info",size:"lg"})},t.prototype.openLocation=function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.opts.suborder){e.next=2;break}return e.abrupt("return");case 2:return t=this.opts.suborder.poi.base_info,r=null,e.prev=4,e.next=7,b.default.getLocation({latitude:t.latitude,longitude:t.longitude,name:t.business_name+""+t.branch_name,address:t.province+t.city+t.district+t.address,scale:17,infoUrl:window.location.href});case 7:r=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),widgets.Alert.add("warning",app.config.errors.LOCATION_NOAUTH.message);case 13:case"end":return e.stop()}},e,this,[[4,10]])}));return e}(),t.prototype.onUse=function(e){var t=app.store,r=t.dispatch,n=t.getState,o=n(),i=o.order,a=o.user,s=i.receivers.filter(function(e){return e.userOpenId===a.openid})[0];return s?(r({type:"suborder/update",payload:s}),void e()):(0,v.default)("/")},f(t,[{key:"name",get:function(){return"order-received"}},{key:"tmpl",get:function(){return r(122)}}]),t}(h.default.Tag),p.originName="order-received",c=l))||c)||c);t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(4)),v=(n(y),r(3)),m=(s=(0,v.Connect)(function(e){return{order:e.order}}),(0,v.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"order-received-guide"}},{key:"tmpl",get:function(){return r(121)}}]),t}(d.default.Tag),c.originName="order-received-guide",u=p))||u)||u);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,p,l,f,d,h,y,v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),m=r(1),g=n(m),b=r(2),w=(n(b),r(3)),_=r(5),O=n(_),x=r(4),k=n(x),j=(c=(0,w.Form)({name:{required:!0,minlength:1,maxlength:20},capacity:{required:!0,min:2,max:9999}}),p=(0,w.Connect)(function(e){return{order:e.order,recordState:e.record,gift:e.gift}},function(e){return{enterOrderRecord:function(t,r,n){return e(k.default.enterOrderRecord(t,r,n))}}}),l=(0,w.onUse)("enterOrderRecord"),(0,w.View)(f=c(f=p((y=h=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.reduCapacity=function(){var e=app.store,t=e.dispatch,r=e.getState,n=r().order.capacity;n>2?t({type:"order/update",payload:{capacity:--n}}):2==n&&widgets.Alert.add("warning",app.config.messages.GIFT_REDUCE,2e3)},t.prototype.incrCapacity=function(){var e=app.store,t=e.dispatch,r=e.getState,n=r().order.capacity;t({type:"order/update",payload:{capacity:++n}})},t.prototype.onSubmit=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=app.store,n=r.dispatch,o=r.getState,i=this,t.preventDefault(),this.opts.submit("orderRecordForm"),!this.opts.forms.orderRecordForm.$invalid){e.next=6;break}return e.abrupt("return");case 6:return a=o().order,e.next=9,O.default.uploadVoice({localId:a.localId,isShowProgressTips:1});case 9:s=e.sent,a.serverId=s.serverId,"one2one"===a.type&&(a.name=i.refs.name.value),"one2many"===a.type&&(a.capacity=i.refs.capacity.value),n({type:"order/update",payload:a}),localStorage.setItem("order:recorded",JSON.stringify(a)),location.href="/wepay/?showwxpaytitle=1&component=OrderPay";case 16:case"end":return e.stop()}},e,this)}));return e}(),v(t,[{key:"name",get:function(){return"order-record"}},{key:"tmpl",get:function(){return r(123)}}]),t}(g.default.Tag),h.originName="order-record",d=y,u(d.prototype,"onCreate",[l],Object.getOwnPropertyDescriptor(d.prototype,"onCreate"),d.prototype),f=d))||f)||f)||f);t.default=j},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),f=n(l),d=r(2),h=(n(d),r(3)),y=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onInit=function(){this.progress=0,this.countdown=60,this.maxtime=60,this.proRecorded=0,this.timeRecorded=0,this.startTime=0,this.endTime=0,this.interval&&clearInterval(this.interval),this.timeout&&clearTimeout(this.timeout)},t.prototype.reset=function(){clearInterval(this.interval),clearTimeout(this.timeout),this.interval=null,this.timeout=null,this.progress=0,this.countdown=60},t.prototype.onCreate=function(e){var t=this;this.on("unmount",this.reset),this.on("update",function(){t.maxtime=parseInt(t.opts.maxtime,10)||60,t.during=parseInt(t.opts.interval,10)||1e3}),this.on("timer:init",this.onInit.bind(this)),this.on("timer:start",function(){t.reset(),t.startTime=new Date,t.interval=setInterval(function(){t.progress+=100*t.during/1e3/t.maxtime,t.countdown-=t.during/1e3,t.update()},t.during)}),this.on("timer:stop",function(){clearInterval(t.interval),t.endTime=new Date,t.proRecorded=t.progress,t.timeRecorded=t.endTime-t.startTime,t.startTime=0,t.endTime=0}),this.on("timer:play",function(){t.reset(),t.startTime=new Date,t.interval=setInterval(function(){t.progress+=100*t.during/1e3/t.countdown,t.countdown-=t.during/1e3,t.update()},t.during),t.timeout=setTimeout(function(){t.trigger("timer:stop")},t.timeRecorded)}),this.onInit()},p(t,[{key:"name",get:function(){return"order-record-timer"}},{key:"tmpl",get:function(){return'\n\t\t\t<div class="progress">\n\t\t\t\t<div class="progress-active" id="pro" aria-valuenow="{ countdown }" aria-valuemin="0" aria-valuemax="60" style="width: { progress ? progress : 0 }%;">\n\t\t\t\t</div>\n\t\t\t<div>\n\t\t\t<span class="progress-time" id="second">{ countdown === 60 ? \'&nbsp;\' : (60 - countdown) + \'S\' }</span>\n\t\t'}}]),t}(f.default.Tag),u.originName="order-record-timer",s=c))||s;t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=r(1),h=n(d),y=r(2),v=(n(y),r(3)),m=r(5),g=n(m),b=(u=(0,v.Connect)(function(e){return{recordState:e.record,order:e.order}}),(0,v.Component)(c=u((l=p=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){e.storeField||(e.storeField="order"),this.on("mount",this.onMount.bind(this))},t.prototype.onMount=function(){this.tags["order-record-timer"].trigger("timer:init")},t.prototype.record=function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=app.store.dispatch,e.next=3,g.default.startRecord();case 3:this.tags["order-record-timer"].trigger("timer:start"),t({type:"record/update",payload:{start:!0,stop:!1,record:!1}});case 5:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.stop=function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=app.store.dispatch,r=this,e.next=4,g.default.stopRecord();case 4:n=e.sent,r.tags["order-record-timer"].trigger("timer:stop"),t({type:this.opts.storeField+"/update",payload:{localId:n.localId}}),t({type:"record/update",payload:{start:!1,record:!0}});case 8:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.rerecord=function(){var e=app.store.dispatch;this.tags["order-record-timer"].trigger("timer:init"),e({type:"record/reset"})},t.prototype.playVoice=function(){var e=app.store.getState().order;this.tags["order-record-timer"].trigger("timer:play"),g.default.playVoice({localId:e.localId})},f(t,[{key:"name",get:function(){return"order-record-voice"}},{key:"tmpl",get:function(){return r(124)}}]),t}(h.default.Tag),p.originName="order-record-voice",c=l))||c)||c);t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(3)),b=r(4),w=n(b),_=r(8),O=n(_),x=function(e,t){return!!(e.receivers&&e.receivers.length&&e.receivers.filter(function(e){return e.userOpenId===t.openid})[0])},k=(u=(0,g.Connect)(function(e){return{isReceived:x(e.order,e.user)}},function(e){return{enterOrderState:function(t,r){return e(w.default.enterOrderState(t,r))}}}),c=(0,g.onUse)([O.default.isNotSender,"enterOrderState"]),(0,g.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-state"}},{key:"tmpl",get:function(){return'\n\t\t\t<order-received-guide if="{ opts.isReceived }"></order-received-guide>\n\t\t\t<order-pre-receive if="{ !opts.isReceived }"></order-pre-receive>\n\t\t'}}]),t}(v.default.Tag),f.originName="order-state",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=k},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(3)),b=r(4),w=n(b),_=(u=(0,g.Connect)(function(e){return{clientWidth:e.clientWidth,order:e.order,qrcode:e.qrForSubscribe}},function(e){return{enterOrderSubscribe:function(t,r){return e(w.default.enterOrderSubscribe(t,r))}}}),c=(0,g.onUse)("enterOrderSubscribe"),(0,g.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-subscribe"}},{key:"tmpl",get:function(){return r(125)}}]),t}(v.default.Tag),f.originName="order-subscribe",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=n(m),b=r(3),w=r(88),_=n(w),O=r(22),x=n(O),k=r(8),j=n(k),S=function(e){return e&&e.length||0},P=function(e){return e&&e.filter(function(e){return e.status.shipping}).length||0},E=function(e){return e&&e.filter(function(e){return e.status.read}).length||0},R=function(e){if(!e)return"";var t=e.reduce(function(e,t){return t.status&&t.status.shipping_date?e&&e.status&&e.status.shipping_date?(0,_.default)(t.status.shipping_date).isAfter(e.status.shipping_date)?t:e:t:e},void 0);return t&&t.status.shipping_date||""},T=function(e){if(!e)return"";var t=e.reduce(function(e,t){return t.fillinDate?e&&e.fillinDate?(0,_.default)(t.fillinDate).isAfter(e.fillinDate)?t:e:t:e},void 0);return t&&t.fillinDate||""},C=function(e){if(!e)return"";var t=e.reduce(function(e,t){return t.status&&t.status.read_date?e&&e.status&&e.status.read_date?(0,_.default)(t.status.read_date).isAfter(e.status.read_date)?t:e:t:e},void 0);return t&&t.status.read_date||""},M=(u=(0,b.Connect)(function(e){return{order:e.order,suborder:e.order.receivers&&e.order.receivers[0],receivedNum:S(e.order.receivers),shippedNum:P(e.order.receivers),listenedNum:E(e.order.receivers),receivedTime:T(e.order.receivers),shippedTime:R(e.order.receivers),readTime:C(e.order.receivers),clientWidth:e.clientWidth}},function(e){return{enterPersonalOrderInfo:function(t,r){return e(x.default.enterPersonalOrderInfo(t,r))}}}),c=(0,b.onUse)([j.default.isSender,"enterPersonalOrderInfo"]),(0,b.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},t.prototype.received=function(){this.opts.receivedNum&&(0,
g.default)("/personal/order/"+this.opts.order.id+"/info/received")},t.prototype.listened=function(){this.opts.listenedNum>0&&(0,g.default)("/personal/order/"+this.opts.order.id+"/info/listened")},t.prototype.shipped=function(){this.opts.shippedNum>0&&(0,g.default)("/personal/order/"+this.opts.order.id+"/info/shipped")},t.prototype.jumpToAddressCard=function(){(0,g.default)("/order/"+this.opts.order.id+"/ready")},h(t,[{key:"name",get:function(){return"personal-order-info"}},{key:"tmpl",get:function(){return r(126)}}]),t}(v.default.Tag),f.originName="personal-order-info",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=M},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(3)),v=function(e){return e&&e.filter(function(e){return e.status&&e.status.shipping&&e.status.read})||[]},m=(s=(0,y.Connect)(function(e){return{order:e.order,suborders:v(e.order.receivers),clientWidth:e.clientWidth}}),(0,y.View)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"personal-order-info-listened"}},{key:"tmpl",get:function(){return'\n      <div class="order_info" each="{ suborder in opts.suborders }">\n        <div class="suborder_img">\n          <img riot-src="{ suborder.headimgurl }">\n        </div>\n        <div class="suborder_info" style="width: { parent.opts.clientWidth -90 }px" >\n          <div class="name">\n            <span>{ suborder.consignee }</span>\n            <span>已收货</span>\n          </div>\n          <div class="time">\n            <span>{ $.util.filter.date(suborder.status.read_date) }</span>\n          </div>\n        </div>\n        <div class="express">\n          <span>快递单号</span>\n          <span>{ suborder.express.company.name } { suborder.express.no }</span>\n        </div>\n      </div>\n    '}}]),t}(d.default.Tag),c.originName="personal-order-info-listened",u=p))||u)||u);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(3)),v=function(e){return e&&e.filter(function(e){return e.telephone})||[]},m=(s=(0,y.Connect)(function(e){return{order:e.order,suborders:v(e.order.receivers),clientWidth:e.clientWidth}}),(0,y.View)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"personal-order-info-received"}},{key:"tmpl",get:function(){return'\n      <div class="order_received">\n        <div class="received_list">\n          <div class="received" each="{ suborder in opts.suborders }" >\n            <div class="suborder_img">\n              <img riot-src="{ suborder.headimgurl }" >\n            </div>\n            <div class="suborder_info" style="width: { parent.opts.clientWidth -120 }px">\n              <div class="name">\n                <span>{ suborder.consignee }</span>\n                <span>已领取</span>\n              </div>\n              <div class="time">\n                <span>{ $.util.filter.date(suborder.fillinDate) }</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    '}}]),t}(d.default.Tag),c.originName="personal-order-info-received",u=p))||u)||u);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=r(1),d=n(f),h=r(2),y=(n(h),r(3)),v=function(e){return e&&e.filter(function(e){return e.status&&e.status.shipping})||[]},m=(s=(0,y.Connect)(function(e){return{order:e.order,suborders:v(e.order.receivers),clientWidth:e.clientWidth}}),(0,y.View)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"personal-order-info-shipped"}},{key:"tmpl",get:function(){return'\n      <div class="order_info" each="{ suborder in opts.suborders }">\n        <div class="suborder_img">\n          <img riot-src="{ suborder.headimgurl }" >\n        </div>\n        <div class="suborder_info" style="width: { parent.opts.clientWidth -90 }px" >\n          <div class="name">\n            <span>{ suborder.consignee }</span>\n            <span>已发货</span>\n          </div>\n          <div class="time">\n            <span>{ $.util.filter.date(suborder.status.shipping_date) }</span>\n          </div>\n        </div>\n        <div class="express">\n          <span>快递单号</span>\n          <span>{ suborder.express.company.name } { suborder.express.no }</span>\n        </div>\n      </div>\n    '}}]),t}(d.default.Tag),c.originName="personal-order-info-shipped",u=p))||u)||u);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1),f=n(l),d=r(2),h=(n(d),r(3)),y=(0,h.View)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},p(t,[{key:"name",get:function(){return"personal-order-list"}},{key:"tmpl",get:function(){return'\n\t\t\t<order-list force="true" personal="true"></order-list>\n\t\t'}}]),t}(f.default.Tag),u.originName="personal-order-list",s=c))||s;t.default=y},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,o){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=r(1),v=n(y),m=r(2),g=(n(m),r(3)),b=r(22),w=n(b),_=(u=(0,g.Connect)(null,function(e){return{enterPersonal:function(t,r){return e(w.default.enterPersonal(t,r))}}}),c=(0,g.onUse)("enterPersonal"),(0,g.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"personal"}},{key:"tmpl",get:function(){return"<router-outlet></router-outlet>"}}]),t}(v.default.Tag),f.originName="personal",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.keys().map(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(145),a=n(i),s=("undefined"==typeof e||!e.exports,{}),u=r(39);s=o(u).concat([{default:a.default}]).reduce(function(e,t){for(var r in t.default)e[r]=t.default[r];return e},{}),t.default=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(15),i=n(o),a=r(52),s=n(a),u=r(50),c=n(u),p=r(51),l=n(p),f=r(54),d=n(f),h=r(59),y=n(h),v=r(72),m=n(v),g=r(63),b=n(g),w=r(60),_=n(w),O=r(82),x=n(O),k=r(81),j=n(k),S=r(77),P=n(S),E=r(79),R=n(E),T=r(80),C=n(T),M=r(78),$=n(M),I=r(65),A=n(I),N=r(75),F=n(N),L=r(20),D=n(L),U=r(76),q=n(U),W=r(70),z=n(W),V=r(42),B=n(V),H=r(43),G=n(H),J=r(45),Q=n(J),X=r(44),Z=n(X);t.default={component:i.default,path:"",children:[{path:"/",component:s.default,defaultRoute:!0},{path:"/wepay/",components:{OrderPay:b.default}},{path:"/gift",component:c.default,abstract:!0,children:[{path:"/list",component:s.default},{path:"/:id",component:l.default,children:[{path:"/order",component:y.default,abstract:!0,children:[{path:"/state",component:F.default,authenticate:!0},{path:"/record",component:m.default,authenticate:!0}]},{path:"/share",component:d.default}]}]},{path:"/order",component:y.default,abstract:!0,children:[{path:"/:id",component:_.default,authenticate:!0,children:[{path:"/ready",component:A.default},{path:"/state",component:F.default},{path:"/receive",component:D.default},{path:"/subscribe",component:q.default},{path:"/received",component:z.default}]}]},{path:"/personal",component:x.default,authenticate:!0,children:[{path:"/order",component:y.default,children:[{path:"/list",component:j.default},{path:"/:id",component:_.default,children:[{path:"/info",component:P.default,children:[{path:"/received",component:R.default},{path:"/shipped",component:C.default},{path:"/listened",component:$.default}]}]}]}]},{path:"/bigpack",component:B.default,authenticate:!0,abstract:!0,children:[{path:"/:id",component:G.default,children:[{path:"/subscribe",component:Q.default},{path:"/record",component:Z.default}]}]}]}},function(e,t){"use strict";!function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}}()},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t,r){var n={Accept:"application/json","Content-Type":"application/json"};return r&&r.headers&&Object.assign(n,r.headers),fetch(e,{method:"post",headers:n,body:JSON.stringify(t)}).then(function(e){return u(e)}).then(function(e){return c(e)}).then(function(e){return p(e)})}function i(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments[2]),r={method:"get",headers:{}};return t&&t.headers&&Object.assign(r.headers,t.headers),fetch(e,r).then(function(e){return u(e)}).then(function(e){return c(e)}).then(function(e){return p(e)})}function a(e,t,r){var n={Accept:"application/json","Content-Type":"application/json"};return r&&r.headers&&Object.assign(n,r.headers),fetch(e,{method:"put",headers:n,body:JSON.stringify(t)}).then(function(e){return u(e)}).then(function(e){return c(e)}).then(function(e){return p(e)})}function s(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments[2]),r={method:"del",headers:{}};return t&&t.headers&&Object.assign(r.headers,t.headers),fetch(e,r).then(function(e){return u(e)}).then(function(e){return c(e)}).then(function(e){return p(e)})}function u(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function c(e){var t=e.headers.get("Content-Type");if(/json/.test(t))return e.json();if(/text/.test(t))return e.text();var r=new Error("unknown data from remote");throw r.response=e,r}function p(e){if("object"===("undefined"==typeof e?"undefined":f(e))&&e.errmsg)throw new Error(e.errmsg);return e}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=r(1),h=n(d),y={get:i,post:o,put:a,del:s},v=function(e,t){var r=null;return this&&this.hasOwnProperty("path")?(r=this,e&&(r.path=e),t&&(r.props=t)):r={path:e,props:t,withProps:w,base:_},["get","post","put","del"].forEach(function(e){r[e]=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=n[0],a=n[1],s=n[2],u=s||{};r.path&&(i=r.path+(i||"")),r.props&&Object.assign(u,r.props);var c=y[e].call(null,i,a,u||{});return c.catch(function(e){m&&m(e,c)}),c}}),r},m=(h.observable({}),null),g=function(e){m=e},b=function(e){u=e},w=function(e){return v.bind(this)(null,e)},_=function(e){return v.bind(this)(e)};t.default=l({setErrorInterceptor:g,addResponseInterceptor:b,base:_,withProps:w},y)},function(e,t,r){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(86),a=n(i),s=r(105),u=t(s);!function(t,r){t="undefined"!=typeof window?window:e;var n=t.jQuery;if(n)return n;var i=function e(t){if(t){var r={append:function(e){var t=this,r=document.createElement("div");for(r.innerHTML=e;r.children.length>0;)t.appendChild(r.children[0]);return this},css:function(e){if("string"==typeof e)return this.style[e];for(var t in e)this.style[t]=e[t];return this},find:function(t){var r=document.querySelectorAll(t);return r=[].slice.apply(r),e(1===r.length?r[0]:r)},parent:function(){return e(this.parentNode)},next:function(){return e(this.nextSbiling)},remove:function(){this.parentNode&&this.parentNode.removeChild(this)},addClass:function(e){return this.hasClass(e)||(this.className+=" "+e),this},removeClass:function(e){if(this.hasClass(e)){var t=new RegExp("(\\s|^)"+e+"(\\s|$)");this.className=this.className.replace(t," ")}return this},hasClass:function(e){return this.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},outerWidth:function(){return this.css&&(this.css("marginLeft")||this.css("marginRight"))?this.offsetWidth+parseInt(this.css("marginLeft")||0,10)+parseInt(this.css("marginRight")||0,10):this.offsetWidth},height:function(){return this.offsetHeight}};return Array.isArray(t)?(t.each=t.forEach,t.map(function(e){return u.default.mixin(e,r)})):u.default.mixin(t,r)}},s=function(e){if("object"===("undefined"==typeof e?"undefined":o(e)))return i(e);var t=document.querySelectorAll(e);return t=[].slice.apply(t),i(1===t.length?t[0]:t)};s=u.default.mixin.apply(u.default,[s].concat(a.default)),s.ajax={},s.ajax.base=a.default.base,s.ajax.withProps=a.default.withProps,s.util=u.default,t.$=s}()}).call(t,function(){return this}())},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(e){return new a(e)},a=function(){function e(t){return r(this,e),t?void(this._d=new Date(t)):void(this._d=new Date)}return e.prototype.isBefore=function(e){return this._d.getTime()<this.getDate(e)},e.prototype.isAfter=function(e){return this._d.getTime()>this.getDate(e)},e.prototype.fromNow=function(){return this._d.getTime()-this.getDate()},e.prototype.getDate=function(e){return e="string"==typeof e?new Date(e).getTime():"object"===("undefined"==typeof e?"undefined":n(e))?e.getTime():(new Date).getTime()},o(e,[{key:"data",get:function(){return this._d},set:function(e){this._d=e}}]),e}();t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.provide=t.connect=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=n(u),p=r(103),l=r(11),f=n(l),d=r(28),h=n(d),y=r(26),v=r(92),m=n(v),g=function(){function e(t){var r=t.container,n=t.reducer,o=t.middlewares,s=t.state,u=void 0===s?{}:s;if(i(this,e),!r)throw new Error("a container expected.");this.framework=c.default,this.container=r;var l=a({},n,m.default);this.reducer=l,this.middlewares=o,this.buildInProps=["env","entry","context","mode"],this._mode="hash",this._store=(0,p.configureStore)(u,this.reducer,o,this._mode),this.router(h.default),this._context={store:this._store,hub:{},tags:{}},this.emitter=c.default.observable({}),r.widgets=this._widgets={}}return e.prototype.set=function(e,t){switch(this["_"+e]=t,this.accseptSet(e)){case"mode":var r={};this.store&&(r=this.store.getState()),this._store=(0,p.configureStore)(r,this.reducer,this.middlewares,this._mode),this._router&&(f.default.syncHistoryWithStore(this._router.hub,this._store),this.mixin("router",this._router));case"context":this.container=this._context}},e.prototype.accseptSet=function(e){return this.buildInProps.indexOf(e)>=0?e:null},e.prototype.router=function(e){return this._router=e,e.app=this,f.default.syncHistoryWithStore(this._router.hub,this._store),this},e.prototype.registerWidget=function(e){var t=this,r=e.name,n=e.methods,o=c.default.mount(r),i=o[0];this._context.tags[r]=i;var a=r.replace(/(\w)/,function(e){return e.toUpperCase()});this._widgets[a]={},n.forEach(function(e){t._widgets[a][e]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];i[e].apply(i,r)}})},e.prototype.start=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(this.entry){e.next=4;break}throw new Error("application expected a entry component");case 4:this._router.hub.startup();case 5:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.mixin=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.framework.mixin.apply(this.framework,t)},e.prototype.on=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.emitter.on.apply(this.emitter,t)},e.prototype.one=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.emitter.one.apply(this.emitter,t)},e.prototype.off=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.emitter.off.apply(this.emitter,t)},e.prototype.trigger=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.emitter.trigger.apply(this.emitter,t)},s(e,[{key:"container",get:function(){return this._container},set:function(e){this._container=e}},{key:"hub",get:function(){return this._router.hub}},{key:"context",get:function(){return this._context}},{key:"store",get:function(){return this._store},set:function(e){this._store=e}},{key:"mode",get:function(){return this._mode}},{key:"entry",get:function(){return this._entry}},{key:"env",get:function(){return this._env}}]),e}(),b=function(e){return new g(e)};t.default=b,t.connect=y.connect,t.provide=y.provide},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return function(t){return function(r){function n(){return o(this,n),i(this,r.apply(this,arguments))}return a(n,r),n.prototype.onCreate=function(t){r.prototype.onCreate.call(this,t),this.options=e,this.on("updated",this.onUpdated),this.mapDispatchToOpts()},n.prototype.resetForm=function(){var e=this,t=[];this.extractFormNamesFromRef().forEach(function(r){e.delForm(r),t.push({form:r})});var r=this.getStore();r.dispatch({type:"forms/remove",payload:t})},n.prototype.resetInputs=function(e){var t=this;e.forEach(function(e){return t.resetInput(e)})},n.prototype.setRef=function(e){function t(e,t){if("createEvent"in document){var r=document.createEvent("HTMLEvents");r.initEvent(t,!1,!0),e.dispatchEvent(r)}else{var r=document.createEventObject();r.eventType=t,e.fireEvent("on"+r.eventType,r)}}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e){var n=new Error("set ref method expecta input name");throw n}this.refs[e].value=r,t(this.refs[e],"change")},n.prototype.resetInput=function(e){if(!e){var t=new Error("[redux-form]: reset input expect a inputName");throw t}if(this.refs[e]&&this.refs[e].form&&this.refs[e].form.getAttribute("ref")){var r=this.refs[e].form.getAttribute("ref");this.delInput(e,r)}},n.prototype.mapDispatchToOpts=function(){var e=this,t=this.getStore();this.opts.submit=function(r){e.refs[r]||console.warn("failed to submit the form, can not find the form [name]"+r);var n=e.extractFormNamesFromRef().map(function(t){return e.refs[t]});n.forEach(function(n){var o=e.extractInputsFromForm(n).map(function(t){return e.refs[t]});o.forEach(function(t){e.validate(t,t.value)}),o&&o.length||t.dispatch({type:"form/valid",payload:r})}),t.dispatch({type:"form/submit",payload:r})},this.opts.unsubmit=function(r){e.refs[r]||console.warn("failed to unsubmit the form, can not find the form [name]"+r),t.dispatch({type:"form/unsubmit",payload:r})}},n.prototype.unMapDispatchToOpts=function(){delete this.opts.forms,delete this.opts.submit},n.prototype.onUpdated=function(){this.getStore();if(this.refs){var e=this.extractFormNamesFromRef();e&&e.length&&(this.refDiff(this.extractFormsFromRef()),this.rebindInputs())}},n.prototype.rebindInputs=function(){for(var e in this.refs){var t=this.findHandlerInFormHandlersByInputName(e),r=this.refs[e];t&&t.input!=r&&(t.input=r,r.addEventListener("change",t.bind(this)))}},n.prototype.findHandlerInFormHandlersByInputName=function(e){if(this.$form&&this.$form.handlers)for(var t=this.$form.handlers,r=Array.isArray(t),n=0,t=r?t:t[Symbol.iterator]();;){var o;if(r){if(n>=t.length)break;o=t[n++]}else{if(n=t.next(),n.done)break;o=n.value}var i=o;if(i.input.getAttribute("ref")===e)return i}},n.prototype.extractFormNamesFromRef=function(){var e=this;return Object.keys(this.refs).filter(function(t){return"FORM"===e.refs[t].nodeName})},n.prototype.extractFormsFromRef=function(){var e=this;return this.extractFormNamesFromRef().map(function(t){return e.refs[t]})},n.prototype.extractInputsNames=function(){var e=this;return Object.keys(this.refs).filter(function(t){return"INPUT"===e.refs[t].nodeName})},n.prototype.extractInputsFromRefs=function(){var e=this;return Object.keys(this.refs).filter(function(t){return"INPUT"===e.refs[t].nodeName}).map(function(t){return e.refs[t]})},n.prototype.extractInputsFromForm=function(e){var t=this;return Object.keys(this.refs).filter(function(r){return t.refs[r].form===e})},n.prototype.getStore=function(){return(0,c.getProvider)(this).opts.store},n.prototype.getInputs=function(e){var t=this;return Object.keys(this.refs).filter(function(r){return t.refs[r].form===e}).map(function(e){return t.refs[e]})},n.prototype.refDiff=function(e){var t=this,r=this.getStore(),n=r.getState().forms,o=this.distinctForm(e,n,function(e){return e.attributes.ref.value}),i=o.adds,a=o.dels,s=this.extractFormNamesFromRef().filter(function(e){return i.indexOf(e)<0&&a.indexOf()<0});if(i&&i.length&&!function(){var e=[];i.forEach(function(n){t.addForm(r,n);var o=t.getInputs(t.refs[n]),i=o.map(function(e){return t.addInput(r,e,n)});e.push({form:n,inputs:i})}),e.length&&r.dispatch({type:"forms/inputs/add",payload:e})}(),a&&a.length&&!function(){var e=[];a.forEach(function(n){t.delForm(r,n),e.push({form:n})}),r.dispatch({type:"forms/remove",payload:e})}(),s&&s.length){var u=this.resolveInputsInFormLoop(s),c=u.adds,p=u.dels;c&&c.length&&!function(){var e=[];c.forEach(function(n){var o=n.formName,i=n.inputs;if(i&&i.length){var a=i.map(function(e){return t.addInput(r,t.refs[e],o)});e.push({form:o,inputs:a})}}),e.length&&r.dispatch({type:"forms/inputs/add",payload:e})}(),p&&p.length&&!function(){var e=[];p.forEach(function(r,n){n&&n.length&&(n.forEach(function(e){t.refs[e].forEach(function(e){return t.delInput(e)})}),e.push({form:r,inputs:n}))}),e.length&&r.dispatch({type:"forms/inputs/remove",payload:e})}()}},n.prototype.distinctForm=function(e,t,r){for(var n=this,o=Object.keys(t).filter(function(e){return t[e].$meta._riot_id===n._riot_id}).map(function(e){return t[e]}),i=o.map(function(e){return e.$name}),a=[],s=[],u=0,c=e.length;u<c;u++){var p=e[u],l=i.indexOf(r(p));l>=0?i.splice(l,1):a.push(r(p))}return i.length&&(s=i),{adds:a,dels:s}},n.prototype.distinctInput=function(e,t,r){for(var n=[],o=[],i=f.default.clone(t),a=0,s=e.length;a<s;a++){var u=e[a],c=this.refs[u],p=i.indexOf(r(c));p>=0?i.splice(p,1):n.push(r(c))}return i.length&&(o=i),{adds:n,dels:o}},n.prototype.bindInputChange=function(e){var t=this;this.$form||(this.$form={handlers:[]});var r=function(r){var n=r.target.value;t.validate(e,n)};r.input=e,this.$form.handlers.push(r),e.addEventListener("change",r.bind(this))},n.prototype.unbindInputChange=function(e){if(this.$form.handlers.length){var t=this.$form.handlers.filter(function(t){return t.input===e});this.$form.handlers=this.$form.handlers.filter(function(t){return t.input!=e}),t.length&&t.forEach(function(t,r){e.removeEventListener("change",t)})}},n.prototype.validate=function(e,t){var r=this,n=this.getStore(),o=e.form.getAttribute("ref"),i=n.getState().forms[o],a=i[e.getAttribute("ref")],s=a.$rule,u=[];Object.keys(s).map(function(n){var o=(s[n],p.validators[n]),i=o(t,s[n]),c=null;c=i?r.inputInvalid(e,a,n,t):r.inputValid(e,a,n,t),c.$val=t,r.resolveClass(a,e),u.push(c)}),n.dispatch({type:"forms/inputs/update",payload:{form:o,inputs:u}})},n.prototype.resolveInputsInFormLoop=function(e){for(var t=this,r=this.getStore(),n=r.getState().forms,o=[],i=[],a=function(){if(u){if(c>=s.length)return"break";p=s[c++]}else{if(c=s.next(),c.done)return"break";p=c.value}var e=p,r=f.default.extractField(n[e]),a=Object.keys(r).map(function(e){return r[e].$name}),l=t.distinctInput(t.extractInputsFromForm(t.refs[e]),a,function(e){return e.attributes.ref.value}),d=l.adds,h=l.dels;o=o.concat({formName:e,inputs:d}),i=i.concat({formName:e,inputs:h})},s=e,u=Array.isArray(s),c=0,s=u?s:s[Symbol.iterator]();;){var p,l=a();if("break"===l)break}return{adds:o,dels:i}},n.prototype.inputValid=function(e,t,r,n){return t.$valid=!0,t.$invalid=!1,t.$error[r]&&delete t.$error[r],n!=t.$originVal?t.$dirty=!0:t.$dirty=!1,t.$pristine=!t.$dirty,t},n.prototype.inputInvalid=function(e,t,r,n){return t.$valid=!1,t.$invalid=!0,t.$error[r]=!0,n!=t.$originVal?t.$dirty=!0:t.$dirty=!1,t.$pristine=!t.$dirty,t},n.prototype.resolveClass=function(e,t){Object.keys(e.$error).length>0?(f.default.removeClass(t,"f-valid"),f.default.addClass(t,"f-invalid")):(f.default.removeClass(t,"f-invalid"),f.default.addClass(t,"f-valid")),e.$dirty&&(f.default.addClass(t,"f-dirty"),f.default.removeClass(t,"f-pristine")),e.$pristine&&(f.default.addClass(t,"f-pristine"),
f.default.removeClass(t,"f-dirty"))},n.prototype.addInput=function(e,t,r){var n=this,o=this.getInputName(t),i=this.options[o],a=Object.keys(i).map(function(e){return{name:e,value:i[e]}}),s=this.getInputInstance(t,r);return a.map(function(e){return n.addInputRule(s,e)}),this.bindInputChange(t),s},n.prototype.addInputRule=function(e,t){return e.$rule[t.name]=t.value,e},n.prototype.getInputName=function(e){return e.attributes.ref.value},n.prototype.getInputInstance=function(e,t){var r=null,n=this.getInputName(e),o=this.getStore().getState(),i=o.forms[t];return r=i[n],r||(r={$name:n,$dirty:!1,$pristine:!0,$valid:!0,$invalid:!1,$error:{},$rule:{},$originVal:e.value}),r},n.prototype.delInput=function(e,t){var r=[],n=this.getStore(),o=this.refs[e];o.value="",this.unbindInputChange(o),r.push({form:t,inputs:[e]}),n.dispatch({type:"forms/inputs/remove",payload:r})},n.prototype.addForm=function(e,t){var r={$meta:{_riot_id:this._riot_id},$name:t,$dirty:!1,$pristine:!0,$valid:!1,$invalid:!0,$submitted:!1,$error:{}};e.dispatch({type:"form/add",payload:r})},n.prototype.delForm=function(e){var t=this;this.extractInputsFromForm(this.refs[e]).map(function(e){return t.refs[e]}).forEach(function(e){e.value="",t.unbindInputChange(e)})},n.prototype.trySubscribe=function(){var e=this;r.prototype.trySubscribe.call(this);var t=this.getStore();this.subscribe=t.subscribe(function(){var r=t.getState(),n=r.lastAction;("forms/add"===n.type||"forms/inputs/add"===n.type||"forms/inputs/update"===n.type&&e.extractFormNamesFromRef().indexOf(n.payload.form)>=0||"form/submit"===n.type&&e.extractFormNamesFromRef().indexOf(n.payload)>=0||e.concernActions(n.type,n.payload))&&e.isMounted&&(e.opts.forms=r.forms,e.update())})},n.prototype.concernActions=function(e,t){var r=this.extractFormNamesFromRef();if("forms/remove"===e&&r&&r.length){var n=f.default.intersect(r,t.map(function(e){return e.form}));return n.length>0}if("forms/inputs/remove"===e){var o=t.map(function(e){return e.inputs}).reduce(function(e,t){return e.concat(t)},[]);if(o)return f.default.intersect(o,Object.keys(this.refs)).length>0}return!1},n.prototype.unSubscribe=function(){return r.prototype.unSubscribe.call(this),!!this.subscribe&&(this.subscribe(),!0)},u(n,[{key:"name",get:function(){return"form-"+(r.prototype.name||t.name)}}]),n}(t)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.default=s;var c=r(9),p=r(25),l=r(7),f=n(l)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerValidators=void 0;var o=r(90),i=n(o),a=r(25);t.default=i.default,t.registerValidators=a.registerValidators},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(7),s=n(a),u={},c=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1],r=null,n=function(){var n,o,a,u,c,p,l,f;switch(t.type){case"form/input":var d=t.payload,h=d.form,y=d.input;return r=h.$name,e[r][y.name]=y.value,{v:Object.assign({},e,(n={},n[h.$name]=h,n))};case"form/add":return h=t.payload,{v:Object.assign({},e,(o={},o[h.$name]=h,o))};case"form/update":return h=t.payload,{v:Object.assign({},e,(a={},a[h.$name]=h,a))};case"form/reset":return h=t.payload,delete e[h.$name],{v:e};case"forms/inputs/add":var v=t.payload,m=v.reduce(function(t,r){var n,o=e[r.form],i=r.inputs;return i.forEach(function(e){o[e.$name]=e}),n={},n[r.form]=o,n},{});return{v:Object.assign({},e,i({},m))};case"forms/remove":return{v:Object.assign({},s.default.omit(e,t.payload.map(function(e){return e.form})))};case"forms/inputs/remove":var g=t.payload,b=g.map(function(t){return Object.keys(e).filter(function(e){return e===t.form}).map(function(r){return{inputs:t.inputs,form:e[r]}})[0]}).reduce(function(e,t){var r=t.form.$name,n=s.default.omit(t.form,t.inputs);return e[r]=n,e},{});return{v:Object.assign({},e,b)};case"forms/inputs/update":var w=t.payload,_=w.inputs.map(function(e){return{name:e.$name,val:e}}).reduce(function(e,t){return e[t.name]=t.val,e},{}),O=_[Object.keys(_)[0]].$dirty,x=Object.assign.apply(Object,[{}].concat(e[w.form],[i({$dirty:O,$pristine:!O},_)])),k=function(){var e=s.default.extractField(x);return Object.keys(e).filter(function(t){var r=e[t].$error;return Object.keys(r).length>0}).length>0},j=Object.keys(_);j&&j.length<=0?(x.$invalid=!1,x.$valid=!0):k()?(x.$invalid=!0,x.$valid=!1):(x.$invalid=!1,x.$valid=!0);var S=Object.assign({},(u={},u[w.form]={},u),(c={},c[w.form]=i({},x),c));return{v:Object.assign({},e,S)};case"form/submit":return r=t.payload,{v:Object.assign({},e,(p={},p[r]=i({},e[r],{$submitted:!0}),p))};case"form/valid":return r=t.payload,{v:Object.assign({},e,(l={},l[r]=i({},e[r],{$invalid:!1,$valid:!0}),l))};case"form/unsubmit":return r=t.payload,{v:Object.assign({},e,(f={},f[r]=i({},e[r],{$submitted:!1}),f))};default:return{v:e}}}();if("object"===("undefined"==typeof n?"undefined":o(n)))return n.v};t.default={forms:c}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){try{return e.apply(t)}catch(e){return j.value=e,j}}function u(e){return function(t){return(0,f.bindActionCreators)(e,t)}}function c(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{pure:!0,withRef:!1},c=Boolean(e),f=e||_,d=n.pure,h=(n.withRef,null);h="function"==typeof t?t:t?u(t):O;var y=r||x,m=d&&y!==x,g=S++;return function(e){function t(e,t,r){var n=y(e,t,r);return n}var r="Connect("+k(e)+")",n=function(n){function u(){return o(this,u),i(this,n.apply(this,arguments))}return a(u,n),u.prototype.onCreate=function(e){this.version=g,this.store=e.store||(0,w.getProvider)(this).opts.store,this.displayName=r;var t=this.store.getState();(0,v.default)(this.store,'Could not find "store" in either the context or '+('opts of "'+r+'". ')+"Either wrap the root component in a Provider, "+('or explicitly pass "store" as a opt to "'+r+'".')),this.state={storeState:t},this.clearCache(),this.on("mount",this.componentDidMount),this.on("before-unmount",this.componentWillUnmount),this.on("update",this.render),n.prototype.onCreate.call(this,e)},u.prototype.updateStateOptsIfNeeded=function(){var e=this.computeStateOpts(this.store,this.opts);return(!this.stateOpts||!(0,b.default)(e,this.stateOpts))&&(this.stateOpts=e,!0)},u.prototype.updateDispatchOptsIfNeeded=function(){var e=this.computeDispatchOpts(this.store,this.opts);return(!this.dispatchOpts||!(0,b.default)(e,this.dispatchOpts))&&(this.dispatchOpts=e,!0)},u.prototype.updateMergedOptsIfNeeded=function(){var e=t(this.stateOpts,this.dispatchOpts,this.opts);return!(this.mergedOpts&&m&&(0,b.default)(e,this.mergedOpts))&&(this.mergedOpts=e,!0)},u.prototype.configureFinalMapState=function(e,t){var r=f(e.getState(),t),n="function"==typeof r;return this.finalMapStateToOpts=n?r:f,this.doStateOptsDependOnOwnOpts=1!==this.finalMapStateToOpts.length,n?this.computeStateOpts(e,t):r},u.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!d||t!==e){if(d&&!this.doStateOptsDependOnOwnOpts){var r=s(this.updateStateOptsIfNeeded,this);if(!r)return;r===j&&(this.stateOptsPrecalculationError=j.value),this.haveStateOptsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.update({state:e})}}},u.prototype.componentDidMount=function(){this.render(),this.trySubscribe()},u.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},u.prototype.trySubscribe=function(){c&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},u.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},u.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},u.prototype.clearCache=function(){this.dispatchOpts=null,this.stateOpts=null,this.mergedOpts=null,this.haveOwnOptsChanged=!0,this.hasStoreStateChanged=!0,this.haveStateOptsBeenPrecalculated=!1,this.stateOptsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToOpts=null,this.finalMapStateToOpts=null},u.prototype.componentWillReceiveOpts=function(e){d&&(0,b.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},u.prototype.computeStateOpts=function(e,t){if(!this.finalMapStateToOpts)return this.configureFinalMapState(e,t);var r=e.getState(),n=this.doStateOptsDependOnOwnOpts?this.finalMapStateToOpts(r,t):this.finalMapStateToOpts(r);return n},u.prototype.computeDispatchOpts=function(e,t){if(!this.finalMapDispatchToOpts)return this.configureFinalMapDispatch(e,t);var r=e.dispatch,n=this.doDispatchOptsDependOnOwnProps?this.finalMapDispatchToOpts(r,t):this.finalMapDispatchToOpts(r);return n},u.prototype.configureFinalMapDispatch=function(e,t){var r=h(e.dispatch,t),n="function"==typeof r;return this.finalMapDispatchToOpts=n?r:h,this.doDispatchOptsDependOnOwnOpts=1!==this.finalMapDispatchToOpts.length,n?this.computeDispatchOpts(e,t):r},u.prototype.render=function(){var e=this,t=this.haveOwnOptsChanged,r=this.hasStoreStateChanged,n=this.haveStateOptsBeenPrecalculated,o=this.stateOptsPrecalculationError,i=this.renderedElement;if(this.haveOwnOptsChanged=!1,this.hasStoreStateChanged=!1,this.haveStateOptsBeenPrecalculated=!1,this.stateOptsPrecalculationError=null,o)throw o;var a=!0,s=!0;d&&i&&(a=r||t&&this.doStateOptsDependOnOwnOpts,s=t&&this.doDispatchOptsDependOnOwnOpts);var u=!1,c=!1;n?u=!0:a&&(u=this.updateStateOptsIfNeeded()),s&&(c=this.updateDispatchOptsIfNeeded());var p=!0;p=!!(u||c||t)&&this.updateMergedOptsIfNeeded(),!p&&i||(this.renderedElement=!0,Object.assign(this.opts,l({},this.mergedOpts)),setTimeout(function(){e.update()},0))},p(u,[{key:"name",get:function(){return"connect-"+n.prototype.name||e.name}}]),u}(e);return n.displayName=r,n.WrappedComponent=e,n}}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=c;var f=r(10),d=r(1),h=(n(d),r(96)),y=(n(h),r(27)),v=n(y),m=r(94),g=(n(m),r(95)),b=n(g),w=r(9),_=function(e){return{}},O=function(e){return{dispatch:e}},x=function(e,t,r){return l({},r,e,t)},k=function(e){return e.displayName||e.name||"Component"},j={value:null},S=0},function(e,t){"use strict";function r(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t){"use strict";function r(e,t){if(e===t)return!0;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=Object.prototype.hasOwnProperty,i=0;i<r.length;i++)if(!o.call(t,r[i])||e[r[i]]!==t[r[i]])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r){var n={displayName:!0,mixins:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;if("string"!=typeof t){var a=Object.getOwnPropertyNames(t);i&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!(n[a[s]]||o[a[s]]||r&&r[a[s]]))try{e[a[s]]=t[a[s]]}catch(e){console.warn("hoistStatics failed.")}}return e}function u(e){var t="View("+h(e)+")",r=function(e){function r(){return o(this,r),i(this,e.apply(this,arguments))}return a(r,e),r.prototype.onCreate=function(r){this.displayName=t;var n=(0,p.getProvider)(this);n.opts.store.getState();e.prototype.onCreate.call(this,r),this.opts.force&&Object.defineProperties(this.opts,{$show:{get:function(){return!0}}}),this.onInit()},r.prototype.enter=function(e,t){this.trigger("enter",e),this.opts.show=!0,this.opts.hidden=!1},r.prototype.getStore=function(){var e=(0,p.getProvider)(this);return e.opts.store},r.prototype.onInit=function(){var e=this.getStore();e.getState();e.subscribe(this.onSubscribe.bind(this))},r.prototype.onSubscribe=function(e){var t=this.getStore().getState(),n=t.lastAction;r.concerns.some(function(e){return n.type===e})&&n.payload===this&&this.renderForView(t)},r.prototype.renderForView=function(e){this.opts.$show=d(e.route.$views,this)||!1,this.update()},c(r,[{key:"name",get:function(){return f.default.camelToLine(e.prototype.name)}},{key:"tmpl",get:function(){return'\n\t\t\t\t\t<div if="{opts.$show}">'+e.prototype.tmpl+"</div>\n\t\t\t\t"}}]),r}(e);return r.concerns=["$enter","$leave"],r.displayName=t,r.WrappedComponent=e,s(r,e),r}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.default=u;var p=r(9),l=r(7),f=n(l),d=function(e,t){return!!t.$routePath&&e[t.$routePath]},h=function(e){return e.displayName||e.name||"Component"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n={$prev_state:"/",$prev_location:"/",$state:"/",$location:"/",$protocol:"http://",$host:"undefined"!=typeof window&&location&&location.host||"",data:{},stack:[],$views:{}},o=function e(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments[1];switch(o.type){case"$enter":var i=o.payload.$routePath,a=(t={},t[i]=!0,t);return Object.assign({},e,{$views:r({},e.$views,a)});case"$leave":var i=o.payload.$routePath;return Object.assign({},e,{$views:Object.keys(e.$views).filter(function(e){return e!=i}).reduce(function(e,t){return e[t]=!0,e},{})});case"$route":return Object.assign({},e,{$prev_state:e.$state,$prev_location:e.$location,$state:o.payload.route.$state,$location:o.payload.route.$location,$protocol:o.payload.route.$protocol||e.$protocol,$host:e.$host,data:o.payload.route.ctx});case"$query":return Object.assign({},e,{$prev_state:e.$state,$prev_location:e.$location,$state:e.$state,$location:e.$location,$protocol:e.$protocol,$host:e.$host,data:Object.assign({},{request:{body:e.data.req.body,params:e.data.req.params,query:o.payload}})});case"$routeBusy":return Object.assign({},e,{busy:!0});case"$routeUnBusy":return Object.assign({},e,{busy:!1});default:return e}};t.default={route:o}},function(e,t){"use strict";function r(e){return function(t,r,n){var o=n.value;return n.$originOnCreate||(n.$originOnCreate=o),n.value=function(t){var r=this;n.$originOnCreate&&!n.$originOnCreateInvocated&&(n.$originOnCreate.apply(this,[t]),n.$originOnCreateInvocated=!0),this.$mws&&this.$mws.length||this.mixin("router"),this.one("leave",function(){n.$originOnCreateInvocated=!1}),this.one("unmount",function(){n.$originOnCreateInvocated=!1}),Array.isArray(e)||(e=[e]),e.forEach(function(t){r.$use(function(n,o){return"string"==typeof t&&(t=r.opts[t],e||invariant("[onUse]: Error not such a "+e+" in opts")),t.apply(r,[n,o,r])})})},n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={onUse:r}},function(e,t){"use strict";function r(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"warn";return t||(t=e,e=void 0),"undefined"!=typeof e?void(e||console.error(t)):void console[r](t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(o=n=function(){function e(){r(this,e)}return e.distinct=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];t.indexOf(o)<0&&t.push(o)}return t},e.genId=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r="",n=0;n<e;n++){var o=Math.ceil(35*Math.random());r+=t[o]}return r},e.completePart=function(e){return e.startsWith("/")?e:"/"+e},e.assert=function(e,t){if(!e)throw new Error(t)},e.omit=function(e){for(var t={},r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(var i in e)n.indexOf(i)<0&&(t[i]=e[i]);return t},e.compareUrl=function(e,t){for(var r=[],n=e.split("/"),o=t.split("/"),i=0,a=n.length;i<a&&n[i]===o[i];i++)r.push(n[i]);return r.join("/")},e.isEqual=function(e,t){var r=Object.keys(e).length,n=0;if(r!=Object.keys(t).length)return!1;for(var o in e)e[o]===t[o]&&n++;return n===r},e.combineUriParts=function(t,r,n){if(!t.length||r<=0)return n;var o=t[r-1]+"/"+n;return e.combineUriParts(t,--r,o)},e.composeObject=function(e,t){var r={};return Array.isArray(e)&&Array.isArray(t)&&e.length==t.length?(e.forEach(function(e,n){r[e]=t[n]}),r):r},e.getParams=function(e){if("function"!=typeof e)throw new Error("Failed to get Param on "+("undefined"==typeof e?"undefined":i(e)));var t=e.toString().match(/\(.*\)/).toString();if(t.length<=2)return null;var r=t.substr(1,t.length-2).split(",");return r.map(function(e){return e.trim()})},e.extractParams=function(e){return e.match(/_[a-zA-Z0-9:]+/g)},e.toPattern=function(e){return e.replace(/_[a-zA-Z0-9:]+/g,"*")},e.nextTick=function(e){return setTimeout(e,0)},e}(),n.flatAndComposePrefix=function(e,t){var r=e.children;if(r)for(var n=0,o=r.length;n<o;n++){var i=r[n];i.path=(e.path||"")+i.path,i.parent=e.id||"",i.id=a.genId(8),t.push(i),a.flatAndComposePrefix(i,t)}},o);t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t={},r=["tmpl","css","attrs"];for(var n in e)r.indexOf(e[n])<0&&(t[n]=e[n]);return t}function i(e){if(!e.originName)throw new Error("register decorator expected a origin name.");if(!e.prototype.tmpl)throw new Error("register decorator expected a template.");return s.default.tag(e.originName,e.prototype.tmpl,e.prototype.css||"",e.prototype.attrs||"",function(t){this.mixin(o(e.prototype)),this.onCreate.apply(this,[t])}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(1),s=n(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=r(7),a=n(i),s=r(10),u=r(11),c=n(u);t.configureStore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"browser",i=(0,s.combineReducers)(o({},t)),u=c.default.routerMiddlewareCreator(n);return(0,s.compose)(s.applyMiddleware.apply(void 0,[u].concat(a.default.values(r))))(s.createStore)(i,e)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=this,n=function(e){return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=r;return new Promise(function(t,r){var o=function(e){return t(e)};e.apply(i,[].concat(n,[o]))})}},o=function(e){for(var t={},r=0,o=Object.keys(e).length;r<o;r++){var i=Object.keys(e)[r];"function"==typeof e[i]&&(t[i+"Async"]=n(e[i]))}return t};t.promisify=n,t.promisifyAll=o,t.default={promisify:n,promisifyAll:o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return Object.keys(e).map(function(t){return e[t]})},i=function(){return Object.assign.apply(Object,arguments)},a=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.keys(e).filter(function(e){return r.indexOf(e)>=0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},s=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.keys(e).filter(function(e){return r.indexOf(e)<0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},u=function e(t){if(!t)return t;var r,o=[Number,String,Boolean];if(o.forEach(function(e){t instanceof e&&(r=e(t))}),"undefined"==typeof r)if("[object Array]"===Object.prototype.toString.call(t))r=[],t.forEach(function(t,n,o){r[n]=e(t)});else if("object"==("undefined"==typeof t?"undefined":n(t)))if(t.nodeType&&"function"==typeof t.cloneNode)var r=t.cloneNode(!0);else if(t.prototype)r=t;else if(t instanceof Date)r=new Date(t);else{r={};for(var i in t)r[i]=e(t[i])}else r=t;return r},c={stringify:function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},parse:function(e){return e.split("&").reduce(function(e,t){var r=t.split("=");return e[r[0]]=r[1],e},{})}},p=function(e,t){clearTimeout(e.timer),e.timer=setTimeout(function(){e.apply(null),e.timer=null},t)},l={ago:function(e){"string"==typeof e&&(e=new Date(e));var t=parseFloat(e.getTime()-(new Date).getTime(),10),r=t<0,n=Math.abs(t),o=Math.ceil(n/6e4);if(o<60)return r?o+"分钟前":o+"分钟内";var i=Math.ceil(n/36e5);if(i<24)return r?i+"小时前":i+"小时内";var a=Math.ceil(n/864e5);if(a<30)return r?a+"天前":a+"天内";var s=Math.ceil(a/30);if(s<12)return r?s+"个月前":s+"个月内";var u=Math.ceil(s/12);return r?u+"年前":u+"年内"},currency:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t?"￥":"")+(e.toFixed(2)||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")},date:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";"string"==typeof e&&(e=new Date(e));var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return t},htmlSafe:function(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/<style.*\/style>/g,"").replace(/<script/g,'<p style="display:none;" ').replace(/script>/g,"p>")}},f=function e(t,r){return t&&r&&"object"===("undefined"==typeof t?"undefined":n(t))&&"object"===("undefined"==typeof r?"undefined":n(r))?Object.keys(t).length===Object.keys(r).length&&Object.keys(t).reduce(function(n,o){return n&&e(t[o],r[o])},!0):t===r};t.default={values:o,mixin:i,querystring:c,throttle:p,filter:l,clone:u,deepEqual:f,omit:s,pick:a}},function(e,t,r){(function(t,r){!function(t){"use strict";function n(e,t,r,n){var o=Object.create((t||i).prototype),a=new h(n||[]);return o._invoke=l(e,r,a),o}function o(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function a(){}function s(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){this.arg=e}function p(e){function t(t,r){var n=e[t](r),o=n.value;return o instanceof c?Promise.resolve(o.arg).then(i,a):Promise.resolve(o).then(function(e){return n.value=e,n})}function n(e,r){function n(){return t(e,r)}return o=o?o.then(n,n):new Promise(function(e){e(n())})}"object"==typeof r&&r.domain&&(t=r.domain.bind(t));var o,i=t.bind(e,"next"),a=t.bind(e,"throw");t.bind(e,"return");this._invoke=n}function l(e,t,r){var n=O;return function(i,a){if(n===k)throw new Error("Generator is already running");if(n===j){if("throw"===i)throw a;return v()}for(;;){var s=r.delegate;if(s){if("return"===i||"throw"===i&&s.iterator[i]===m){r.delegate=null;var u=s.iterator.return;if(u){var c=o(u,s.iterator,a);if("throw"===c.type){i="throw",a=c.arg;continue}}if("return"===i)continue}var c=o(s.iterator[i],s.iterator,a);if("throw"===c.type){r.delegate=null,i="throw",a=c.arg;continue}i="next",a=m;var p=c.arg;if(!p.done)return n=x,p;r[s.resultName]=p.value,r.next=s.nextLoc,r.delegate=null}if("next"===i)r._sent=a,n===x?r.sent=a:r.sent=m;else if("throw"===i){if(n===O)throw n=j,a;r.dispatchException(a)&&(i="next",a=m)}else"return"===i&&r.abrupt("return",a);n=k;var c=o(e,t,r);if("normal"===c.type){n=r.done?j:x;var p={value:c.arg,done:r.done};if(c.arg!==S)return p;r.delegate&&"next"===i&&(a=m)}else"throw"===c.type&&(n=j,i="throw",a=c.arg)}}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function y(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(g.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=m,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:m,done:!0}}var m,g=Object.prototype.hasOwnProperty,b="function"==typeof Symbol&&Symbol.iterator||"@@iterator",w="object"==typeof e,_=t.regeneratorRuntime;if(_)return void(w&&(e.exports=_));_=t.regeneratorRuntime=w?e.exports:{},_.wrap=n;var O="suspendedStart",x="suspendedYield",k="executing",j="completed",S={},P=s.prototype=i.prototype;a.prototype=P.constructor=s,s.constructor=a,a.displayName="GeneratorFunction",_.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},_.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s,e.prototype=Object.create(P),e},_.awrap=function(e){return new c(e)},u(p.prototype),_.async=function(e,t,r,o){var i=new p(n(e,t,r,o));return _.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},u(P),P[b]=function(){return this},P.toString=function(){return"[object Generator]"},_.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},_.values=y,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return i.type="throw",i.arg=e,r.next=t,!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=g.call(o,"catchLoc"),s=g.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?this.next=o.finallyLoc:this.complete(i),S},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;d(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},S}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),r(149))},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,u.default)(e)&&((0,p.default)(e.type)||(0,f.default)(e.type))&&Object.keys(e).every(a)}function i(e){return e.error===!0}function a(e){return["type","payload","error","meta"].indexOf(e)>-1}t.__esModule=!0,t.isFSA=o,t.isError=i;var s=r(127),u=n(s),c=r(128),p=n(c),l=r(129),f=n(l)},function(e,t){e.exports='<router-outlet> <div class=bigpack> <div class=bigpack_wrap> <div class=bigpack_cont> <div class=pack_title style="width:{ parent.opts.clientWidth - 24 }px"> <span><img riot-src="{ parent.opts.merchant.pubno.head_img }"/></span> <span style="width:{ parent.opts.clientWidth - 76 }px">商家{ parent.opts.merchant.pubno.nick_name }发给你一个大礼包 </span> </div> <div class=detail> <div class=order_id> <span>订单号</span> <span>{ parent.opts.order.id }</span> </div> <div class=order_img style="width:{ parent.opts.clientWidth/2 + 70 }px;height:{ parent.opts.clientWidth/2 + 70 }px"> <img riot-src="{ parent.opts.order.gift && parent.opts.order.gift.info && parent.opts.order.gift.info.cover ? app.config.phtUri + parent.opts.order.gift.info.cover : app.config.images.GIFTSHRAE_DEF_COVER }"/> <div class=title_price style="width:{ parent.opts.clientWidth/2 + 70 }px"> <span>{ parent.opts.order.gift.info.name }</span> <span>{ $.util.filter.currency(parent.opts.order.gift.info.price) }</span> </div> </div> <div class=order_num>{ parent.opts.order.capacity }份礼物</div> <div class=order_btn> <button class=btn_end if="{ parent.opts.isUnavailable }">该大礼包已送出</button> <a class=btn_start if="{ !parent.opts.isUnavailable }" href="{ \'/bigpack/\' + parent.opts.order.id + \'/record\' }">开始送礼</a> </div> <div class=des_info> <span>点击开始送礼并完善语音信息</span> </div> </div> </div> </div> <icon-href theme=white></icon-href> </div> </router-outlet> ';
},function(e,t){e.exports='<div class=bigpack_record> <div class=record_wrap> <form class=record_form ref=bigpackRecordForm novalidate> <div class=user_photo> <span><img riot-src=" { opts.user.photo } "></span> <span>请开始录音</span> </div> <div class=big_title_img> <div if="{ opts.order.capacity === 1 }"><img src=https://img.91pintuan.com/songli/word_say_to.png /></div> <div if="{ opts.order.capacity > 1 }"><img src=https://img.91pintuan.com/songli/word-zhufu_newyear.png /></div> </div> <div if="{ opts.order.capacity === 1 }" class=one2one> <div class=name> <span><img src=https://img.91pintuan.com/songli/word_send_to.png /></span> <input type=text placeholder="{ opts.forms.bigpackRecordForm.name.$invalid && opts.forms.bigpackRecordForm.$submitted ? \'昵称未填写\' : \'Ta的名字\' }" ref=name /> <p show="{ opts.forms.bigpackRecordForm.name.$error.maxlength && opts.forms.bigpackRecordForm.$submitted }" class=help-block>昵称字数太多.</p> <p show="{ opts.forms.bigpackRecordForm.name.$error.required && opts.forms.bigpackRecordForm.$submitted }" class=help-block>昵称未填写.</p> </div> </div> <div> <order-record-voice store-field=bigpack> </order-record-voice></div> <div class=recoding_desc> <div if="{ (opts.recordState.stop || opts.recordState.start) && (opts.order.gift && opts.order.gift.scene && opts.order.gift.scene === \'poi\' || opts.order.gift.status.poi) }"> <span>录制一段语音，收礼人到店领取该礼物时</span> <span>即可听到你的话</span> </div> <div if="{ (opts.recordState.stop || opts.recordState.start) && (opts.order.gift && opts.order.gift.scene && opts.order.gift.scene === \'logistics\' || opts.order.gift.status.logistics)  }"> <span>录制一段语音，收礼人收到礼物后</span> <span>扫描语音码，即可听到你的话</span> </div> </div> </form> </div> </div>'},function(e,t){e.exports='<div class=bigpack_subscribe> <div class=subscribe_wrap> <div class=subscribe_cont> <div class=pack_title style="width:{ opts.clientWidth - 24 }px"> <span><img riot-src="{ opts.merchant.pubno.head_img }"/></span> <span style="width:{ opts.clientWidth - 76 }px">商家{ opts.merchant.pubno.nick_name }发给你一个大礼包 </span> </div> <div class=mer_code> <div class=explain> <span>请长按二维码关注商家公号</span> <span>获取该大礼包</span> </div> <div class=merchant_name> <span>{ opts.merchant.pubno.nick_name }</span> </div> <div class=merchant_code style="width:{ opts.clientWidth/2 + 50 }px;height:{ opts.clientWidth/2 + 50 }px"> <img riot-src="{ opts.order.qrcode.bigpack_sub_src }" alt=""/> <div class=radius> <img src=https://img.91pintuan.com/songli/client/icon/top.png /> <img src=https://img.91pintuan.com/songli/client/icon/right.png /> <img src=https://img.91pintuan.com/songli/client/icon/bottom.png /> <img src=https://img.91pintuan.com/songli/client/icon/left.png /> </div> </div> </div> </div> </div> <icon-href theme=white></icon-href> </div>'},function(e,t){e.exports='<router-outlet> <div class=gift_detail> <div class=detail_cont> <div class=gift_img> <img if="{ parent.opts.gift.info.cover }" riot-src="{ \'http://\' + config.phtUri + parent.opts.gift.info.cover }" style="width:{ parent.opts.clientWidth - 28 }px;height:{ parent.opts.clientWidth - 28 }px"> <img if="{ !parent.opts.gift.info.cover }" riot-src="{ \'https://img.91pintuan.com/songli/icon-herf/present_sent_demo.png\' }" style="width:{ parent.opts.clientWidth - 28 }px;height:{ parent.opts.clientWidth - 28 }px"> </div> <div class=gift_info> <p class=name>{ parent.opts.gift.info.name }</p> <p class=lead>{ parent.opts.gift.info.lead }</p> <div class=receivers> <div class=used if="{ parent.opts.gift.num.pay > 0 }"> <span><img riot-src="{ \'https://img.91pintuan.com/songli/icon-herf/gift-box.png\'} "/></span> <span>{ ( parent.opts.gift.info && parent.opts.gift.info.benedictory && parent.opts.gift.info.benedictory.title) ? parent.opts.gift.info.benedictory.title.replace(\'{NUM}\', (parent.opts.gift.num.receivers || 0)) : \'已有\' + (parent.opts.gift.num.receivers || 0) + \'人收到了礼物\' } </span> </div> <div if="{ parent.opts.gift.num.pay <= 0 }"></div> </div> <div class=price> <span>{ $.util.filter.currency(parent.opts.gift.info.price) }</span> </div> </div> <div class=detail_info> <hr> <img class=title_img riot-src="{ \'https://img.91pintuan.com/songli/word_gift_detail.png\' }"/> <hr class=hr> <raw content="{ parent.opts.gift.info.detail }"></raw> </div> <bottom></bottom> </div> <div class=btn_fixed></div> <div class=btn_give if="{ !parent.opts.gift.num.stock || ((parent.opts.gift.num.stock - parent.opts.gift.num.subpay) > 0) }"> <a if="{ !parent.opts.gift.num.stock || ((parent.opts.gift.num.stock - parent.opts.gift.num.subpay) > 0) }" class="fl btn_one" href="{ \'/gift/\' + parent.opts.gift.id + \'/order/record?type=one2one\' }">送一人</a> <a if="{ !parent.opts.gift.num.stock || ((parent.opts.gift.num.stock - parent.opts.gift.num.subpay) > 0) }" class="fr btn_more" href="{ \'/gift/\' + parent.opts.gift.id + \'/order/record?type=one2many\' }">送多人</a> </div> <div class=btn_online if="{ !parent.opts.gift.status.online || ( parent.opts.gift.num.stock != 0 && ((parent.opts.gift.num.stock - parent.opts.gift.num.subpay) <= 0) ) }"> <a if="{ !parent.opts.gift.status.online }" disabled=true>抱歉，该商品已售罄</a> <a if="{ parent.opts.gift.num.stock != 0 && ((parent.opts.gift.num.stock - parent.opts.gift.num.subpay) <= 0) }" disabled=true>抱歉，该商品已售罄</a> </div> </div> </router-outlet>'},function(e,t){e.exports='<on-scroll infinite-scroll="{ opts.nextPage }" infinite-scroll-disabled="{ opts.gifts.busy }" infinite-scroll-distance="{ 100 }"> <div class=gift-list> <div class="list_item fl" each="{ gift in parent.opts.gifts.items }" onclick=parent.parent.onLink style="width:{ parent.parent.opts.clientWidth/2}px"> <div class=list_img style="width:{ parent.parent.opts.clientWidth/2}px;height:{ parent.parent.opts.clientWidth/2 -12 }px"> <img riot-src="{ gift.info.cover ? \'http://\' + config.phtUri + gift.info.cover : app.config.images.GIFT_DEF_COVER }" if="{ gift.info.cover }" style="width:{ parent.parent.opts.clientWidth/2 -12 }px;height:{ parent.parent.opts.clientWidth/2 -12 }px"> </div> <div class=gift_name style="width:{ parent.parent.opts.clientWidth/2 -12 }px"> <span>{ gift.info.name }</span> </div> <div class=gift_price style="width:{ parent.parent.opts.clientWidth/2 -12 }px"> <span>{ $.util.filter.currency(gift.info.price) }</span> </div> </div> </div> </on-scroll> '},function(e,t){e.exports='<div class=poi-address if="{ opts.pois.length }"> <div class="list-group address_list"> <a href=javascript:void(0) class="list-group-item poiList" each="{ poi in opts.pois }" onclick=selPoi(poi)> <span class="poi-com point"></span> <span class="poi-com point1" if="{ parent.opts.poi.id === poi.id }"></span> <div class=resLeft> <span class=distance if="{ poi.distance }">{poi.distance}km</span> <h4 class=list-group-item-heading> { poi.base_info.business_name + (poi.base_info.branch_name ? \'(\' + poi.base_info.branch_name + \')\' : \'\') } </h4> <p class=list-group-item-text> <span>{ poi.base_info.province }</span> <span>{ poi.base_info.city }</span> <span>{ poi.base_info.district }</span> <span>{ poi.base_info.address }</span> </p> </div> </a> </div> </div> <div if="{ !opts.pois.length && !opts.poiLoaded}" class=beyWamp> <div class=beyond> <span>:( 您当前位置距离该商家门店过远</span><br/> <button class=bey_back onclick=dismiss>返回</button> </div> </div>'},function(e,t){e.exports='<div class=gift_share> <div class=img_bg style="width:{ opts.clientWidth - 20 }px"> <img src=https://img.91pintuan.com/songli/icon-herf/img-share-bg.png /> </div> <div class=share_box> <div class=share_head> <div class=gift_img> <img riot-src="{ opts.gift.info.cover ? app.config.phtUri + opts.gift.info.cover : app.config.images.GIFTSHRAE_DEF_COVER }"> </div> </div> <div class=share_gift_name> <span>{ opts.gift.info.name }</span> </div> <div class=share_main> <div class=main_top> <span><img src=https://img.91pintuan.com/songli/icon-herf/gift-box.png /></span> <span>{ (opts.gift.info && opts.gift.info.benedictory && opts.gift.info.benedictory.title) ? opts.gift.info.benedictory.title.replace(\'{NUM}\', opts.receivedCount) : \'已有\' + opts.receivedCount + \'人收到了礼物\' } </span> </div> <div class=main_bottom> <imarquee direction=down height=200 gap=40 speed=3000 items="{ opts.suborders }"> <ul class=scroll_box id=marquee_content> <li each="{ suborder in items }"> <img src="{ suborder.headimgurl }"/> <span>{ parent.parent.getSuborderInfo(opts.gift, suborder) }</span> </li> </ul> </imarquee> </div> </div> <div class=share_foot> <a href="/gift/{ opts.gift.id }">我也要送礼</a> </div> </div> <icon-href theme=white></icon-href> </div> '},function(e,t){e.exports='<on-scroll infinite-scroll="{ opts.nextPageCreator(opts.force) }" infinite-scroll-disabled="{ opts.orders.busy }" infinite-scroll-distance="{ 100 }"> <div class=order_list> <a class=order_href each="{ order in parent.opts.orders.items }" href="{ \'/personal/order/\' + order.id + \'/info\' }"> <div class=order_wrap> <div class=order_head> <span> <img riot-src="{ order.gift.info.cover ? app.config.phtUri + order.gift.info.cover : app.config.images.GIFTSHRAE_DEF_COVER }"> </span> <span style="width:{ parent.parent.opts.clientWidth - 120 }px">{ order.gift.info.name }</span> </div> <div class=order_main> <ul> <li> <span>单&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;价：</span> <span>{ $.util.filter.currency(order.gift.info.price) }</span> <em>x{ order.capacity }</em> </li> <li> <span>支付金额：</span> <span>{ $.util.filter.currency(order.gift.info.price * order.capacity) }</span> </li> <li> <span>下单时间：</span> <span>{ $.util.filter.date(order.time.add, \'yyyy-MM-dd hh:mm:ss\') }</span> </li> </ul> </div> <div class=order_foot> <span>订单号 { order.serial }</span> <span><img src=https://img.91pintuan.com/songli/client/poi-right.png /></span> </div> </div> </a> </div> </on-scroll> '},function(e,t){e.exports="<div class=order_pay> <div class=payment> <div class=pay_info> <div class=pay_nl> <span>{ opts.gift.info.name }</span> <span>{ opts.gift.info.lead }</span> </div> <div class=pay_num> <span>{ $.util.filter.currency(opts.gift.info.price) }</span> <span>{ opts.order.capacity }份</span> </div> </div> <div class=pay_total> <span>总 计</span> <span>{ $.util.filter.currency(opts.gift.info.price * opts.order.capacity) }</span> </div> <div class=pay_now> <a class=pay_btn onclick=opts.wxPay.bind(this) disabled=\"{ submiting }\">{ submiting ? '支付中...' : '支付' }</a> </div> </div> </div>"},function(e,t){e.exports='<div class=pre_receive> <div class=pre_wrap> <div class=pre_cont> <img class=right_top_corner src=https://img.91pintuan.com/songli/i.png /> <div class=head_portrait> <img riot-src="{ opts.order.sender.info.headimgurl }"/> </div> <div class=head_nickname> <span>{ opts.order.sender.info.nickname }送给你一份礼物</span> </div> <div class=receive_status> <div if="{ opts.isAvailable }"> <div if="{ opts.type === \'one2one\' }"> <span class=gift_num>请尽快领取</span> <span class=receive_num if="{ opts.order.gift.scene === \'poi\' }">领取后到店使用</span> <span class=receive_num if="{ opts.order.gift.scene === \'logistics\' }">领取后将快递配送</span> </div> <div if="{ opts.type === \'one2many\' }"> <span class=gift_num>还有{ opts.availableCount }份 </span> <span class=receive_num>{ opts.receivedCount }人已领取</span> </div> </div> <div if="{ !opts.isAvailable }"> <div if="{ opts.type === \'one2one\' }"> <span class=gift_num>礼物已被抢完</span> <span class=receive_num>{ opts.order.receivers[0].name }</span> </div> <div if="{ opts.type === \'one2many\' }"> <span class=gift_num>礼物已被抢完</span> <br/> <span class=receive_num>{ opts.receivedCount }人已领取</span> </div> </div> </div> <div class=gift_inform> <span>{ opts.order.sender.info.nickname }为你准备了一份礼物：{ opts.order.gift.info.name }。并对你说了一段话，赶快领取吧！</span> </div> <div class=btn_group> <a if="{ opts.isAvailable }" href="/order/{ opts.order.id }/receive" class=btn_receive>领取礼物</a> <a if="{ !opts.isAvailable }" href="/gift/{ opts.order.gift.id }" class=btn_send>我也要送礼</a> <span if="{ opts.type === \'one2many\' && opts.order.gift.scene === \'poi\' }">领取后到店使用</span> </div> </div> <order-interact if="{ opts.isInteract }" order="{ order }"></order-interact> </div> <icon-href theme=white></icon-href> </div>'},function(e,t){e.exports='<div class=ready_single> <div class=single_wrap> <div class=receive_logistics> <img class=right_top_corner src=https://img.91pintuan.com/songli/i.png> <div class=head_portrait> <img riot-src="{ opts.order.sender.info.headimgurl }"/> </div> <div class=gift_inform> <span if="{ opts.isShare }" class=receive-present-text>已经完成支付！想要送给谁写下收礼人的收货信息；不知道地址可以直接发给对方填写</span> <span if="{ !opts.isShare }" class=receive-present-text>你的朋友{ opts.order.sender.info.nickname }为你准备了一份礼物，并对你说了一段话表达祝福。赶快领取吧，写下地址收到礼物时扫描二维码听Ta对你说~</span> </div> <form class=form_group ref=orderReceiveLogisticsForm novalidate> <input class=form_name type=text ref=consignee placeholder=收礼人姓名> <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.consignee.$error.required }" class=help-block>* 请填写收货人姓名</p> <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.consignee.$error.maxlength }" class=help-block>* 收货人姓名过长</p> <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.consignee.$error.minlength }" class=help-block>* 收货人字数过短</p> <input class=form_tel type=tel ref=telephone placeholder=手机号码> <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.telephone.$error.required" class=help-block>* 请填写手机号码.</p> <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.telephone.$error.minlength" class=help-block>* 手机号码最少六位.</p> <div class=form_addr if="{ (opts.order.gift.scene || opts.order.gift.scene === \'logistics\') }"> <textarea rows=2 ref=address class=form_textarea placeholder=请留下详细收货地址，确保能收到礼物></textarea> <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.address.$error.required }" class=help-block>* 请输入收货人的详细地址.</p> <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.address.$error.maxlength }" class=help-block>* 配送地址字数太多.</p> </div> <div class=btn_group> <button type=submit class=btn_done onclick=onSubmit>完成</button> <a href=javascript:void(0) if="{ opts.isShare }" class=btn_share onclick=opts.share>不知道地址，发给好友填写</a> </div> </form> </div> </div> <icon-href theme="{ white }"></icon-href> </div>'},function(e,t){e.exports='<div class=receive_poi> <div class=receive_wrap> <div class=poi_cont> <div class=gift_info> <div class=info> <div class=title> <span><img riot-src="{ app.config.phtUri + opts.order.gift.info.cover }"></span> <span>礼品</span> <span style="width:{ (opts.clientWidth-24) *.85 - 80 }px">{ opts.order.gift.info.name }</span> </div> </div> <div class=step> <img src=https://img.91pintuan.com/songli/client/receive-step-1.png alt=""/> </div> </div> <form class=form-recpoi ref=orderReceivePoiForm novalidate> <div class=form_common> <label class="form_label fl">姓名</label> <input class=fr type=text ref=consignee placeholder=收礼人姓名> <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.consignee.$error.required }" class=help-block>* 请填写收货人姓名</p> <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.consignee.$error.maxlength }" class=help-block>* 收货人姓名过长</p> <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.consignee.$error.minlength }" class=help-block>* 收货人字数过短</p> </div> <div class=form_common> <label class="form_label fl">手机号</label> <input class=fr type=tel ref=telephone placeholder=手机号码> <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.telephone.$error.required" class=help-block>* 请填写手机号码.</p> <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.telephone.$error.minlength" class=help-block>* 手机号码最少六位.</p> </div> <div class="form_common form_poi" onclick=selPoi> <label class="label_poi fl" for=poi>使用门店</label> <span class="fl poi" if="{ !opts.poiLoaded }">门店加载中</span> <span class="fl poi" if="{ opts.poiLoaded }">{ opts.poi ? opts.poi.base_info.business_name : \'请选择门店\' }</span> <input type=hidden ref=poi> <span class="fr right"><img src=https://img.91pintuan.com/songli/client/poi-right.png alt=""/></span> <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.poi.$error.required }" class=help-block>* 请选择门店</p> </div> <button type=submit class=btn_next onclick=onSubmit>下一步</button> </form> </div> </div> <icon-href theme="{ white }"></icon-href> </div>'},function(e,t){e.exports='<div if="{ opts.order.gift.scene === \'logistics\' }" class=received_guide> <div class=guide_wrap> <div class=received_cont> <img class=right_top_corner src=https://img.91pintuan.com/songli/i.png> <div class=head_portrait> <img riot-src="{ opts.order.sender.info.headimgurl }"/> </div> <div class=head_nickname> <span>{ opts.order.sender.info.nickname }的礼物</span> </div> <div if="{ opts.order.capacity === 1 }"> <div class=receive_status> <span class=gift_num>礼物已被领取</span> <span class=receive_num>等待商家发货</span> </div> <div class=receiver_info> <div><span>收礼人：</span><span>{ opts.order.receivers[0].consignee }</span></div> <div><span>手机号：</span><span>{ opts.order.receivers[0].telephone }</span></div> <div><span>地&nbsp;&nbsp;&nbsp;&nbsp;址：</span><span>{ opts.order.receivers[0].address }</span></div> </div> <div class=btn_continue> <a href="/gift/{ opts.order.gift.id }">我也要送礼</a> </div> </div> <div if="{ opts.order.capacity > 1 }"> <div class=receive_status> <span class=gift_num>礼物已被领取</span> <span class=receive_num>还有{ opts.order.capacity - opts.order.receivers.length }份</span> </div> <div class=gift_inform> <span>你已成功领取{ opts.order.sender.info.nickname }的礼物。等待商家发货吧。不要忘了除了礼物{ opts.order.sender.info.nickname }还对你说了一段话，收到礼物时扫描语音码，听听ta都说了些什么吧。</span> </div> <div class=btn_continue> <a href="/gift/{ opts.order.gift.id }">我也要送礼</a> </div> </div> </div> <order-interact></order-interact> </div> <icon-href theme="{ white }"></icon-href> </div> <div if="{ opts.order.gift.scene === \'poi\' }" class=received_guide> <div class=guide_wrap> <div class=received_cont> <img class=right_top_corner src=https://img.91pintuan.com/songli/i.png /> <div class=head_portrait> <img riot-src="{ opts.order.sender.info.headimgurl }"/> </div> <div class=head_nickname> <span>{ opts.order.sender.info.nickname }的礼物</span> </div> <div class=receive_status> <span class=gift_num>你已领取礼物 </span> <span class="receive_num color-pink" href="/order/{ opts.order.id }/received">查看礼物详情</span> </div> <div class=gift_inform> <span>你已成功领取{ opts.order.sender.info.nickname }的礼物。使用时请到你所选择的对应门店，点击立即使用将二维码消费凭证出示给商家，即可领取礼物。</span> </div> <div class=user_intr> <span><img src=https://img.91pintuan.com/songli/client/vcode-icon.png></span> <span>到店使用时请向商家出示二维码</span> </div> <div class=btn_group> <a href="/order/{ opts.order.id }/received" class=btn_use>立即使用</a> <a href="/gift/{ opts.order.gift.id }" class=btn_send>我也要送礼</a> </div> </div> <order-interact></order-interact> </div> <icon-href theme="{ white }"></icon-href> </div>'},function(e,t){e.exports='<div class=received_result> <div class=received_wrap> <div class=reeceived_cont> <div class=gift_info href=""> <div class=info> <div class=title> <span><img riot-src="{ app.config.phtUri + opts.order.gift.info.cover }"></span> <span>礼品</span> <span style="width:{ (opts.clientWidth-24) *.85 - 80 }px">{ opts.order.gift.info.name }</span> </div> </div> </div> <div class=use_state if="{ opts.suborder }"> <span>礼物券已被领取</span> <span class=color-pink>{ opts.suborder.status.shipping ? \'已使用\' : \'未使用\' }</span> </div> <div class=gift_code if="{ suborder} "> <span><img riot-src="{ opts.suborder.qrcode.src }"></span> <span>{ opts.suborder.id }</span> <span>请保留二维码消费凭证</span> <span>到店使用时请向商家出示二维码</span> </div> <div class=rec_info if="{ opts.suborder }"> <ul> <li onclick=openMerchant> <div class="rec-l fl"> <span>联系商家</span> <span>{ opts.merchant.pubno.nick_name }</span> </div> <div class="rec-r fl"> <img class=merchant riot-src="{ opts.merchant.pubno.head_img }"> <img class="icon-r fr" src=http://91pt.oss-cn-beijing.aliyuncs.com/songli/client/received.png> </div> </li> <li onclick=openLocation> <div class="rec-l fl"> <span>自提门店</span> <span>{ opts.suborder.poi.base_info.business_name }</span> </div> <div class="rec-r fl"> <img class=poi-icon src=http://91pt.oss-cn-beijing.aliyuncs.com/songli/client/received-address.png> <img class="icon-r fr" src=http://91pt.oss-cn-beijing.aliyuncs.com/songli/client/received.png> </div> </li> <li> <div class=clear></div> <div class=rec-l> <span>领取人信息</span> <span>{ opts.suborder.consignee + \' \' + opts.suborder.telephone }</span> </div> </li> </ul> </div> </div> </div> <icon-href theme="{ white }"></icon-href> </div>'},function(e,t){e.exports='<form class=record ref=orderRecordForm novalidate> <div class=sound-record> <div if="{ opts.order.status.bigpack }" class=bigpack_recoding> <div class=start_recoding> <img if="{ opts.user.photo }" riot-src="{ opts.user.photo }" alt=""/> <span>请开始录音</span> </div> </div> <div if="{ opts.order.type === \'one2one\' }" class=single> <img src=https://img.91pintuan.com/songli/word_send_to.png /> <input type=text ref=name placeholder=Ta的名字 /> <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.name.$error.required }" class=help-block>昵称未填写</p> <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.name.$error.maxlength }" class=help-block>收货人昵称过长</p> <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.name.$error.minlength }" class=help-block>收货人昵称过短</p> </div> <div if="{ opts.order.type === \'one2many\' }" class=multiple> <img src=https://img.91pintuan.com/songli/gift_copies-more.png /> <div class=input-group> <span class=input-left> <button type=button onclick=reduCapacity class=input-lr> <span> - </span> </button> </span> <span class=input-middle> <input type=number ref=capacity value="{ opts.order.capacity }"> </span> <span class=input-right> <button type=button onclick=incrCapacity class=input-lr data-type=plus> <span> + </span> </button> </span> <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.capacity.$error.required }" class=help-block>礼物份数至少是2份</p> <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.capacity.$error.min }" class=help-block>礼物份数至少是2份</p> <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.capacity.$error.max }" class=help-block>礼物份数至多9999份</p> </div> </div> <order-record-voice></order-record-voice> <div class=recoding_desc> <div if="{ (opts.recordState.stop || opts.recordState.start) && (opts.order.gift && opts.gift.scene && opts.gift.scene === \'poi\' || opts.gift.status.poi) }"> <span>录制一段语音，收礼人到店领取该礼物时</span> <span>即可听到你的话</span> </div> <div if="{ (opts.recordState.stop || opts.recordState.start) && (opts.order.gift && opts.gift.scene && opts.gift.scene === \'logistics\' || opts.gift.status.logistics)  }"> <span>录制一段语音，收礼人收到礼物后</span> <span>扫描语音码，即可听到你的话</span> </div> </div> </div> </form> '},function(e,t){e.exports='<div class=voice-box> <div class=voice-process> <div if="{ opts.order.type === \'one2one\' }"><img src=https://img.91pintuan.com/songli/word_say_to.png /></div> <div if="{ opts.order.type === \'one2many\' }"><img src=https://img.91pintuan.com/songli/word-zhufu_newyear.png /></div> <order-record-timer interval=1000 countdown=60 autostart=false> </order-record-timer> </div> <div class=record-before if="{ opts.recordState.stop }"> <img src=https://img.91pintuan.com/songli/record.png onclick=record /> <span class=hint>点击开始录音</span> </div> <div class=record-before if="{ opts.recordState.start }"> <img src=https://img.91pintuan.com/songli/re_stop.png onclick=stop /> <span class=hint>结束录音</span> </div> <div class=record-after if="{ opts.recordState.record }"> <div class=left-button onclick=playVoice> <img src=https://img.91pintuan.com/songli/play_red.png /> <label class=hint>播放</label> </div> <div class=left-button onclick=rerecord> <img src=https://img.91pintuan.com/songli/re_record.png /> <label class=hint>重录</label> </div> <div class=right-button onclick=parent.onSubmit.bind(parent)> <img src=https://img.91pintuan.com/songli/next_step.png /> <label class=hint>下一步</label> </div> </div> </div>'},function(e,t){e.exports='<div class=subscribe> <div class=subscribe_wrap> <div class=subscribe_cont> <div class=gift_info> <div class=info> <div class=title> <span><img riot-src="{ app.config.phtUri + opts.order.gift.info.cover }"></span> <span>礼品</span> <span>{ opts.order.gift.info.name }</span> </div> </div> <div class=step> <img src=https://img.91pintuan.com/songli/client/receive-step-2.png alt=""/> </div> </div> <div class=guidance> <span>长按二维码关注公号</span> <span>公号将会发送礼物消费凭证</span> </div> <div class=merchant_code style="width:{ opts.clientWidth/2 + 40 }px;height:{ opts.clientWidth/2 + 40 }px"> <div class=code style="width:{ opts.clientWidth/2 + 40 }px"> <img if="{ opts.qrcode }" riot-src="{ \'https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=\' + opts.qrcode }"/> </div> <div class=radius> <img src=https://img.91pintuan.com/songli/client/top.png /> <img src=https://img.91pintuan.com/songli/client/right.png /> <img src=https://img.91pintuan.com/songli/client/bottom.png /> <img src=https://img.91pintuan.com/songli/client/left.png /> </div> </div> <div class=past> <span>如已关注，公号已经发送</span> </div> </div> </div> <icon-href theme=white></icon-href> </div>'},function(e,t){e.exports='<router-outlet> <div class=order_detail> <div class=order_wrap> <div class=order_cont> <div class=order_head> <span> <img riot-src="{ parent.opts.order.gift.info.cover ? app.config.phtUri + parent.opts.order.gift.info.cover : app.config.images.GIFTSHRAE_DEF_COVER }"> </span> <span style="width:{ parent.opts.clientWidth - 95 }px">{ parent.opts.order.gift.info.name }</span> </div> <div class=order_main> <ul> <li> <span>单价：</span> <span>{ $.util.filter.currency(parent.opts.order.gift.info.price) }</span> </li> <li> <span>数量：</span> <span>{ parent.opts.order.capacity }份</span> </li> <li> <span>总价：</span> <span>{ $.util.filter.currency(parent.opts.order.gift.info.price * parent.opts.order.capacity) }</span> </li> <li> <span>下单时间：</span> <span>{ $.util.filter.date(parent.opts.order.time.add) }</span> </li> <li if="{ parent.opts.order.receivers[0].express.no }"> <span>快递单号：</span> <span>{ parent.opts.order.receivers[0].express.no }</span> </li> </ul> </div> <div class=order_state if="{ parent.opts.order.capacity == 1 }"> <div class=title if="{ parent.opts.suborder && ( parent.opts.suborder.status.read || parent.opts.suborder.status.shipping || parent.opts.suborder.telephone || parent.opts.order.time.pay) }"> <span>礼物状态 </span> </div> <ul> <li if="{ parent.opts.suborder.status.read }"> <span>{ $.util.filter.date(parent.opts.suborder.status.read_date) }</span> <span>已收货</span> </li> <li if="{ parent.opts.suborder.status.shipping }"> <span>{ $.util.filter.date(parent.opts.suborder.status.shipping_date) }</span> <span>已发货</span> </li> <li if="{ parent.opts.suborder && parent.opts.suborder.telephone }"> <span>{ $.util.filter.date(parent.opts.suborder.fillinDate) }</span> <span>已领取</span> </li> <li> <span>{ parent.opts.suborder && parent.opts.order.time.pay ? $.util.filter.date(parent.opts.order.time.pay) + \'下单\' : \'\' }</span> <a if="{ parent.opts.suborder && parent.opts.suborder.telephone }" ui-sref="order.detail.one2one-address({id: order.id})"> <em>礼物已被领取</em> <em><img src=https://img.91pintuan.com/songli/client/poi-right.png /></em> </a> <a if="{ !parent.opts.suborder || !parent.opts.suborder.telephone }" ui-sref="order.detail.one2one-address({id: order.id})"> <em>1份礼物未被领取</em> <em><img src=https://img.91pintuan.com/songli/client/poi-right.png /></em> </a> </li> </ul> </div> <div class=order_state if="{ parent.opts.order.capacity > 1 }"> <div class=title if="{ parent.opts.listenedNum || parent.opts.shippedNum || parent.opts.receivedNum || parent.opts.order.time.pay }"> <span>礼物状态 </span> </div> <ul> <li class=receiver if="{ parent.opts.listenedNum != 0 }"> <span>{ $.util.filter.date(parent.opts.readTime) }</span> <span onclick=parent.listened.bind(parent)> <em>已收货 { parent.opts.listenedNum }</em> <em><img src=https://img.91pintuan.com/songli/client/poi-right.png /></em> </span> </li> <li if="{ parent.opts.shippedNum != 0 }"> <span>{ $.util.filter.date(parent.opts.shippedTime) }</span> <span onclick=parent.shipped.bind(parent)> <em>已发货 { parent.opts.shippedNum }</em> <em><img src=https://img.91pintuan.com/songli/client/poi-right.png /></em></span>  </li> <li if="{ parent.opts.receivedNum != 0 }"> <span>{ $.util.filter.date(parent.opts.receivedTime) }</span> <span onclick=parent.received.bind(parent)> <em>已领取 { parent.opts.receivedNum }</em> <em><img src=https://img.91pintuan.com/songli/client/poi-right.png /></em> </span> </li> <li> <span>{ $.util.filter.date(parent.opts.order.time.pay) }</span> <span onclick=parent.jumpToAddressCard.bind(parent)> <em>{ parent.opts.order.capacity - parent.opts.receivedNum === 0 ? \'礼物已被领完\' : parent.opts.order.capacity - parent.opts.receivedNum + \'份礼物未领取\' }</em> <em><img src=https://img.91pintuan.com/songli/client/poi-right.png /></em> </span> </li> </ul> </div> </div> </div> </div> </router-outlet> '},function(e,t){function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function n(e,t){return function(r){return e(t(r))}}function o(e){return!!e&&"object"==typeof e}function i(e){if(!o(e)||f.call(e)!=a||r(e))return!1;var t=d(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}var a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,p=u.hasOwnProperty,l=c.call(Object),f=u.toString,d=n(Object.getPrototypeOf,Object);e.exports=i},function(e,t){function r(e){return!!e&&"object"==typeof e}function n(e){return"string"==typeof e||!s(e)&&r(e)&&a.call(e)==o}var o="[object String]",i=Object.prototype,a=i.toString,s=Array.isArray;e.exports=n},function(e,t){function r(e){return!!e&&"object"==typeof e}function n(e){return"symbol"==typeof e||r(e)&&a.call(e)==o}var o="[object Symbol]",i=Object.prototype,a=i.toString;e.exports=n},function(e,t,r){function n(e){return null==e?void 0===e?u:s:c&&c in Object(e)?i(e):a(e)}var o=r(29),i=r(133),a=r(134),s="[object Null]",u="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=n},function(e,t){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,function(){return this}())},function(e,t,r){var n=r(135),o=n(Object.getPrototypeOf,Object);e.exports=o},function(e,t,r){function n(e){var t=a.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[u]=r:delete e[u]),o}var o=r(29),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,u=o?o.toStringTag:void 0;e.exports=n},function(e,t){function r(e){return o.call(e)}var n=Object.prototype,o=n.toString;e.exports=r},function(e,t){function r(e,t){return function(r){return e(t(r))}}e.exports=r},function(e,t,r){var n=r(131),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},function(e,t){function r(e){return null!=e&&"object"==typeof e}e.exports=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{
value:!0}),t.provide=t.connect=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),c=o(u),p=r(146),l=r(13),f=n(l),d=r(33),h=n(d),y=r(12),v=function(){function e(t){var r=t.container,n=t.reducer,o=t.middlewares,i=t.state,s=void 0===i?{}:i;if(a(this,e),!r)throw new Error("a container expected.");this.framework=c,this.container=r,this.reducer=n,this.middlewares=o,this.buildInProps=["env","entry","context","mode"],this._mode="hash",this._store=(0,p.configureStore)(s,n,o,this._mode),this.router(h.default),this._context={store:this._store,hub:{},tags:{}},this.emitter=c.observable({}),r.widgets=this._widgets={}}return s(e,[{key:"set",value:function(e,t){switch(this["_"+e]=t,this.accseptSet(e)){case"mode":var r={};this.store&&(r=this.store.getState()),this._store=(0,p.configureStore)(r,this.reducer,this.middlewares,this._mode),this._router&&(f.default.syncHistoryWithStore(this._router.hub,this._store),this.mixin("router",this._router));case"context":this.container=this._context}}},{key:"accseptSet",value:function(e){return this.buildInProps.indexOf(e)>=0?e:null}},{key:"router",value:function(e){return this._router=e,f.default.syncHistoryWithStore(this._router.hub,this._store),this}},{key:"registerWidget",value:function(e){var t=this,r=e.name,n=e.methods,o=c.mount(r)[0];this._context.tags[r]=o;var i=r.replace(/(\w)/,function(e){return e.toUpperCase()});this._widgets[i]={},n.forEach(function(e){t._widgets[i][e]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];o[e].apply(o,r)}})}},{key:"start",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(this.entry){e.next=4;break}throw new Error("application expected a entry component");case 4:this._router.hub.startup();case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"mixin",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.framework.mixin.apply(this.framework,t)}},{key:"on",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.emitter.on.apply(this.emitter,t)}},{key:"one",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.emitter.one.apply(this.emitter,t)}},{key:"off",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.emitter.off.apply(this.emitter,t)}},{key:"trigger",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.emitter.trigger.apply(this.emitter,t)}},{key:"container",get:function(){return this._container},set:function(e){this._container=e}},{key:"hub",get:function(){return this._router.hub}},{key:"context",get:function(){return this._context}},{key:"store",get:function(){return this._store},set:function(e){this._store=e}},{key:"mode",get:function(){return this._mode}},{key:"entry",get:function(){return this._entry}},{key:"env",get:function(){return this._env}}]),e}(),m=function(e){return new v(e)};t.default=m,t.connect=y.connect,t.provide=y.provide},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.connect=t.provider=t.Ninjia=t.router=void 0;var o=r(33),i=n(o),a=r(138),s=n(a),u=r(12),c=r(148),p=n(c),l=r(13),f=i.default.hub;console.warn("provider ............"),console.warn(u.provider),console.warn("connect ............."),console.warn(u.connect),f.view=(0,p.default)(f),f.on("history-pending",function(e,t){e&&e.tag&&e.tag.trigger("before-leave")}),f.on("history-resolve",function(e,t,r,n,o,i){var a=e&&e.tag||null,s=t&&t.tag||null;f.view.enter(s,a),f.view.leaveUpstream(s),i()}),f.on("history-success",function(e,t){}),t.router=i.default,t.Ninjia=s.default,t.provider=u.provider,t.connect=u.connect,t.view=l.view},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){try{return e.apply(t)}catch(e){return P.value=e,P}}function c(e){return function(t){return(0,h.bindActionCreators)(e,t)}}function p(e,t,r){var n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{pure:!0,withRef:!1},Boolean(e)),o=e||x,p=null;p="function"==typeof t?t:t?c(t):k;var h=r||j,y=pure&&h!==j,v=E++;return function(e){function t(e,t,r){var n=h(e,t,r);return n}var r="Connect("+S(e)+")",c=function(e){function c(){return i(this,c),a(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return s(c,e),l(c,[{key:"onCreate",value:function(e){this.version=v,this.store=e.store||(0,O.getProvider)(this).opts.store;var t=this.store.getState();(0,g.default)(this.store,'Could not find "store" in either the context or '+('opts of "'+r+'". ')+"Either wrap the root component in a Provider, "+('or explicitly pass "store" as a opt to "'+r+'".')),this.state={storeState:t},this.clearCache(),this.on("mount",this.componentDidMount),this.on("before-unmount",this.componentWillUnmount),this.on("update",this.render),f(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"onCreate",this).call(this,e)}},{key:"updateStateOptsIfNeeded",value:function(){var e=this.computeStateOpts(this.store,this.opts);return(!this.stateOpts||!(0,_.default)(e,this.stateOpts))&&(this.stateOpts=e,!0)}},{key:"updateDispatchOptsIfNeeded",value:function(){var e=this.computeDispatchOpts(this.store,this.opts);return(!this.dispatchOpts||!(0,_.default)(e,this.dispatchOpts))&&(this.dispatchOpts=e,!0)}},{key:"updateMergedOptsIfNeeded",value:function(){var e=t(this.stateOpts,this.dispatchOpts,this.opts);return!(this.mergedOpts&&y&&(0,_.default)(e,this.mergedOpts))&&(this.mergedOpts=e,!0)}},{key:"configureFinalMapState",value:function(e,t){var r=o(e.getState(),t),n="function"==typeof r;return this.finalMapStateToOpts=n?r:o,this.doStateOptsDependOnOwnOpts=1!==this.finalMapStateToOpts.length,n?this.computeStateOpts(e,t):r}},{key:"handleChange",value:function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!pure||t!==e){if(pure&&!this.doStateOptsDependOnOwnOpts){var r=u(this.updateStateOptsIfNeeded,this);if(!r)return;r===P&&(this.stateOptsPrecalculationError=P.value),this.haveStateOptsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.update({state:e})}}}},{key:"componentDidMount",value:function(){this.trySubscribe()}},{key:"componentWillUnmount",value:function(){this.tryUnsubscribe(),this.clearCache()}},{key:"trySubscribe",value:function(){n&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())}},{key:"tryUnsubscribe",value:function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}},{key:"isSubscribed",value:function(){return"function"==typeof this.unsubscribe}},{key:"clearCache",value:function(){this.dispatchOpts=null,this.stateOpts=null,this.mergedOpts=null,this.haveOwnOptsChanged=!0,this.hasStoreStateChanged=!0,this.haveStateOptsBeenPrecalculated=!1,this.stateOptsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToOpts=null,this.finalMapStateToOpts=null}},{key:"componentWillReceiveOpts",value:function(e){pure&&(0,_.default)(e,this.props)||(this.haveOwnPropsChanged=!0)}},{key:"computeStateOpts",value:function(e,t){if(!this.finalMapStateToOpts)return this.configureFinalMapState(e,t);var r=e.getState(),n=this.doStateOptsDependOnOwnOpts?this.finalMapStateToOpts(r,t):this.finalMapStateToOpts(r);return n}},{key:"render",value:function(){var e=this.haveOwnOptsChanged,t=this.hasStoreStateChanged,r=this.haveStateOptsBeenPrecalculated,n=this.stateOptsPrecalculationError,o=this.renderedElement;if(this.haveOwnOptsChanged=!1,this.hasStoreStateChanged=!1,this.haveStateOptsBeenPrecalculated=!1,this.stateOptsPrecalculationError=null,n)throw n;var i=!0,a=!0;pure&&o&&(i=t||e&&this.doStateOptsDependOnOwnOpts,a=e&&this.doDispatchOptsDependOnOwnOpts);var s=!1,u=!1;r?s=!0:i&&(s=this.updateStateOptsIfNeeded()),a&&(u=this.updateDispatchOptsIfNeeded());var c=!0;c=!!(s||u||e)&&this.updateMergedOptsIfNeeded(),!c&&o||(this.renderedElement=!0,Object.assign(this,d({},mergedOpts)))}}]),c}(e);return c.displayName=r,c.WrappedComponent=e,c}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=p;var h=r(10),y=r(1),v=(o(y),r(143)),m=(n(v),r(32)),g=n(m),b=r(141),w=(n(b),r(142)),_=n(w),O=r(31),x=function(e){return{}},k=function(e){return{dispatch:e}},j=function(e,t,r){return d({},r,e,t)},S=function(e){return e.displayName||e.name||"Component"},P={value:null},E=0},function(e,t){"use strict";function r(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t){"use strict";function r(e,t){if(e===t)return!0;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=Object.prototype.hasOwnProperty,i=0;i<r.length;i++)if(!o.call(t,r[i])||e[r[i]]!==t[r[i]])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t){"use strict";function r(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.view=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},u=r(12);t.view=function(e){return function(e){var t=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"onCreate",value:function(e){this.on("update",this.onUpate),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onCreate",this).call(this,e)}},{key:"onUpate",value:function(){"$enter"===this.enterOrLeaveState?this.trigger("entered"):this.trigger("leaved"),delete this.enterOrLeaveState}},{key:"shouldUpdate",value:function(){var e=u.provider.opts.store.getState();return(this.isShow()||isPresent(e))&&isPresent(e)&&e.lastAction.payload===this&&(c.enterOrLeaveState=e.lastAction.type,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldUpdate",this).call(this)),!1}},{key:"getTagName",value:function(){return this.opts&&this.opts.riotTag||this.root.localName}},{key:"isShow",value:function(){return this.opts.show||this.opts.$show}},{key:"isPresent",value:function(e){return"$enter"===e.lastAction.type||"$leave"===e.lastAction.type}}]),t}(e);return t}}},function(e,t){"use strict";function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o={$prev_state:"/",$prev_location:"/",$state:"/",$location:"/",$protocol:"http://",$host:"undefined"!=typeof window&&location&&location.host||"",data:{},stack:[],$views:{}},i=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"$enter":var i=t.payload.$routePath,a=r({},i,!0);return Object.assign({},e,{$views:n({},e.$views,a)});case"$leave":var i=t.payload.$routePath;return Object.assign({},e,{$views:Object.keys(e.$views).filter(function(e){return e!=i}).reduce(function(e,t){return e[t]=!0,e},{})});case"$route":return Object.assign({},e,{$prev_state:e.$state,$prev_location:e.$location,$state:t.payload.route.$state,$location:t.payload.route.$location,$protocol:t.payload.route.$protocol||e.$protocol,$host:e.$host,data:t.payload.route.ctx});case"$query":return Object.assign({},e,{$prev_state:e.$state,$prev_location:e.$location,$state:e.$state,$location:e.$location,$protocol:e.$protocol,$host:e.$host,data:Object.assign({},{request:{body:e.data.req.body,params:e.data.req.params,query:t.payload}})});case"$routeBusy":return Object.assign({},e,{busy:!0});case"$routeUnBusy":return Object.assign({},e,{busy:!1});default:return e}};t.default={route:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(147),s=n(a),u=r(10),c=r(13),p=n(c);t.configureStore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"browser",a=(0,u.combineReducers)(i({},t)),c=p.default.routerMiddlewareCreator(n);return(0,u.compose)(u.applyMiddleware.apply(void 0,[c].concat(o(s.default.values(r)))))(u.createStore)(a,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return Object.keys(e).map(function(t){return e[t]})},i=function(){return Object.assign.apply(Object,arguments)},a=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.keys(e).filter(function(e){return r.indexOf(e)>=0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},s=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.keys(e).filter(function(e){return r.indexOf(e)<0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},u=function e(t){if(!t)return t;var r,o=[Number,String,Boolean];if(o.forEach(function(e){t instanceof e&&(r=e(t))}),"undefined"==typeof r)if("[object Array]"===Object.prototype.toString.call(t))r=[],t.forEach(function(t,n,o){r[n]=e(t)});else if("object"==("undefined"==typeof t?"undefined":n(t)))if(t.nodeType&&"function"==typeof t.cloneNode)var r=t.cloneNode(!0);else if(t.prototype)r=t;else if(t instanceof Date)r=new Date(t);else{r={};for(var i in t)r[i]=e(t[i])}else r=t;return r},c={stringify:function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},parse:function(e){return e.split("&").reduce(function(e,t){var r=t.split("=");return e[r[0]]=r[1],e},{})}},p=null,l=function(e,t){clearTimeout(p),p=setTimeout(function(){e.apply(context),p=null},t)},f=function e(t,r){return t&&r&&"object"===("undefined"==typeof t?"undefined":n(t))&&"object"===("undefined"==typeof r?"undefined":n(r))?Object.keys(t).length===Object.keys(r).length&&Object.keys(t).reduce(function(n,o){return n&&e(t[o],r[o])},!0):t===r};t.default={values:o,mixin:i,querystring:c,throttle:l,clone:u,deepEqual:f,omit:s,pick:a}},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){r(this,e)}return n(e,[{key:"setHandler",value:function(e){this.handler=e}},{key:"enter",value:function(e,t,r){if(e)return e.trigger("enter",t),e.opts.show=!0,e.opts.hidden=!1,this.handler?this.handler("enter",e):void e.update()}},{key:"leaveUpstream",value:function(e){var t=this;if(e&&e.parent&&e.parent.tags&&e.parent.tags["router-outlet"]){var r=(e.parent.tags["router-outlet"].routes,e.parent.tags["router-outlet"].routes.filter(function(t){return t.tag&&t.tag!=e}));return!(!r||!r.length)&&(r.map(function(e){return e.tag}).forEach(function(r){r&&(r.opts.show||r.opts.$show)&&t.leaveDownstream(r,e)}),this.leaveUpstream(e.parent))}}},{key:"leaveDownstream",value:function(e,t){var r=this;if(e){this.leave(e,t);var n=e.tags["router-outlet"];if(n){var o=n.routes;o&&o.map(function(e){return e.tag}).forEach(function(t){if(t&&t.opts.$show&&!t.cache)return r.leave(t,e),r.leaveDownstream(t,e)})}}}},{key:"leave",value:function(e,t,r){if(e&&(e.trigger("leave",t),e.opts.show||e.opts.$show)){if(e.opts.show=!1,e.opts.hidden=!0,this.handler)return this.handler("leave",e);e.update()}}},{key:"init",value:function(e,t){e.opts.hidden=!0,e.opts.show=!1}}]),e}(),i=function(e){return new o(e)};t.default=i},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===r||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){y&&d&&(y=!1,d.length?h=d.concat(h):v=-1,h.length&&s())}function s(){if(!y){var e=o(a);y=!0;for(var t=h.length;t;){for(d=h,h=[];++v<t;)d&&d[v].run();v=-1,t=h.length}d=null,y=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var p,l,f=e.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:r}catch(e){p=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var d,h=[],y=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new u(e,t)),1!==h.length||y||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(r,n,o){var a=e(r,n,o),u=a.dispatch,c=[],p={getState:a.getState,dispatch:function(e){return u(e)}};return c=t.map(function(e){return e(p)}),u=s.default.apply(void 0,c)(a.dispatch),i({},a,{dispatch:u})}}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=o;var a=r(34),s=n(a)},function(e,t){"use strict";function r(e,t){return function(){return t(e.apply(void 0,arguments))}}function n(e,t){if("function"==typeof e)return r(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),o={},i=0;i<n.length;i++){var a=n[i],s=e[a];"function"==typeof s&&(o[a]=r(s,t))}return o}t.__esModule=!0,t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=t&&t.type,n=r&&'"'+r.toString()+'"'||"an action";return"Given action "+n+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function i(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof n)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var o="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof r(void 0,{type:o}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];"function"==typeof e[a]&&(r[a]=e[a])}var s,u=Object.keys(r);try{i(r)}catch(e){s=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(s)throw s;for(var n=!1,i={},a=0;a<u.length;a++){var c=u[a],p=r[c],l=e[c],f=p(l,t);if("undefined"==typeof f){var d=o(c,t);throw new Error(d)}i[c]=f,n=n||f!==l}return n?i:e}}t.__esModule=!0,t.default=a;var s=r(35),u=r(30),c=(n(u),r(36));n(c)},function(e,t,r){!function(t,r){var n=function(e){e=e||{};var t={},r=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(r,n){return"function"==typeof n&&(t[r]=t[r]||[]).push(n),e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(r,n){if("*"!=r||n)if(n)for(var o,i=t[r],a=0;o=i&&i[a];++a)o==n&&i.splice(a--,1);else delete t[r];else t={};return e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,r){function n(){e.off(t,n),r.apply(e,arguments)}return e.on(t,n)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(n){var o,i,a,s=arguments.length-1,u=new Array(s);for(a=0;a<s;a++)u[a]=arguments[a+1];for(o=r.call(t[n]||[],0),a=0;i=o[a];++a)i.apply(e,u);return t["*"]&&"*"!=n&&e.trigger.apply(e,["*",n].concat(u)),e},enumerable:!1,writable:!1,configurable:!1}}),e};e.exports=n}("undefined"!=typeof window?window:void 0)},function(e,t){riot.tag2("alert",'<div class="alert-container" if="{_alerts.length}"><div class="alert"><ul class="alert-list"><li each="{_alerts}"><b class="{icon: true, success: state === \'success\', warn: state === \'warn\', error: state === \'error\'}"></b><span>{msg}</span></li></ul></div></div>','alert .alert-container,[riot-tag="alert"] .alert-container,[data-is="alert"] .alert-container{ position: fixed; width: 100%; top: 0px; left: 0px; bottom: 0px; right: 0px; margin: auto; z-index: 9999; color: #82683A; } alert .alert,[riot-tag="alert"] .alert,[data-is="alert"] .alert{ margin: 0px auto; } alert .alert-list,[riot-tag="alert"] .alert-list,[data-is="alert"] .alert-list{ margin: 0px auto; padding: 0px; list-style-type: none; } alert .alert-list >li,[riot-tag="alert"] .alert-list >li,[data-is="alert"] .alert-list >li{ width: 200px; height: 40px; border-radius: 5px; line-height: 40px; padding: 0px 10px; margin: 10px auto; text-align: center; } alert .icon,[riot-tag="alert"] .icon,[data-is="alert"] .icon{ width: 8px; height: 8px; border: none; border-radius: 50em; display: inline-block; } alert .success,[riot-tag="alert"] .success,[data-is="alert"] .success{ width: 10px; height: 10px; margin-right: 5px; background: green; } alert .warn,[riot-tag="alert"] .warn,[data-is="alert"] .warn{ width: 10px; height: 10px; margin-right: 5px; background: yellow; } alert .error,[riot-tag="alert"] .error,[data-is="alert"] .error{ width: 10px; height: 10px; margin-right: 5px; background: red; }',"",function(e){"use strict";var t=this;this._alerts=[],this._busy=!1,this._during=3e3,this.add=function(e,r){t._alerts.push({state:e,msg:r}),t._busy||(t._busy=!0,t.routine())},this.routine=function(){return t.update(),t._alerts.length?void setTimeout(function(){t._alerts.splice(0,1),t.routine(),t.update()},t._during):t._busy=!1}})},function(e,t){riot.tag2("bottom",'<div class="bottom-ico"><a href="http://www.91songli.com/"><img riot-src="{\'https://img.91pintuan.com/songli/icon-herf/grey_icon_xx.png\'}" alt="logo"></a></div>',"","",function(e){})},function(e,t){riot.tag2("carousel",'<div class="{\'carousel-bt\' : itemForLoop.length > 1} carousel-container" riot-style="width: {document.body.offsetWidth}px; height: {(3*document.body.offsetWidth/4.3).toFixed(2)}px;"><yield if="{!itemForLoop}"></yield><div if="{itemForLoop}"><ul class="carousel-ul carousel-transition" riot-style="width: {(itemForLoop.length || 0)*100}%;"><li riot-style="width: {100/parent.itemForLoop.length}%" uid="id-{id}" each="{item in itemForLoop}"><div riot-style="height: {parent.opts.height}px; background-image: url({parent.opts.field ? parent.opts.prefix + item[parent.opts.field] + app.config.phtStlList : opts.default})" class="bgimage"></div></li></ul><div if="{itemForLoop.length > 1}" class="carousel-nav-container"><ul class="carousel-nav" riot-style="width: {itemForLoop.length*5 + (itemForLoop.length -1)*5}"><li each="{item, index in itemForLoop}"><b class="{\'carousel-nav-active\': index === 0, \'carousel-nav-default\': index != 0}" uid="id-{item.id}"></b></li></ul></div></div></div>',".carousel-container b{ width: 5px; height: 5px; display: block; border-radius: 50%; } .carousel-nav-container{ width: 100%; top: 50px; } .carousel-nav{ margin: 0px auto; padding: 0px; list-style-type: none; overflow: hidden; position: relative; top: -20px; } .carousel-nav li{ width: 5px; height: 5px; float: left; margin-right: 5px; } .carousel-nav li b{ display: block; width: 100%; height: 100%; border-radius: 50%; } .carousel-nav li:last-child{ margin-right: 0px; } .carousel-nav-default{ background: #000000; } .carousel-nav-active{ background: #FFFFFF; } .carousel-container{ overflow: hidden; } .carousel-transition{ transition: margin .5s; -moz-transition: margin .5s; -webkit-transition: margin .5s; -o-transition: margin .5s; } .carousel-ul{ margin: 0px; padding: 0px; list-style-type: none; } .carousel-ul li{ float: left; } .carousel-ul li div{ background-size: cover; background-repeat: no-repeat; background-position:center; } .carousel-bt{margin-bottom: -10px;}","",function(e){"use strict";var t=this;this.timer=null,this.busy=!1,this.itemForLoop=null,this.during=5e3,this.on("unmount",function(){return t.cancel()}),this.parent.on("update",function(){return setTimeout(t.init,10)}),this.parent.on("unmount",function(){return t.cancel()}),this.parent.on("leave",function(){return t.cancel()}),this.init=function(){t.parent.opts.$show&&t.snapshot!==t.opts.itemForLoop&&(t.itemForLoop=t.opts.itemForLoop,t.currItem=t.opts.itemForLoop[0],t.itemForLoop.length>1&&(setTimeout(function(){t.root.addEventListener("touchstart",r),t.root.addEventListener("touchmove",n),t.root.addEventListener("touchend",o)},50),t.routine()),t.update())},this.startPosX=null,this.moveDistance=null,this.inTouching=!1,this.getListNode=function(){return t.root.querySelector(".carousel-ul")};var r=function(e){t.busy||(t.clear(),t.busy=!0,t.inTouching=!0,t.startPosX=e.touches[0].clientX,$(t.getListNode()).removeClass("carousel-transition"))},n=function(e){if(t.inTouching){var r=e.touches[0].clientX,n=t.root.querySelector(".carousel-container");t.moveDistance=r-t.startPosX;var o=t.moveDistance/n.clientWidth*100,i=t.opts.itemForLoop.indexOf(t.currItem),a="-"+100*i;t.getListNode().style.marginLeft=parseFloat(a,10)+o+"%"}},o=function(e){if(t.inTouching){var r=(t.getListNode(),parseFloat(t.moveDistance,10).toFixed(2)),n=30;$(t.getListNode()).addClass("carousel-transition"),!r||Math.abs(r)<=n?t.flyback():Math.abs(r)>n&&(r>0&&t.prevItem(),r<0&&t.nextItem()),t.busy=!1,t.inTouching=!1,t.moveDistance=null,t.startPosX=null,t.routine()}};this.routine=function(){t.timer||(t.timer=setInterval(function(){t.busy||t.nextItem()},t.during))},this.flyback=function(){t.resetStyle(t.opts.itemForLoop.indexOf(t.currItem),0),setTimeout(function(){t.busy=!1},500)},this.prevItem=function(){t.busy=!0;var e=t.getPrevNode(t.currItem);e?(t.currItem=e.node,t.resetStyle(e.index),setTimeout(function(){t.busy=!1},500)):t.cancel()},this.nextItem=function(){t.busy=!0;var e=t.getNextNode(t.currItem);e?(t.currItem=e.node,t.resetStyle(e.index),setTimeout(function(){t.busy=!1},500)):t.cancel()},this.resetStyle=function(e){var r=t.root.querySelector(".carousel-ul"),n=100;r.style.marginLeft="-"+e*n+"%",[].slice.call(t.root.querySelectorAll(".carousel-nav>li>b")).forEach(function(e){$(e).removeClass("carousel-nav-active").addClass("carousel-nav-default")}),$(t.root.querySelector('.carousel-nav>li>b[uid="id-'+t.currItem.id+'"]')).removeClass("carousel-nav-default").addClass("carousel-nav-active")},this.clear=function(){clearInterval(t.timer),t.timer=null,t.snapshot=t.itemForLoop?t.itemForLoop:t.snapshot,t.itemForLoop=null},this.cancel=function(){t.busy=!1,t.clear(),t.root.removeEventListener("touchstart",r),t.root.removeEventListener("touchmove",n),t.root.removeEventListener("touchend",o)},this.getPrevNode=function(e){var r=t.opts.itemForLoop,n=r.indexOf(e);return 0===n?{node:r[r.length-1],index:r.length-1}:{node:r[n-1],index:n-1}},this.getNextNode=function(e){var r=t.opts.itemForLoop,n=r.indexOf(e);return n===r.length-1?{node:r[0],index:0}:{node:r[n+1],index:n+1}}})},function(e,t){riot.tag2("img-lazy-loader",'<img class="fade-in" riot-style="height: {opts.height}px; width: {opts.width}px; margin-bottom: -10px;" riot-src="{holder}" alt="{opts.alt}">',"<![CDATA[ #holder_${sid} text { fill: ${themeMap[theme].color}; font-weight: bold; font-family: Arial, Helvetica, Open Sans, sans-serif, monospace; font-size: ${ this.fontSize } } ]]>","",function(e){
"use strict";var t=this;this.holder=null,this.mounted=!1,this.prevSrc=null,this.hasImage=function(){return!(!t.opts.riotSrc||/undefined/gi.test(t.opts.riotSrc))},this.pretreatment=function(){if(t.fontSize=(t.opts.width/15).toFixed()+"pt",/svg:/.test(t.opts.holder)){var e=t.buildSvg();t.holder=e}else t.holder=t.opts.holder},this.extractOpts=function(e){function t(e){var t=e.split("?"),r=(t[0],t[1]);return r&&(r=r.split("&").reduce(function(e,t){var r=t.split("=");return e[r[0]]=r[1],e},{})),{query:r}}var r=t(e);return{theme:r&&r.query&&r.query.theme||null,text:r&&r.query&&r.query.text||null}};var r={gray:{color:"#AAAAAA",bgColor:"rgb(238, 238, 238)"}};this.getStringLength=function(e){var r=document.createElement("canvas"),n=r.getContext("2d");return n.font=t.fontSize+" Arial bold",n.measureText(e).width},this.buildSvg=function(){function e(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r="",n=0;n<e;n++){var o=Math.ceil(35*Math.random());r+=t[o]}return r}var n=t.extractOpts(t.opts.holder),o=n.theme,i=n.text,a=(n.maxWidth,e(9)),s=(t.opts.width-t.getStringLength(i))/2,u=t.opts.height/2,c='<svg xmlns="http://www.w3.org/2000/svg" width="'+t.opts.width+'" height="'+t.opts.height+'" viewBox="0 0 '+t.opts.width+" "+t.opts.height+'" preserveAspectRatio="none">\n                <defs>\n                    \n                </defs>\n                <g id="holder_'+a+'">\n                    <rect width="'+t.opts.width+'" height="'+t.opts.height+'" fill="'+r[o].bgColor+'"/>\n                    <g>\n                        <text\n                            fill="'+r[o].color+'"\n                            style="\n                                font-size: '+t.fontSize+';\n                                font-family:Arial, Helvetica, Open Sans, sans-serif, monospace;\n                                font-weight: bold;"\n                            x="'+s+'"\n                            y="'+u+'">'+i+"</text>\n                    </g>\n                </g>\n            </svg>";return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(c)},this.buildImage=function(){var e=document.createElement("img");e.src=t.opts.riotSrc,e.style.opacity=0,e.style.height=t.opts.height+"px",e.style.width=t.opts.width+"px",e.style.WebkitTransition="opacity .5s",e.style.MozTransition="opacity .5s",e.style.display="none",e.onload=function(){setTimeout(function(){$(t.root.childNodes[0]).removeClass("fade-in").addClass("fade-out")},50),setTimeout(function(){t.root.appendChild(e),e.style.display="inline",setTimeout(function(){e.style.opacity=1},50),t.root.removeChild(t.root.childNodes[0])},500)}},this.on("update",function(){t.mounted&&t.opts.riotSrc&&t.prevSrc===t.opts.riotSrc||(t.pretreatment(),t.hasImage()&&(t.buildImage(),t.mounted=!0,t.prevSrc=t.opts.riotSrc))})})},function(e,t){riot.tag2("modal",'<div if="{show}" class="my-modal-container"></div>',".my-modal{ margin-top: 120px; } .my-modal-container{ position: absolute; z-index: 1050; overflow: hidden; top: 0px; left: 0px; right: 0px; bottom: 0px; margin: auto; background: rgba(0, 0, 0, 0.6); } .my-modal-header{ background: red; height: 40px; padding: 10px; } .my-modal-body{ background: white; padding: 10px; } .my-modal-footer{ background: white; height: 40px; padding: 10px; }","",function(e){"use strict";var t=this;this.show=!1,this.open=function(e){var r=e.tag,n=(e.size,e.props);t.content={tag:r,props:n},t.show=!0,t.update();var o=t.root.querySelector(".my-modal-container"),i=riot.mount(o,r,n)[0];return i.on("dismiss",function(){setTimeout(function(){i.off("dismiss")},50),i.unmount(!0),t.update({show:!1})}),t.update(),i}})},function(e,t){riot.tag2("on-scroll","<yield></yield>","","",function(e){"use strict";var t=this,r=function(){return t.opts.infiniteScrollIdentify.split(".").reduce(function(e,t){return e[t]},t.parent.opts)};this.onInit=function(){if(t.opts.infiniteScrollIdentify){t.parent.on("updated",t.onUpdated);var e=r();t.items=e}t.doCheck(),window.addEventListener("scroll",t.onScrollHandler),window.addEventListener("resize",t.onScrollHandler)},this.parent.on("enter",this.onInit),this.parent.on("leave",function(){t.parent.off("updated",t.onUpdated),window.removeEventListener("scroll",t.onScrollHandler),window.removeEventListener("resize",t.onScrollHandler)}),this.onUpdated=function(){if(t.items&&t.opts.infiniteScrollIdentify){var e=(t.opts.infiniteScrollIdentify,r());t.items&&e&&e!=t.items&&($.util.throttle(function(){t.doCheck()},50),t.items=e)}},this.onScrollHandler=function(e){return $.util.throttle(function(){t.doCheck()},10)},this.isBottom=function(){return window.innerHeight+window.scrollY+(t.opts.infiniteScrollDistance||0)>=document.body.scrollHeight},this.doCheck=function(){setTimeout(function(){t.isBottom()&&!t.opts.infiniteScrollDisabled&&$.util.throttle(function(){t.opts.infiniteScroll()},50)},0)},this.onInit()})},function(e,t){riot.tag2("progressbar",'<div class="{opts.class} progressbar-container" riot-style="{opts.style}"><div class="progressbar" riot-style="width: {opts.value}%; background: {opts.bgcolor || \'#f23838\'}"></div></div>',".progressbar-container{ width: 100%; } .progressbar{ height: 100%; transition: width .5s; }","",function(e){})},function(e,t,r){r(38),riot.tag2("radio-group",'<div class="{opts.class}"><yield></yield></div>','radio-group,[riot-tag="radio-group"],[data-is="radio-group"]{ position: relative; display: inline-block; vertical-align: middle; } radio-group radio,[riot-tag="radio-group"] radio,[data-is="radio-group"] radio{ position: relative; float: left; } radio-group radio + radio,[riot-tag="radio-group"] radio + radio,[data-is="radio-group"] radio + radio{ margin-left: -1px; } radio-group radio[toggle]:not(:first-child) > *,[riot-tag="radio-group"] radio[toggle]:not(:first-child) > *,[data-is="radio-group"] radio[toggle]:not(:first-child) > *{ padding-right: 8px; padding-left: 8px; } radio-group > radio:hover,[riot-tag="radio-group"] > radio:hover,[data-is="radio-group"] > radio:hover,radio-group > radio:focus,[riot-tag="radio-group"] > radio:focus,[data-is="radio-group"] > radio:focus,radio-group > radio:active,[riot-tag="radio-group"] > radio:active,[data-is="radio-group"] > radio:active{ z-index: 2; } radio-group > radio:not(:first-child):not(:last-child):not([toggle]) > *,[riot-tag="radio-group"] > radio:not(:first-child):not(:last-child):not([toggle]) > *,[data-is="radio-group"] > radio:not(:first-child):not(:last-child):not([toggle]) > *{ border-radius: 0; } radio-group > radio:first-child,[riot-tag="radio-group"] > radio:first-child,[data-is="radio-group"] > radio:first-child{ margin-left: 0; } radio-group > radio:first-child:not(:last-child):not([toggle]) > *,[riot-tag="radio-group"] > radio:first-child:not(:last-child):not([toggle]) > *,[data-is="radio-group"] > radio:first-child:not(:last-child):not([toggle]) > *{ border-top-right-radius: 0; border-bottom-right-radius: 0; } radio-group > radio:last-child:not(:first-child) > *,[riot-tag="radio-group"] > radio:last-child:not(:first-child) > *,[data-is="radio-group"] > radio:last-child:not(:first-child) > *,radio-group > radio:not(:first-child)[toggle] > *,[riot-tag="radio-group"] > radio:not(:first-child)[toggle] > *,[data-is="radio-group"] > radio:not(:first-child)[toggle] > *{ border-top-left-radius: 0; border-bottom-left-radius: 0; }',"",function(e){"use strict";var t=this,n=r(37);this.mixin(n.parentScope).mixin(n.domEvent).mixin(n.syncEvent);var o=function(e){t.root.value=t.value=e,t.skipSync(),t.update(),t.triggerDomEvent("change")};this.on("mount",function(){var e=t.tags.radio||[];e.forEach(function(e){return e.on("radioClicked",o)})}).on("sync",function(){e.value&&(t.value=e.value)})})},function(e,t){riot.tag2("raw","<span>{opts.holder}</span>","","",function(e){"use strict";var t=this,r=function(){t.opts.content&&(t.root.innerHTML=e.content)};this.on("update",r.bind(this)),this.on("mount",r.bind(this))})},function(e,t,r){riot.tag2("rlink",'<button type="button" class="{clazzes}" onclick="{go}" __disabled="{disabled}"><yield></yield></button>',"","",function(e){"use strict";var t=this,n=r(139);(0,n.connect)(function(e){return{curr:e.route.$state}})(this),this.clazzes="",this.go=function(){var t=app.hub;!t.busy&&e.to&&t.go(e.to)},this.on("update",function(){var r={},n=app.hub.util;e.class&&e.class.split(" ").reduce(function(e,t){return e[t]="true",e},r),e.active&&e.curr&&e.to&&n.toPattern(e.curr)===n.toPattern(e.to)&&(r[e.active]="true"),t.clazzes=Object.keys(r).map(function(e){return""+e}).join(" ")})})},function(e,t,r){e.exports=r(165)},function(e,t,r){(function(e,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,a=r(166),s=o(a);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:n;var u=(0,s.default)(i);t.default=u}).call(t,function(){return this}(),r(167)(e))},function(e,t){"use strict";function r(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){!function(t,r){e.exports=r(t)}(window,function(e,t){function r(t,r,n){e.WeixinJSBridge?WeixinJSBridge.invoke(t,o(r),function(e){s(t,e,n)}):p(t,n)}function n(t,r,n){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){n&&n.trigger&&n.trigger(e),s(t,e,r)}):n?p(t,n):p(t,r)}function o(e){return e=e||{},e.appId=R.appId,e.verifyAppId=R.appId,e.verifySignType="sha1",e.verifyTimestamp=R.timestamp+"",e.verifyNonceStr=R.nonceStr,e.verifySignature=R.signature,e}function i(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function a(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}function s(e,t,r){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var n=t.errMsg;n||(n=t.err_msg,delete t.err_msg,n=u(e,n),t.errMsg=n),r=r||{},r._complete&&(r._complete(t),delete r._complete),n=t.errMsg||"",R.debug&&!r.isInnerInvoke&&alert(JSON.stringify(t));var o=n.indexOf(":"),i=n.substring(o+1);switch(i){case"ok":r.success&&r.success(t);break;case"cancel":r.cancel&&r.cancel(t);break;default:r.fail&&r.fail(t)}r.complete&&r.complete(t)}function u(e,t){var r=e,n=v[r];n&&(r=n);var o="ok";if(t){var i=t.indexOf(":");o=t.substring(i+1),"confirm"==o&&(o="ok"),"failed"==o&&(o="fail"),-1!=o.indexOf("failed_")&&(o=o.substring(7)),-1!=o.indexOf("fail_")&&(o=o.substring(5)),o=o.replace(/_/g," "),o=o.toLowerCase(),("access denied"==o||"no permission to execute"==o)&&(o="permission denied"),"config"==r&&"function not exist"==o&&(o="ok"),""==o&&(o="fail")}return t=r+":"+o}function c(e){if(e){for(var t=0,r=e.length;r>t;++t){var n=e[t],o=y[n];o&&(e[t]=o)}return e}}function p(e,t){if(!(!R.debug||t&&t.isInnerInvoke)){var r=v[e];r&&(e=r),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function l(e){if(!(_||O||R.debug||"6.0.2">S||E.systemType<0)){var t=new Image;E.appId=R.appId,E.initTime=P.initEndTime-P.initStartTime,E.preVerifyTime=P.preVerifyEndTime-P.preVerifyStartTime,I.getNetworkType({isInnerInvoke:!0,success:function(e){E.networkType=e.networkType;var r="https://open.weixin.qq.com/sdk/report?v="+E.version+"&o="+E.isPreVerifyOk+"&s="+E.systemType+"&c="+E.clientVersion+"&a="+E.appId+"&n="+E.networkType+"&i="+E.initTime+"&p="+E.preVerifyTime+"&u="+E.url;t.src=r}})}}function f(){return(new Date).getTime()}function d(t){x&&(e.WeixinJSBridge?t():m.addEventListener&&m.addEventListener("WeixinJSBridgeReady",t,!1))}function h(){I.invoke||(I.invoke=function(t,r,n){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,o(r),n)},I.on=function(t,r){e.WeixinJSBridge&&WeixinJSBridge.on(t,r)})}if(!e.jWeixin){var y={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},v=function(){var e={};for(var t in y)e[y[t]]=t;return e}(),m=e.document,g=m.title,b=navigator.userAgent.toLowerCase(),w=navigator.platform.toLowerCase(),_=!(!w.match("mac")&&!w.match("win")),O=-1!=b.indexOf("wxdebugger"),x=-1!=b.indexOf("micromessenger"),k=-1!=b.indexOf("android"),j=-1!=b.indexOf("iphone")||-1!=b.indexOf("ipad"),S=function(){var e=b.match(/micromessenger\/(\d+\.\d+\.\d+)/)||b.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),P={initStartTime:f(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},E={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:j?1:k?2:-1,clientVersion:S,url:encodeURIComponent(location.href)},R={},T={_completes:[]},C={state:0,data:{}};d(function(){P.initEndTime=f()});var M=!1,$=[],I={config:function(e){R=e,p("config",e);var t=R.check!==!1;d(function(){if(t)r(y.config,{verifyJsApiList:c(R.jsApiList)},function(){T._complete=function(e){P.preVerifyEndTime=f(),C.state=1,C.data=e},T.success=function(e){E.isPreVerifyOk=0},T.fail=function(e){T._fail?T._fail(e):C.state=-1};var e=T._completes;return e.push(function(){l()}),T.complete=function(t){for(var r=0,n=e.length;n>r;++r)e[r]();T._completes=[]},T}()),P.preVerifyStartTime=f();else{C.state=1;for(var e=T._completes,n=0,o=e.length;o>n;++n)e[n]();T._completes=[]}}),R.beta&&h()},ready:function(e){0!=C.state?e():(T._completes.push(e),!x&&R.debug&&e())},error:function(e){"6.0.2">S||(-1==C.state?e(C.data):T._fail=e)},checkJsApi:function(e){var t=function(e){var t=e.checkResult;for(var r in t){var n=v[r];n&&(t[n]=t[r],delete t[r])}return e};r("checkJsApi",{jsApiList:c(e.jsApiList)},function(){return e._complete=function(e){if(k){var r=e.checkResult;r&&(e.checkResult=JSON.parse(r))}e=t(e)},e}())},onMenuShareTimeline:function(e){n(y.onMenuShareTimeline,{complete:function(){r("shareTimeline",{title:e.title||g,desc:e.title||g,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){n(y.onMenuShareAppMessage,{complete:function(){r("sendAppMessage",{title:e.title||g,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){n(y.onMenuShareQQ,{complete:function(){r("shareQQ",{title:e.title||g,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){n(y.onMenuShareWeibo,{complete:function(){r("shareWeiboApp",{title:e.title||g,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){n(y.onMenuShareQZone,{complete:function(){r("shareQZone",{title:e.title||g,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){r("startRecord",{},e)},stopRecord:function(e){r("stopRecord",{},e)},onVoiceRecordEnd:function(e){n("onVoiceRecordEnd",e)},playVoice:function(e){r("playVoice",{localId:e.localId},e)},pauseVoice:function(e){r("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){r("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){n("onVoicePlayEnd",e)},uploadVoice:function(e){r("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){r("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){r("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){r("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},function(){return e._complete=function(e){if(k){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},getLocation:function(e){},previewImage:function(e){r(y.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){r("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){r("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){M===!1?(M=!0,r("getLocalImgData",{localId:e.localId},function(){return e._complete=function(e){if(M=!1,$.length>0){var t=$.shift();wx.getLocalImgData(t)}},e}())):$.push(e)},getNetworkType:function(e){var t=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var r=e.subtype;if(delete e.subtype,r)e.networkType=r;else{var n=t.indexOf(":"),o=t.substring(n+1);switch(o){case"wifi":case"edge":case"wwan":e.networkType=o;break;default:e.errMsg="getNetworkType:fail"}}return e};r("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){r("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},r(y.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){r("hideOptionMenu",{},e)},showOptionMenu:function(e){r("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},r("closeWindow",{},e)},hideMenuItems:function(e){r("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){r("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){r("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){r("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},r("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){if(j){var t=e.resultStr;if(t){var r=JSON.parse(t);e.resultStr=r&&r.scan_code&&r.scan_code.scan_result}}},e}())},openAddress:function(e){r(y.openAddress,{},function(){return e._complete=function(e){e=a(e)},e}())},openProductSpecificView:function(e){r(y.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){for(var t=e.cardList,n=[],o=0,i=t.length;i>o;++o){var a=t[o],s={card_id:a.cardId,card_ext:a.cardExt};n.push(s)}r(y.addCard,{card_list:n},function(){return e._complete=function(e){var t=e.card_list;if(t){t=JSON.parse(t);for(var r=0,n=t.length;n>r;++r){var o=t[r];o.cardId=o.card_id,o.cardExt=o.card_ext,o.isSuccess=!!o.is_succ,delete o.card_id,delete o.card_ext,delete o.is_succ}e.cardList=t,delete e.card_list}},e}())},chooseCard:function(e){r("chooseCard",{app_id:R.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){for(var t=e.cardList,n=[],o=0,i=t.length;i>o;++o){var a=t[o],s={card_id:a.cardId,code:a.code};n.push(s)}r(y.openCard,{card_list:n},e)},consumeAndShareCard:function(e){r(y.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)},chooseWXPay:function(e){r(y.chooseWXPay,i(e),e)},openEnterpriseRedPacket:function(e){r(y.openEnterpriseRedPacket,i(e),e)},startSearchBeacons:function(e){r(y.startSearchBeacons,{ticket:e.ticket},e)},stopSearchBeacons:function(e){r(y.stopSearchBeacons,{},e)},onSearchBeacons:function(e){n(y.onSearchBeacons,e)},openEnterpriseChat:function(e){r("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)}},A=1,N={};return m.addEventListener("error",function(e){if(!k){var t=e.target,r=t.tagName,n=t.src;if("IMG"==r||"VIDEO"==r||"AUDIO"==r||"SOURCE"==r){var o=-1!=n.indexOf("wxlocalresource://");if(o){e.preventDefault(),e.stopPropagation();var i=t["wx-id"];if(i||(i=A++,t["wx-id"]=i),N[i])return;N[i]=!0,wx.getLocalImgData({localId:n,success:function(e){t.src=e.localData}})}}}},!0),m.addEventListener("load",function(e){if(!k){var t=e.target,r=t.tagName;if(t.src,"IMG"==r||"VIDEO"==r||"AUDIO"==r||"SOURCE"==r){var n=t["wx-id"];n&&(N[n]=!1)}}},!0),t&&(e.wx=e.jWeixin=I),I}})},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader,r=a(t);return t.readAsArrayBuffer(e),r}function u(e){var t=new FileReader,r=a(t);return t.readAsText(e),r}function c(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&b(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var r=t.body;if("string"==typeof e)this.url=e;else{if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function y(e){var t=new o;return e.split("\r\n").forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(m.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];this.map[e]=o?o+","+n:n},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=r(n)},o.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},l.call(d.prototype),l.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];v.redirect=function(e,t){if(O.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=d,e.Response=v,e.fetch=function(e,t){return new Promise(function(r,n){var o=new d(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;r(new v(t,e))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&m.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t){"use strict";var r={};r["91songli.cc"]="http://api.91songli.cc",r["91songli.com"]="http://api.91songli.com",r["wx.songni.cc"]="http://api.91songli.cc",r["dalibao.com"]="http://api.dalibao.com",r["dev.91songli.cc"]="http://apidev.91songli.cc",r["dev.songni.cc"]="http://apidev.91songli.cc",r["dev2.songni.cc"]="http://apidev.91songli.cc",t=e.exports={development:{uri:"http://apidev.91songli.cc",imgUri:"img.91pintuan.com",phtUri:"photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5726bf8700bbe21526c4ccbe",apiUri:r,debug:!0,from:"client"},production:{uri:"http://api.91songli.cc",imgUri:"img.91pintuan.com",phtUri:"photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5581117b5f225e4c401c9259",apiUri:r,debug:!1,from:"client"}}}]);