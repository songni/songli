!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(118),n(162),n(65),e.exports=n(119)},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function o(e){return e.split(/[\/?#]/)}function i(e,t){var n=t.replace(/\?/g,"\\?").replace(/\*/g,"([^/?#]+?)").replace(/\.\./,".*"),r=new RegExp("^"+n+"$"),o=e.match(r);if(o)return o.slice(1)}function a(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function s(e){y=a(d,1),T[j](P,y),T[j](E,y),M[j](N,h),e&&d(!0)}function u(){this.$=[],_(this),F.on("stop",this.s.bind(this)),F.on("emit",this.e.bind(this))}function c(e){return e.replace(/^\/|\/$/,"")}function p(e){return"string"==typeof e}function l(e){return(e||$.href).replace(O,"")}function f(e){return"#"===g[0]?(e||$.href||"").split(g)[1]||"":($?l(e):e||"").replace(g,"")}function d(e){var t=0===z;if(!(C<=z)&&(z++,U.push(function(){var t=f();(e||t!==m)&&(F[R]("emit",t),m=t)}),t)){for(var n;n=U.shift();)n();z=0}}function h(e){if(!(1!==e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!==t.nodeName;)t=t.parentNode;!t||"A"!==t.nodeName||t[S]("download")||!t[S]("href")||t.target&&"_self"!==t.target||t.href.indexOf($.href.match(O)[0])===-1||t.href!==$.href&&(t.href.split("#")[0]===$.href.split("#")[0]||"#"!==g[0]&&0!==l(t.href).indexOf(g)||"#"===g[0]&&t.href.split(g)[0]!==$.href.split(g)[0]||!v(f(t.href),t.title||M.title))||e.preventDefault()}}function v(e,t,n){return I?(e=g+c(e),t=t||M.title,n?I.replaceState(null,t,e):I.pushState(null,t,e),M.title=t,D=!1,d(),D):F[R]("emit",f(e))}var y,g,m,b,w,_=r(n(43)),O=/^.+?\/\/+[^\/]+/,x="EventListener",k="remove"+x,j="add"+x,S="hasAttribute",P="popstate",E="hashchange",R="trigger",C=3,T="undefined"!=typeof window&&window,M="undefined"!=typeof document&&document,I=T&&history,$=T&&(I.location||T.location),A=u.prototype,N=M&&M.ontouchstart?"touchstart":"click",F=_(),L=!1,D=!1,U=[],z=0;A.m=function(e,t,n){!p(e)||t&&!p(t)?t?this.r(e,t):this.r("@",e):v(e,t,n||!1)},A.s=function(){this.off("*"),this.$=[]},A.e=function(e){this.$.concat("@").some(function(t){var n=("@"===t?b:w)(c(e),c(t));if("undefined"!=typeof n)return this[R].apply(null,[t].concat(n)),D=!0},this)},A.r=function(e,t){"@"!==e&&(e="/"+c(e),this.$.push(e)),this.on(e,t)};var q=new u,W=q.m.bind(q);W.create=function(){var e=new u,t=e.m.bind(e);return t.stop=e.s.bind(e),t},W.base=function(e){g=e||"#",m=f()},W.exec=function(){d(!0)},W.parser=function(e,t){e||t||(b=o,w=i),e&&(b=e),t&&(w=t)},W.query=function(){var e={},t=$.href||m;return t.replace(/[?&](.+?)=([^&]*)/g,function(t,n,r){e[n]=r}),e},W.stop=function(){L&&(T&&(T[k](P,y),T[k](E,y),M[k](N,h)),F[R]("stop"),L=!1)},W.start=function(e){L||(T&&("complete"===document.readyState?s(e):T[j]("load",function(){setTimeout(function(){s(e)},1)})),L=!0)},W.base(),W.parser(),e.exports=W},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return Ue.test(e)}function n(e){return We.test(e)}function r(e){return typeof e===Ie}function o(e){return e&&typeof e===Te}function i(e){return typeof e===Me}function a(e){return typeof e===Ce}function s(e){return i(e)||null===e||""===e}function u(e){return Array.isArray(e)||e instanceof Array}function c(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return i(e[t])||n&&n.writable}function p(e){return De.test(e)}function l(e,t){return(t||document).querySelectorAll(e)}function f(e,t){return(t||document).querySelector(e)}function d(){return document.createDocumentFragment()}function h(){return document.createTextNode("")}function v(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(e)}function y(e){if(e.outerHTML)return e.outerHTML;var t=v("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function g(e,t){if(i(e.innerHTML)){var n=(new DOMParser).parseFromString(t,"application/xml"),r=e.ownerDocument.importNode(n.documentElement,!0);e.appendChild(r)}else e.innerHTML=t}function m(e,t){e.removeAttribute(t)}function b(e,t){return e.getAttribute(t)}function w(e,t,n){var r=Ae.exec(t);r&&r[1]?e.setAttributeNS($e,r[1],n):e.setAttribute(t,n)}function _(e,t,n){e.insertBefore(t,n.parentNode&&n)}function O(e,t){if(e)for(var n;n=ze.exec(e);)t(n[1].toLowerCase(),n[2]||n[3]||n[4])}function x(e,t,n){if(e){var r,o=t(e,n);if(o===!1)return;for(e=e.firstChild;e;)r=e.nextSibling,x(e,t,o),e=r}}function k(e,t){for(var n,r=e?e.length:0,o=0;o<r;++o)n=e[o],t(n,o)===!1&&o--;return e}function j(e,t){return~e.indexOf(t)}function S(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})}function P(e,t){return e.slice(0,t.length)===t}function E(e,t,n,r){return Object.defineProperty(e,t,R({value:n,enumerable:!1,writable:!1,configurable:!0},r)),e}function R(e){for(var t,n=arguments,r=1;r<n.length;++r)if(t=n[r])for(var o in t)c(e,o)&&(e[o]=t[o]);return e}function C(e,t,n){var r=this._parent,o=this._item;if(!o)for(;r&&!o;)o=r._item,r=r._parent;if(c(n,"currentTarget")&&(n.currentTarget=e),c(n,"target")&&(n.target=n.srcElement),c(n,"which")&&(n.which=n.charCode||n.keyCode),n.item=o,t.call(this,n),!n.preventUpdate){var i=ae(this);i.isMounted&&i.update()}}function T(e,t,n,r){var o,i=C.bind(r,n,t);return n.addEventListener?(n[e]=null,o=e.replace(tt,""),n._riotEvents||(n._riotEvents={}),n._riotEvents[e]&&n.removeEventListener(o,n._riotEvents[e]),n._riotEvents[e]=i,void n.addEventListener(o,i,!1)):void(n[e]=i)}function M(e,t){var n,r=Ke(e.value,t);return e.tag&&e.tagName===r?void e.tag.update():(e.tag&&(k(e.attrs,function(t){return w(e.tag.root,t.name,t.value)}),e.tag.unmount(!0)),e.impl=we[r],n={root:e.dom,parent:t,hasImpl:!0,tagName:r},e.tag=ie(e.impl,n,e.dom.innerHTML,t),e.tagName=r,e.tag.mount(),void t.on("unmount",function(){var t=e.tag.opts.dataIs,n=e.tag.parent.tags,r=e.tag._parent.tags;le(n,t,e.tag),le(r,t,e.tag),e.tag.unmount()}))}function I(e){var t,n=e.dom,o=e.attr,a=j([Ee,Re],o),s=Ke(e.expr,this),u="riot-value"===o,c=e.root&&"VIRTUAL"===e.root.tagName,p=n&&(e.parent||n.parentNode);if(e.bool?s=!!s&&o:(i(s)||null===s)&&(s=""),e._riot_id){if(e.isMounted)e.update();else if(e.mount(),c){var l=document.createDocumentFragment();he.call(e,l),e.root.parentElement.replaceChild(l,e.root)}}else{if(t=e.value,e.value=s,e.update)return void e.update();if(e.isRtag&&s)return M(e,this);if(t!==s&&(!u||n.value!==s)){if(!o)return s+="",void(p&&(e.parent=p,"TEXTAREA"===p.tagName?(p.value=s,Ve||(n.nodeValue=s)):n.nodeValue=s));if(e.isAttrRemoved&&s||(m(n,o),e.isAttrRemoved=!0),r(s))T(o,s,n,this);else if(a)o===Re&&(s=!s),n.style.display=s?"":"none";else if(u)n.value=s;else if(P(o,Oe)&&o!==ke)o=o.slice(Oe.length),qe[o]&&(o=qe[o]),null!=s&&w(n,o,s);else{if("selected"===o&&p&&/^(SELECT|OPTGROUP)$/.test(p.tagName)&&s&&(p.value=n.value),e.bool&&(n[o]=s,!s))return;(0===s||s&&typeof s!==Te)&&w(n,o,s)}}}}function $(e){k(e,I.bind(this))}function A(e,t,n,r){var o=r?Object.create(r):{};return o[e.key]=t,e.pos&&(o[e.pos]=n),o}function N(e,t,n){for(var r,o=t.length,i=e.length;o>i;)r=t[--o],t.splice(o,1),r.unmount(),le(r.parent,n,r,!0)}function F(e){var t=this;k(Object.keys(this.tags),function(n){var r=t.tags[n];u(r)?k(r,function(t){oe.apply(t,[n,e])}):oe.apply(r,[n,e])})}function L(e,t,n){n?ve.apply(this,[e,t]):_(e,this.root,t.root)}function D(e,t,n){n?he.apply(this,[e,t]):_(e,this.root,t.root)}function U(e,t){t?he.call(this,e):e.appendChild(this.root)}function z(e,t,n){m(e,Se);var r,o=typeof b(e,Pe)!==Ce||m(e,Pe),i=ue(e),a=we[i]||{tmpl:y(e)},s=Fe.test(i),c=e.parentNode,p=h(),l=ne(e),f=b(e,je),v=[],g=[],w=!0,_=!we[i],O="VIRTUAL"===e.tagName;return n=Ke.loopKeys(n),n.isLoop=!0,f&&m(e,je),c.insertBefore(p,e),c.removeChild(e),n.update=function(){var c=Ke(n.val,t),h=d(),y=!u(c),m=p.parentNode;y?(r=c||!1,c=r?Object.keys(c).map(function(e){return A(n,c[e],e)}):[]):r=!1,f&&(c=c.filter(function(e,r){return n.key&&!y?!!Ke(f,A(n,e,r,t)):!!Ke(f,R(Object.create(t),e))})),k(c,function(u,p){var f=o&&typeof u===Te&&!r,d=g.indexOf(u),y=!~d,b=p<=v.length,x=!y&&f?d:p,k=v[x];u=!r&&n.key?A(n,u,p):u,f&&y||!f&&!k?(k=new te(a,{parent:t,isLoop:w,isAnonymous:_,root:s?m:e.cloneNode(),item:u},e.innerHTML),k.mount(),b?U.apply(k,[h||m,O]):D.apply(k,[m,v[p],O]),b||g.splice(p,0,u),v.splice(p,0,k),l&&pe(t.tags,i,k,!0),x=p):k.update(u),x!==p&&f&&(j(c,g[p])&&L.apply(k,[m,v[p],O]),n.pos&&(k[n.pos]=p),v.splice(p,0,v.splice(x,1)[0]),g.splice(p,0,g.splice(x,1)[0]),!l&&k.tags&&F.call(k,p)),k._item=u,E(k,"_parent",t)}),N(c,v,i),g=c.slice(),m.insertBefore(h,p)},n.unmount=function(){k(v,function(e){e.unmount()})},n}function q(e,t,n){var r=this,o={parent:{children:t}};return x(e,function(t,o){var i,a,s,u=t.nodeType,c=o.parent;if(!n&&t===e)return{parent:c};if(3===u&&"STYLE"!==t.parentNode.tagName&&Ke.hasExpr(t.nodeValue)&&c.children.push({dom:t,expr:t.nodeValue}),1!==u)return o;if(i=b(t,Se))return c.children.push(z(t,r,i)),!1;if(i=b(t,je))return c.children.push(Object.create(nt).init(t,r,i)),!1;if((a=b(t,ke))&&Ke.hasExpr(a))return c.children.push({isRtag:!0,expr:a,dom:t,attrs:[].slice.call(t.attributes)}),!1;if(s=ne(t),s&&(t!==e||n)){var p={root:t,parent:r,hasImpl:!0};return c.children.push(ie(s,p,t.innerHTML,r)),!1}return W.apply(r,[t,t.attributes,function(e,t){t&&c.children.push(t)}]),{parent:c}},o),{tree:o,root:e}}function W(e,t,r){var o=this;k(t,function(t){var i,a=t.name,s=n(a);j(xe,a)?i=Object.create(rt).init(e,o,a,t.value):Ke.hasExpr(t.value)&&(i={dom:e,expr:t.value,attr:t.name,bool:s}),r(t,i)})}function V(e,t,n){var r="o"===n[0],o=r?"select>":"table>";if(e.innerHTML="<"+o+t.trim()+"</"+o,o=e.firstChild,r)o.selectedIndex=-1;else{var i=ut[n];i&&1===o.childElementCount&&(o=f(i,o))}return o}function B(e,t){if(!ot.test(e))return e;var n={};return t=t&&t.replace(at,function(e,t,r){return n[t]=n[t]||r,""}).trim(),e.replace(st,function(e,t,r){return n[t]||r||""}).replace(it,function(e,n){return t||n||""})}function H(e,n,r){var o=e&&e.match(/^\s*<([-\w]+)/),i=o&&o[1].toLowerCase(),a=v(pt,r&&t(i));return e=B(e,n),ct.test(i)?a=V(a,e,i):g(a,e),a.stub=!0,a}function G(e,t){var n=this,r=n.name,o=n.tmpl,i=n.css,a=n.attrs,s=n.onCreate;return we[r]||(J(r,o,i,a,s),we[r].class=this.constructor),de(e,r,t,this),i&&Xe.inject(),this}function J(e,t,n,o,i){return r(o)&&(i=o,/^[\w\-]+\s?=/.test(n)?(o=n,n=""):o=""),n&&(r(n)?i=n:Xe.add(n)),e=e.toLowerCase(),we[e]={name:e,tmpl:t,attrs:o,fn:i},e}function Q(e,t,n,r,o){n&&Xe.add(n,e);var i=!!we[e];return we[e]={name:e,tmpl:t,attrs:r,fn:o},i&&gt.hotReloader&&gt.hotReloader(e),e}function X(e,t,n){function r(e){if(e.tagName){var o=b(e,ke);t&&o!==t&&(o=t,w(e,ke,t));var a=de(e,o||e.tagName.toLowerCase(),n);a&&i.push(a)}else e.length&&k(e,r)}var i=[];Xe.inject(),o(t)&&(n=t,t=0);var s,u;if(a(e)?(e="*"===e?u=ye():e+ye(e.split(/, */)),s=e?l(e):[]):s=e,"*"===t){if(t=u||ye(),s.tagName)s=l(t,s);else{var c=[];k(s,function(e){return c.push(l(t,e))}),s=c}t=0}return r(s),i}function Z(e,t,n){if(o(e))return void Z("__unnamed_"+dt++,e,!0);var a=n?ft:lt;if(!t){if(i(a[e]))throw new Error("Unregistered mixin: "+e);return a[e]}a[e]=r(t)?R(t.prototype,a[e]||{})&&t:R(a[e]||{},t)}function K(){return k(be,function(e){return e.update()})}function Y(e){delete we[e]}function ee(e,t,n,r,o){if(!e||!n){var i=!n&&e?this:t||this;k(o,function(e){e.expr&&$.call(i,[e.expr]),r[S(e.name)]=e.expr?e.expr.value:e.value})}}function te(e,t,n){var o,i=R({},t.opts),s=t.parent,u=t.isLoop,c=t.isAnonymous,p=ce(t.item),l=[],f=[],d=[],h=t.root,v=t.tagName||ue(h),y="virtual"===v,g=[];Ye(this),e.name&&h._tag&&h._tag.unmount(!0),this.isMounted=!1,h.isLoop=u,E(this,"_internal",{isAnonymous:c,instAttrs:l,innerHTML:n,virts:[],tail:null,head:null}),E(this,"_riot_id",++ht),R(this,{root:h,opts:i},p),E(this,"parent",s||null),E(this,"tags",{}),E(this,"refs",{}),o=H(e.tmpl,n,u),E(this,"update",function(e){return r(this.shouldUpdate)&&!this.shouldUpdate(e)?this:(e=ce(e),u&&c&&re.apply(this,[this.parent,g]),R(this,e),ee.apply(this,[u,s,c,i,l]),this.isMounted&&this.trigger("update",e),$.call(this,d),this.isMounted&&this.trigger("updated"),this)}.bind(this)),E(this,"mixin",function(){var e=this;return k(arguments,function(t){var n,o,i=[];t=a(t)?Z(t):t,n=r(t)?new t:t;var s=Object.getPrototypeOf(n);do i=i.concat(Object.getOwnPropertyNames(o||n));while(o=Object.getPrototypeOf(o||n));k(i,function(t){if("init"!==t){var o=Object.getOwnPropertyDescriptor(n,t)||Object.getOwnPropertyDescriptor(s,t),i=o&&(o.get||o.set);!e.hasOwnProperty(t)&&i?Object.defineProperty(e,t,o):e[t]=r(n[t])?n[t].bind(e):n[t]}}),n.init&&n.init.bind(e)()}),this}.bind(this)),E(this,"mount",function(){var t=this;h._tag=this,W.apply(s,[h,h.attributes,function(e,n){!c&&rt.isPrototypeOf(n)&&(n.tag=t),e.expr=n,l.push(e)}]),f=[],O(e.attrs,function(e,t){f.push({name:e,value:t})}),W.apply(this,[h,f,function(e,t){t?d.push(t):w(h,e.name,e.value)}]),this._parent&&c&&re.apply(this,[this._parent,g]),ee.apply(this,[u,s,c,i,l]);var n=Z(_e);if(n)for(var r in n)n.hasOwnProperty(r)&&t.mixin(n[r]);if(e.fn&&e.fn.call(this,i),this.trigger("before-mount"),q.apply(this,[o,d,!1]),this.update(p),u&&c)this.root=h=o.firstChild;else{for(;o.firstChild;)h.appendChild(o.firstChild);h.stub&&(h=s.root)}return E(this,"root",h),this.isMounted=!0,!this.parent||this.parent.isMounted?this.trigger("mount"):this.parent.one("mount",function(){t.trigger("mount")}),this}.bind(this)),E(this,"unmount",function(t){var n,r=this,o=this.root,i=o.parentNode,a=be.indexOf(this);if(this.trigger("before-unmount"),O(e.attrs,function(e){P(e,Oe)&&(e=e.slice(Oe.length)),m(h,e)}),~a&&be.splice(a,1),i){if(s)n=ae(s),y?Object.keys(this.tags).forEach(function(e){le(n.tags,e,r.tags[e])}):(le(n.tags,v,this),s!==n&&le(s.tags,v,this));else for(;o.firstChild;)o.removeChild(o.firstChild);t?m(i,ke):i.removeChild(o)}return this._internal.virts&&k(this._internal.virts,function(e){e.parentNode&&e.parentNode.removeChild(e)}),se(d),k(l,function(e){return e.expr&&e.expr.unmount&&e.expr.unmount()}),this.trigger("unmount"),this.off("*"),this.isMounted=!1,delete this.root._tag,this}.bind(this))}function ne(e){return e.tagName&&we[b(e,ke)||b(e,ke)||e.tagName.toLowerCase()]}function re(e,t){var n=this;k(Object.keys(e),function(r){var o=!p(r)&&j(t,r);(i(n[r])||o)&&(o||t.push(r),n[r]=e[r])})}function oe(e,t){var n,r=this.parent;r&&(n=r.tags[e],u(n)?n.splice(t,0,n.splice(n.indexOf(this),1)[0]):pe(r.tags,e,this))}function ie(e,t,n,r){var o=new te(e,t,n),i=t.tagName||ue(t.root,!0),a=ae(r);return E(o,"parent",a),o._parent=r,pe(a.tags,i,o),a!==r&&pe(r.tags,i,o),t.root.innerHTML="",o}function ae(e){for(var t=e;t._internal.isAnonymous&&t.parent;)t=t.parent;return t}function se(e){k(e,function(e){e instanceof te?e.unmount(!0):e.unmount&&e.unmount()})}function ue(e,t){var n=ne(e),r=!t&&b(e,ke);return r&&!Ke.hasExpr(r)?r:n?n.name:e.tagName.toLowerCase()}function ce(e){if(!(e instanceof te||e&&r(e.trigger)))return e;var t={};for(var n in e)De.test(n)||(t[n]=e[n]);return t}function pe(e,t,n,r){var o=e[t],i=u(o);o&&o===n||(!o&&r?e[t]=[n]:o?(!i||i&&!j(o,n))&&(i?o.push(n):e[t]=[o,n]):e[t]=n)}function le(e,t,n,r){u(e[t])?(k(e[t],function(r,o){r===n&&e[t].splice(o,1)}),e[t].length?1!==e[t].length||r||(e[t]=e[t][0]):delete e[t]):delete e[t]}function fe(e){for(;e;){if(e.inStub)return!0;e=e.parentNode}return!1}function de(e,t,n,r){var o=we[t],i=we[t].class,a=r||(i?Object.create(i.prototype):{}),s=e._innerHTML=e._innerHTML||e.innerHTML;e.innerHTML="";var u={root:e,opts:n};return n&&n.parent&&(u.parent=n.parent),o&&e&&te.apply(a,[o,u,s]),a&&a.mount&&(a.mount(!0),j(be,a)||be.push(a)),a}function he(e,t){var n,r,o=this,i=h(),a=h(),s=d();for(this._internal.head=this.root.insertBefore(i,this.root.firstChild),this._internal.tail=this.root.appendChild(a),r=this._internal.head;r;)n=r.nextSibling,s.appendChild(r),o._internal.virts.push(r),r=n;t?e.insertBefore(s,t._internal.head):e.appendChild(s)}function ve(e,t){for(var n,r=this,o=this._internal.head,i=d();o;)if(n=o.nextSibling,i.appendChild(o),o=n,o===r._internal.tail){i.appendChild(o),e.insertBefore(i,t._internal.head);break}}function ye(e){if(!e){var t=Object.keys(we);return t+ye(t)}return e.filter(function(e){return!/[^-\w]/.test(e)}).reduce(function(e,t){var n=t.trim().toLowerCase();return e+",["+ke+'="'+n+'"]'},"")}var ge,me,be=[],we={},_e="__global_mixin",Oe="riot-",xe=["data-ref","ref"],ke="data-is",je="if",Se="each",Pe="no-reorder",Ee="show",Re="hide",Ce="string",Te="object",Me="undefined",Ie="function",$e="http://www.w3.org/1999/xlink",Ae=/^xlink:(\w+)/,Ne=typeof window===Me?void 0:window,Fe=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,Le=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,De=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|trigger|o(?:n|ff|ne))$/,Ue=/^(altGlyph|animate(?:Color)?|circle|clipPath|defs|ellipse|fe(?:Blend|ColorMatrix|ComponentTransfer|Composite|ConvolveMatrix|DiffuseLighting|DisplacementMap|Flood|GaussianBlur|Image|Merge|Morphology|Offset|SpecularLighting|Tile|Turbulence)|filter|font|foreignObject|g(?:lyph)?(?:Ref)?|image|line(?:arGradient)?|ma(?:rker|sk)|missing-glyph|path|pattern|poly(?:gon|line)|radialGradient|rect|stop|svg|switch|symbol|text(?:Path)?|tref|tspan|use)$/,ze=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,qe={viewbox:"viewBox"},We=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,Ve=0|(Ne&&Ne.document||{}).documentMode,Be=Object.freeze({isSVGTag:t,isBoolAttr:n,isFunction:r,isObject:o,isUndefined:i,isString:a,isBlank:s,isArray:u,isWritable:c,isReservedName:p}),He=Object.freeze({$$:l,$:f,createFrag:d,createDOMPlaceholder:h,mkEl:v,getOuterHTML:y,setInnerHTML:g,remAttr:m,getAttr:b,setAttr:w,safeInsert:_,walkAttrs:O,walkNodes:x}),Ge={},Je=[],Qe=!1;Ne&&(ge=function(){var e=v("style");w(e,"type","text/css");var t=f("style[type=riot]");return t?(t.id&&(e.id=t.id),t.parentNode.replaceChild(e,t)):document.getElementsByTagName("head")[0].appendChild(e),e}(),me=ge.styleSheet);var Xe={styleNode:ge,add:function(e,t){t?Ge[t]=e:Je.push(e),Qe=!0},inject:function(){if(Ne&&Qe){Qe=!1;var e=Object.keys(Ge).map(function(e){return Ge[e]}).concat(Je).join("\n");me?me.cssText=e:ge.innerHTML=e}}},Ze=function(e){function t(e){return e}function n(e,t){return t||(t=b),new RegExp(e.source.replace(/{/g,t[2]).replace(/}/g,t[3]),e.global?c:"")}function r(e){if(e===y)return g;var t=e.split(" ");if(2!==t.length||d.test(e))throw new Error('Unsupported brackets "'+e+'"');return t=t.concat(e.replace(h,"\\").split(" ")),t[4]=n(t[1].length>1?/{[\S\s]*?}/:g[4],t),t[5]=n(e.length>3?/\\({|})/g:g[5],t),t[6]=n(g[6],t),t[7]=RegExp("\\\\("+t[3]+")|([[({])|("+t[3]+")|"+f,c),t[8]=e,t}function o(e){return e instanceof RegExp?s(e):b[e]}function i(e){(e||(e=y))!==b[8]&&(b=r(e),s=e===y?t:n,b[9]=s(g[9])),m=e}function a(e){var t;e=e||{},t=e.brackets,Object.defineProperty(e,"brackets",{set:i,get:function(){return m},enumerable:!0}),u=e,i(t)}var s,u,c="g",p=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,l=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,f=l.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,d=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),h=/(?=[[\]()*+?.^$|])/g,v={"(":RegExp("([()])|"+f,c),"[":RegExp("([[\\]])|"+f,c),"{":RegExp("([{}])|"+f,c)},y="{ }",g=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+f,c),y,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],m=e,b=[];return o.split=function(e,t,n){function r(e){t||a?c.push(e&&e.replace(n[5],"$1")):c.push(e)}function o(e,t,n){var r,o=v[t];for(o.lastIndex=n,n=1;(r=o.exec(e))&&(!r[1]||(r[1]===t?++n:--n)););return n?e.length:o.lastIndex}n||(n=b);var i,a,s,u,c=[],p=n[6];for(a=s=p.lastIndex=0;i=p.exec(e);){if(u=i.index,a){if(i[2]){p.lastIndex=o(e,i[2],p.lastIndex);continue}if(!i[3])continue}i[1]||(r(e.slice(s,u)),s=p.lastIndex,p=n[6+(a^=1)],p.lastIndex=s)}return e&&s<e.length&&r(e.slice(s)),c},o.hasExpr=function(e){return b[4].test(e)},o.loopKeys=function(e){var t=e.match(b[9]);return t?{key:t[1],pos:t[2],val:b[0]+t[3].trim()+b[1]}:{val:e.trim()}},o.array=function(e){return e?r(e):b},Object.defineProperty(o,"settings",{set:a,get:function(){return u}}),o.settings="undefined"!=typeof riot&&riot.settings||{},o.set=i,o.R_STRINGS=l,o.R_MLCOMMS=p,o.S_QBLOCKS=f,o}(),Ke=function(){function e(e,r){return e?(a[e]||(a[e]=n(e))).call(r,t):e}function t(t,n){t.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},e.errorHandler?e.errorHandler(t):"undefined"!=typeof console&&"function"==typeof console.error&&(t.riotData.tagName&&console.error("Riot template error thrown in the <%s> tag",t.riotData.tagName.toLowerCase()),console.error(t))}function n(e){var t=r(e);return"try{return "!==t.slice(0,11)&&(t="return "+t),new Function("E",t+";")}function r(e){var t,n=[],r=Ze.split(e.replace(p,'"'),1);if(r.length>2||r[0]){var i,a,s=[];for(i=a=0;i<r.length;++i)t=r[i],t&&(t=1&i?o(t,1,n):'"'+t.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[a++]=t);t=a<2?s[0]:"["+s.join(",")+'].join("")'}else t=o(r[1],0,n);return n[0]&&(t=t.replace(l,function(e,t){return n[t].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),t}function o(e,t,n){function r(t,n){var r,o=1,i=f[t];for(i.lastIndex=n.lastIndex;r=i.exec(e);)if(r[0]===t)++o;else if(!--o)break;n.lastIndex=o?e.length:i.lastIndex}if(e=e.replace(c,function(e,t){return e.length>2&&!t?s+(n.push(e)-1)+"~":e}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var o,a=[],p=0;e&&(o=e.match(u))&&!o.index;){var l,d,h=/,|([[{(])|$/g;for(e=RegExp.rightContext,l=o[2]?n[o[2]].slice(1,-1).trim().replace(/\s+/g," "):o[1];d=(o=h.exec(e))[1];)r(d,h);d=e.slice(0,o.index),e=RegExp.rightContext,a[p++]=i(d,1,l)}e=p?p>1?"["+a.join(",")+'].join(" ").trim()':a[0]:i(e,t)}return e}function i(e,t,n){var r;return e=e.replace(h,function(e,t,n,o,i){return n&&(o=r?0:o+e.length,"this"!==n&&"global"!==n&&"window"!==n?(e=t+'("'+n+d+n,o&&(r="."===(i=i[o])||"("===i||"["===i)):o&&(r=!v.test(i.slice(o)))),e}),r&&(e="try{return "+e+"}catch(e){E(e,this)}"),n?e=(r?"function(){"+e+"}.call(this)":"("+e+")")+'?"'+n+'":""':t&&(e="function(v){"+(r?e.replace("return ","v="):"v=("+e+")")+';return v||v===0?v:""}.call(this)'),e}var a={};e.hasExpr=Ze.hasExpr,e.loopKeys=Ze.loopKeys,e.clearCache=function(){a={}},e.errorHandler=null;var s=String.fromCharCode(8279),u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,c=RegExp(Ze.S_QBLOCKS,"g"),p=/\u2057/g,l=/\u2057(\d+)~/g,f={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},d='"in this?this:'+("object"!=typeof window?"global":"window")+").",h=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,v=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return e.version=Ze.version="v3.0.1",e}(),Ye=function(e){e=e||{};var t={},n=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(n,r){return"function"==typeof r&&(t[n]=t[n]||[]).push(r),e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,r){if("*"!=n||r)if(r)for(var o,i=t[n],a=0;o=i&&i[a];++a)o==r&&i.splice(a--,1);else delete t[n];else t={};return e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,n){function r(){e.off(t,r),n.apply(e,arguments)}return e.on(t,r)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(r){var o,i,a,s=arguments,u=arguments.length-1,c=new Array(u);for(a=0;a<u;a++)c[a]=s[a+1];for(o=n.call(t[r]||[],0),a=0;i=o[a];++a)i.apply(e,c);return t["*"]&&"*"!=r&&e.trigger.apply(e,["*",r].concat(c)),e},enumerable:!1,writable:!1,configurable:!1}}),e},et=Object.freeze({each:k,contains:j,toCamel:S,startsWith:P,defineProperty:E,extend:R}),tt=/^on/,nt={init:function(e,t,n){m(e,je),this.tag=t,this.expr=n,this.stub=document.createTextNode(""),this.pristine=e;var r=e.parentNode;return r.insertBefore(this.stub,e),r.removeChild(e),this},update:function(){var e=Ke(this.expr,this.tag);e&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=[],q.apply(this.tag,[this.current,this.expressions,!0])):!e&&this.current&&(se(this.expressions),this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current),this.current=null,this.expressions=[]),e&&$.call(this.tag,this.expressions)},unmount:function(){se(this.expressions||[]),delete this.pristine,delete this.parentNode,delete this.stub}},rt={init:function(e,t,n,r){return this.dom=e,this.attr=n,this.rawValue=r,this.parent=t,this.hasExp=Ke.hasExpr(r),this.firstRun=!0,this},update:function(){var e=this.rawValue;if(this.hasExp&&(e=Ke(this.rawValue,this.parent)),this.firstRun||e!==this.value){var t=this.parent&&ae(this.parent),n=this.tag||this.dom;!s(this.value)&&t&&le(t.refs,this.value,n),s(e)?m(this.dom,this.attr):(t&&pe(t.refs,e,n),w(this.dom,this.attr,e)),this.value=e,this.firstRun=!1}},unmount:function(){var e=this.tag||this.dom,t=this.parent&&ae(this.parent);!s(this.value)&&t&&le(t.refs,this.value,e),delete this.dom,delete this.parent}},ot=/<yield\b/i,it=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,at=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,st=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,ut={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},ct=Ve&&Ve<10?Fe:Le,pt="div",lt={},ft=lt[_e]={},dt=0,ht=0,vt=Object.freeze({getTag:ne,inheritFrom:re,moveChildTag:oe,initChildTag:ie,getImmediateCustomParentTag:ae,unmountAll:se,getTagName:ue,cleanUpData:ce,arrayishAdd:pe,arrayishRemove:le,isInStub:fe,mountTo:de,makeVirtual:he,moveVirtual:ve,selectTags:ye}),yt=Object.create(Ze.settings),gt={tmpl:Ke,brackets:Ze,styleManager:Xe,vdom:be,styleNode:Xe.styleNode,dom:He,check:Be,misc:et,tags:vt},mt=G,bt=J,wt=Q,_t=X,Ot=Z,xt=K,kt=Y,jt=Ye,St={settings:yt,util:gt,Tag:mt,tag:bt,tag2:wt,mount:_t,mixin:Ot,update:xt,unregister:kt,observable:jt};e.settings=yt,e.util=gt,e.Tag=mt,e.tag=bt,e.tag2=wt,e.mount=_t,e.mixin=Ot,e.update=xt,e.unregister=kt,e.observable=jt,e.default=St,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onUse=t.Form=t.View=t.Connect=t.provider=t.Ninjia=t.router=t.Component=void 0;var o=n(33),i=r(o),a=n(114),s=r(a),u=n(101),c=r(u),p=n(31),l=n(14),f=n(103),d=r(f),h=i.default.hub;h.subscribe("history-pending",function(e,t,n,r,o){e&&e.tag&&e.tag.trigger("before-leave"),o()}),h.subscribe("history-resolve",function(e,t,n,r,o,i){i()}),h.on("history-success",function(e,t){}),h.setHandler(function(e,t){if(!i.default.app)return void console.warn("\n\t\t\trouter hub expected a handler.\n\t\t\tplz invoke [app.router] to set the handler to hub.\n\t\t");var n="enter"===e?"$enter":"$leave";i.default.app.store.dispatch({type:n,payload:t})}),t.Component=s.default,t.router=i.default,t.Ninjia=c.default,t.provider=p.provider,t.Connect=p.Connect,t.View=l.View,t.Form=d.default,t.onUse=o.onUse},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=n(5),s=r(a),u=n(1),c=r(u),p=n(6),l=r(p),f=n(88),d=r(f),h=n(10),v=r(h),y=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r(),a=o.gift,n({type:"record/reset"}),s=localStorage.getItem("order:capacity"),u=JSON.parse(s),e.next=6,n(l.default.getGiftById(u.gift));case 6:n({type:"order/update",payload:u}),t();case 8:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=localStorage.getItem("order:recorded")){e.next=5;break}return widgets.Alert.add("warning","当前订单已过期",2e3),setTimeout(function(){(0,c.default)("/")},2e3),e.abrupt("return");case 5:a=JSON.parse(o),n({type:"order/update",payload:a}),n(l.default.getGiftById(a.gift)),t();case 9:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/wx_qrcode?scene=giftSubToPushUnconsumedSuborder");case 2:o=e.sent,n({type:"qrcode/subscribe/update",payload:o.response.ticket}),t();case 5:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=o(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(o,i){var a,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i(),u=a.order,u.localId){e.next=4;break}return widgets.Alert.add("warning",app.config.errors.VOICE_EXPECTED.message,2e3),e.abrupt("return");case 4:return e.next=6,s.default.uploadVoice({localId:u.localId,isShowProgressTips:1});case 6:return c=e.sent,u.serverId=c.serverId,o({type:"order/update",payload:u}),e.next=11,o(_.apply(n,[t]));case 11:case"end":return e.stop()}},e,r)}));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=o(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(t,o){var i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.submitted=!0,setTimeout(function(){n.submitted=!1},5e3),i=o().order){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,$.post("/gift/"+i.gift+"/preorder",i);case 7:return a=e.sent,e.prev=8,e.next=11,s.default.chooseWXPay({timestamp:a.timestamp,nonceStr:a.nonceStr,
package:a.package,signType:a.signType,paySign:a.paySign});case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(8),n.submitted=!1,"cancel"===e.t0.type?widgets.Alert.add("warning",app.config.errors.PAY_CANCEL.message,2e3):widgets.Alert.add("warning",app.config.errors.PAY_FAIL.message,2e3),e.abrupt("return");case 18:(0,c.default)("/order/"+a.id+"/ready");case 19:case"end":return e.stop()}},e,r,[[8,13]])}));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=o(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(o,a){var s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=n.req.query.type,u={type:s},o({type:"record/reset"}),o({type:"order/init"}),"one2one"===s?u.capacity=1:u.capacity=2,u.gift=r.opts.gift.id,o({type:"order/update",payload:u}),t();case 8:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n,r){return e.apply(this,arguments)}}(),x=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(P());case 2:return o=r(),a=o.order,s=o.user,e.next=5,d.default.isUserReceived(a.id,s.openid);case 5:return u=e.sent,n({type:"order/update",payload:{isUserReceived:u}}),e.next=9,d.default.receivedCount(a.id);case 9:c=e.sent,n({type:"order/update",payload:{receivedCount:c}}),t&&t();case 12:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=o(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/order?my=true");case 2:o=e.sent,n({type:"orders/update"}),t&&t();case 5:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n,r){return e.apply(this,arguments)}}(),j=function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r().orders,!o.busy){e.next=3;break}return e.abrupt("return");case 3:return n({type:"orders/busy",payload:!0}),a=o.params,t&&(a.my=!0),Object.assign(a,{limit:o.limit,page:o.page}),e.next=9,$.get("/gift/order/list/s?"+$.util.querystring.stringify(a));case 9:if(s=e.sent,u=s[0],c=s[1],n({type:"orders/count",payload:u}),n({type:"orders/add",payload:c}),n({type:"orders/page/increase"}),!(r().gifts.items.length+c.length>=u)){e.next=18;break}return n({type:"orders/busy",payload:!0}),e.abrupt("return");case 18:n({type:"orders/unbusy",payload:!0});case 19:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(v.default.nextPage());case 2:o=r(),a=o.suborderInteracts,s=o.user,u=a.suborders.filter(function(e){return e.userOpenId===s.openid})[0],u||location.reload(),n({type:"suborder/update",payload:u}),t();case 7:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(t,n){var r,o,a,u,c,p,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),o=r.order,a=r.user,u=o.gift.info.cover?app.config.phtUri+o.gift.info.cover:app.config.images.SHARE_DEF_COVER,c=location.origin+("/order/"+o.id+"/state"),p={title:o.sender.name+app.config.messages.SHARE_INFO+o.gift.info.name,link:c,imgUrl:u},l={title:o.sender.name+app.config.messages.SHARE_INFO,desc:o.gift.info.name,link:c,imgUrl:u},e.next=7,s.default.config();case 7:wx.onMenuShareTimeline(p),wx.onMenuShareAppMessage(l),wx.onMenuShareQQ(l),wx.onMenuShareWeibo(l);case 11:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(P());case 2:return o=r(),a=o.order,e.next=5,d.default.receivedCount(a.id);case 5:s=e.sent,n({type:"order/update",payload:{receivedCount:s}}),t&&t();case 8:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(t,n){var r,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),o=r.order,a=r.user,s=function(e){return e.receivers&&e.receivers[0]&&e.receivers[0].telephone||!1},s(o)||"logistics"!==o.gift.scene||t({type:"order/receive/collection",payload:!0});case 3:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,o){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(T(n.req.params.id));case 2:t();case 3:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/order/"+t+"/detail");case 2:o=e.sent,n({type:"order/update",payload:o});case 4:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),M=function(){widgets.Modal.open({tag:"gift-share-modal",size:"lg"})},I=function(){widgets.Modal.open({tag:"order-gift-detail"})},A=function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,s,u,p,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r(),a=o.order,s=o.user,u=o.suborder,t||(t={},t.scene="wb"),t.poi?t.scene="poi":t.address&&(t.scene="logistics"),e.prev=3,e.next=6,$.post("/gift/order/"+a.id+"/address",t);case 6:p=e.sent,p.rc||console.error("saveAddr",app.config.errors.NO_RES_CODE.message),e.t0=p.rc,e.next=1===e.t0?11:2===e.t0?13:3===e.t0?15:4===e.t0?17:29;break;case 11:return widgets.Alert.add("warning",app.config.messages.GIFT_SAVED,2e3),e.abrupt("break",31);case 13:return widgets.Alert.add("warning",app.config.messages.NO_GIFT_LEFT,2e3),e.abrupt("break",31);case 15:return widgets.Alert.add("warning",app.config.messages.INFO_INCOMPLETE,2e3),e.abrupt("break",31);case 17:if(l=p.suborder,f=$.util.omit(l,"updatedAt","order","gift","express"),n({type:"order/suborders/add",payload:f}),"logistics"!==t.scene){e.next=22;break}return e.abrupt("return",(0,c.default)("/gift/"+a.gift.id+"/share"));case 22:if("poi"!==t.scene){e.next=26;break}if(!s.subscribe){e.next=25;break}return e.abrupt("return",(0,c.default)("/order/"+a.id+"/state"));case 25:return e.abrupt("return",(0,c.default)("/order/"+a.id+"/subscribe"));case 26:if("wb"!==t.scene){e.next=28;break}return e.abrupt("return",(0,c.default)("/order/"+a.id+"/received"));case 28:return e.abrupt("break",31);case 29:return widgets.Alert.add("warning",app.config.errors.SERVER_ERROR.message,2e3),e.abrupt("break",31);case 31:e.next=37;break;case 33:e.prev=33,e.t1=e.catch(3),console.error(e.t1),widgets.Alert.add("warning",app.config.errors.SERVER_ERROR.message,2e3);case 37:case"end":return e.stop()}},e,i,[[3,33]])}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}();t.default={enterOrderReceive:y,enterOrderPay:m,enterOrderPlace:g,enterOrderRecord:O,enterOrderSubscribe:b,enterOrderReady:E,enterOrderReceived:S,enterOrderReadyOne2One:R,enterOrderState:x,enterOrderList:k,enterOrderDetail:C,nextPage:j,getOrderById:T,shareOrder:M,giftDetail:I,orderReceiveSubmit:A,wxPay:_,place:w}},function(e,t){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=navigator.userAgent,u={isAndroid:s.indexOf("Android")>-1||s.indexOf("Adr")>-1,isiOS:!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},c=(i=o=function(){function e(){var t=this;r(this,e),this.cmdQueue=new p,this.configList=e.methods,this.init(),e.methods.forEach(function(e){var n=t;n[e]=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=new Promise(function(t,o){n.cmdQueue.enqueue({$location:window.location.href,method:e,args:r,ctx:n,resolve:t,reject:o,done:function(n){if("fail"===n.type||"cancel"===n.type){var r="[wx:jssdk] Reject action. [method]: "+e+", [type]: "+n.type+", [reason]: "+(n.payload&&n.payload.errMsg),i=new Error(r);return i.type=n.type,i.originMsg=n.payload&&n.payload.errMsg||null,o(i.originMsg)}t(n.payload)}})});return setTimeout(function(){i.catch(function(e){})},0),i}})}return e.prototype.init=function(){function e(){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForWxJsApi(1e3);case 2:wx.error(function(e){});case 3:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.waitForWxJsApi=function(){function e(){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"==typeof wx&&setTimeout(n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitForWxJsApi(r);case 2:case"end":return e.stop()}},e,t)})),r),console.info("[wx:jssdk]: wx is ready.");case 2:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.config=function(){function e(){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._config();case 2:return e.next=4,new Promise(function(e,t){wx.ready(function(){e()})});case 4:case"end":return e.stop()}},e,this)}));return e}(),e.prototype._config=function(){function t(e){return r.apply(this,arguments)}var r=n(regeneratorRuntime.mark(function t(n){var r,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=location.href,t.next=3,$.get("/wechat/sign/jssdk?type=jsapi&url="+encodeURIComponent(r).replace("%3A",":"));case 3:if(o=t.sent,n||(n=e.methods),Array.isArray(n)){t.next=8;break}return alert("[wx:jssdk]: wx config expected a array, but "+("undefined"==typeof n?"undefined":a(n))),t.abrupt("return");case 8:i={debug:!1,appId:o.appId,timestamp:o.timestamp,nonceStr:o.nonceStr,signature:o.signature,jsApiList:n},this.configList=n,wx.config(i);case 11:case"end":return t.stop()}},t,this)}));return t}(),e.prototype.ready=function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Promise(function(){var e=n(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(){wx.ready(function(){t(),clearTimeout(r)})},r=setTimeout(function(){n("wx js api is timeout.")},5e3),u.isiOS?i():o._config().then(i);case 3:case"end":return e.stop()}},e,o)}));return function(t,n){return e.apply(this,arguments)}}()),e.next=3,r;case 3:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.exec=function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,s,u,c,p,l,f,d,h=t.method,v=t.args,y=t.done,g=t.$location;t.resolve,t.reject;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=function(e){c&&c(),i&&i(),y({type:"fail",payload:e})},f=function(e){p&&p(),a&&a(),y({type:"cancel",payload:e})},l=function(e){u&&u(),o&&o(),y({type:"success",payload:e})},e.prev=3,e.next=6,this.ready(g);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(3),e.abrupt("return");case 11:n=v[0],r=void 0===n?{}:n,o=v[1],i=v[2],a=v[3],s=v[4],u=r.success,c=r.fail,p=r.cancel,r.success=l,r.fail=d,r.cancel=f,wx[h].apply(wx,[r]);case 19:case"end":return e.stop()}},e,this,[[3,8]])}));return e}(),e}(),o.methods=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard","editAddress"],i),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;r(this,e),this.limit=t,this.busy=!1,this.queue=[],this.ready=!1}return e.prototype.waitForWxJsApi=function(){function e(){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"==typeof wx&&setTimeout(n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitForWxJsApi(r);case 2:case"end":return e.stop()}},e,t)})),r),this.ready=!0,console.info("[wx:jssdk]: wx is ready.");case 3:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.enqueue=function(e){return this.crashed?void console.warn("Wechat js sdk crashed."):(this.queue.push(e),void(this.busy||this.startUp()))},e.prototype.startUp=function(){function e(){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.queue[0],!this.crashed){e.next=5;break}return this.queue=[],this.busy=!1,e.abrupt("return");case 5:if(t){e.next=8;break}return this.busy=!1,e.abrupt("return");case 8:if(this.busy=!0,this.ready){e.next=12;break}return e.next=12,this.waitForWxJsApi();case 12:return e.next=14,this.exec(t);case 14:return e.next=16,this.startUp();case 16:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.exec=function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ctx,r=t.args,o=t.method,e.prev=1,e.next=4,n.exec(t);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),console.warn("\n\t\t\t\tWechat js sdk crashed. a error ocurr in cmd queue.\n\t\t\t\t[message]: "+e.t0.message+"\n\t\t\t"),this.crashed=!0,e.abrupt("return");case 11:this.queue.splice(0,1);case 12:case"end":return e.stop()}},e,this,[[1,6]])}));return e}(),e}();t.default=new c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=n(5),s=r(a),u=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,o){var a,s,u,c,p,l,f,d,h,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=20,s=n.req.params.id,e.next=4,$.get("/gift/order/list/s?limit="+a+"&id="+s);case 4:if(u=e.sent,!u[1].length){e.next=23;break}c=[],p=0,l=u[1].length;case 8:if(!(p<l)){e.next=22;break}f=u[1][p],d=0,h=f.receivers.length;case 11:if(!(d<h)){e.next=19;break}if(v=f.receivers[d],!(c.length>=a)){e.next=15;break}return e.abrupt("break",19);case 15:c.push(v);case 16:d++,e.next=11;break;case 19:p++,e.next=8;break;case 22:r({type:"/gift/suborders/update",payload:c});case 23:t();case 24:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),c=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"gifts/reset"}),o=r().merchant,a={title:o.info.name+app.config.messages.SHARE_DESC,link:location.href,imgUrl:app.config.images.SHARE_DEF_COVER},u={title:o.info.name+app.config.messages.SHARE_DESC,desc:app.config.messages.SHARE_DETAIL_CARE,link:location.href,imgUrl:app.config.images.SHARE_DEF_COVER},e.next=6,s.default.config();case 6:wx.onMenuShareTimeline(a),wx.onMenuShareAppMessage(u),wx.onMenuShareQQ(u),wx.onMenuShareWeibo(u),t();case 11:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(t,n){var r,o,a,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n().gifts,!r.busy){e.next=3;break}return e.abrupt("return");case 3:return t({type:"gifts/busy",payload:!0}),o=r.params,Object.assign(o,{limit:r.limit,page:r.page}),e.next=8,$.get("/gift?"+$.util.querystring.stringify(o));case 8:if(a=e.sent,s=a[0],u=a[1],t({type:"gifts/count",payload:s}),t({type:"gifts/add",payload:u}),t({type:"gifts/page/increase"}),!(n().gifts.items.length+u.length>=s)){e.next=17;break}return t({type:"gifts/busy",payload:!0}),e.abrupt("return");case 17:t({type:"gifts/unbusy",payload:!0});case 18:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,o){var a,u,c,p,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.req.params.id,e.next=3,r({type:"order/init"});case 3:return e.next=5,r(f(a));case 5:return u=o(),c=u.gift,p=c.info.cover?app.config.phtUri+c.info.cover:app.config.images.SHARE_DEF_COVER,l={title:c.info.name,imgUrl:p},d={title:c.info.name,desc:app.config.messages.SHARE_DETAIL_CARE,imgUrl:p},e.next=11,s.default.config();case 11:wx.onMenuShareTimeline(l),wx.onMenuShareAppMessage(d),wx.onMenuShareQQ(d),wx.onMenuShareWeibo(d),t();case 16:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/"+t);case 2:o=e.sent,n({type:"gift/update",payload:o});case 4:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(t,n){var r,o,a,u,c,p,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),o=r.order,a=o.gift,u=null,!a.status||!a.status.lbs){e.next=21;break}return e.prev=4,e.next=7,s.default.getLocation();case 7:u=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),widgets.Alert.add("warning",app.config.errors.LOCATION_NOAUTH.message);case 13:return c=$.util.querystring.stringify({tag:a.poitag,latitude:u.latitude||0,longitude:u.longitude||0}),e.next=16,$.get("/wechat/poi?"+c);case 16:p=e.sent,t({type:"pois/update",payload:p}),t({type:"poi/loaded",payload:!0}),e.next=27;break;case 21:return l=a.poitag?"/wechat/poi?tag="+a.poitag:"/wechat/poi",e.next=24,$.get(l);case 24:f=e.sent,t({type:"pois/update",payload:f}),t({type:"poi/loaded",payload:!0});case 27:case"end":return e.stop()}},e,i,[[4,10]])}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),h=function(e){return{type:"suborder/update",payload:{poi:e}}};t.default={enterGiftList:c,enterGiftShare:u,enterGiftDetail:l,nextPage:p,getPois:d,selectPoi:h,getGiftById:f}},function(e,t,n){"use strict";function r(e){return o(e,"$name","$dirty","$pristine","$valid","$invalid","$submitted","$error","$ok","$allPristine","$allDirty","$validate","$meta")}function o(){var e=[].slice.apply(arguments),t=e[0],n=e.slice(1),r={};for(var o in t)n.indexOf(o)<0&&(r[o]=t[o]);return r}function i(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function a(e,t){e.classList?e.classList.add(t):i(e,t)||(e.className+=" "+t)}function s(e,t){if(e.classList)e.classList.remove(t);else if(i(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(e){return Object.keys(e).map(function(t){return e[t]})},p=function(e){setTimeout(e,0)},l=function(){return Object.assign.apply(Object,arguments)},f=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++)t.indexOf(e[r])>=0&&n.push(e[r]);return n},d=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).filter(function(e){return n.indexOf(e)>=0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},h=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n[0];return Array.isArray(o)&&(n=o),Object.keys(e).filter(function(e){return n.indexOf(e)<0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},v=function e(t){if(!t)return t;var n,r=[Number,String,Boolean];if(r.forEach(function(e){t instanceof e&&(n=e(t))}),"undefined"==typeof n)if("[object Array]"===Object.prototype.toString.call(t))n=[],t.forEach(function(t,r,o){n[r]=e(t)});else if("object"==("undefined"==typeof t?"undefined":u(t)))if(t.nodeType&&"function"==typeof t.cloneNode)var n=t.cloneNode(!0);else if(t.prototype)n=t;else if(t instanceof Date)n=new Date(t);else{n={};for(var o in t)n[o]=e(t[o])}else n=t;return n},y={stringify:function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},parse:function(e){return e.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})}},g=null,m=function(e,t){clearTimeout(g),g=setTimeout(function(){e.apply(context),g=null},t)},b=function e(t,n){return t&&n&&"object"===("undefined"==typeof t?"undefined":u(t))&&"object"===("undefined"==typeof n?"undefined":u(n))?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce(function(r,o){return r&&e(t[o],n[o])},!0):t===n},w=function(e){if(!e||"string"!=typeof e)throw new Error("[util-line to camel]: expected a string");return e.split("-").reduce(function(e,t){var n=t.slice(0,1),r=t.slice(1);return""+e+n.toUpperCase()+r},"")},_=function(e){for(var t="",n=0,r=e.length;n<r;n++){var o=e.charAt(n);t+=/^[A-Z]+$/.test(o)?0===n?""+o.toLowerCase():"-"+o.toLowerCase():o}return t};t.default={values:c,mixin:l,querystring:y,throttle:m,clone:v,deepEqual:b,omit:h,pick:d,camelToLine:_,lineToCamel:w,exclude:o,extractField:r,hasClass:i,addClass:a,removeClass:s,intersect:f,nextTick:p}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=n(5),s=(r(a),n(1)),u=(r(s),n(10)),c=r(u),p=n(27),l=r(p),f=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,s,u,c,p,f,d,h,v,y,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r(),a=o.order,e.next=3,l.default.getSuborders(a.id,{status:"shipping"});case 3:return s=e.sent,u=s[0],e.next=7,l.default.getSuborders(a.id,{status:"read"});case 7:return c=e.sent,p=c[0],e.next=11,l.default.getSuborders(a.id);case 11:return f=e.sent,d=f[0],n({type:"suborderCount/update",payload:{readCount:p,shippedCount:u,receivedCount:d}}),e.next=16,l.default.getLatestTime(a.id);case 16:h=e.sent,v=h[0],y=h[1],g=h[2],n({type:"suborderLatestTime/update",payload:{receivedTime:v,shippedTime:y,readTime:g}}),t();case 22:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(c.default.nextPage({status:"read"}));case 2:t();case 3:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(c.default.nextPage());case 2:t();case 3:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(c.default.nextPage({status:"shipping"}));case 2:t();case 3:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}();t.default={enterPersonal:f,enterPersonalOrderInfo:d,enterPersonalOrderInfoListened:h,enterPersonalOrderInfoReceived:v,enterPersonalOrderInfoShipped:y}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),a=function(e,t,n){var r=n.store.getState,o=r(),a=o.order,s=o.user;return a.sender.id===s.id?(0,i.default)("/order/"+a.id+"/ready"):void e();
},s=function(e,t,n){var r=n.store.getState,o=r(),a=o.order,s=o.user;return a.sender.id!=s.id?(widgets.Alert.add("danger",app.config.errors.NORIGHT_OPEN_PAGE.message,2e3),void setTimeout(function(){(0,i.default)("/")},2e3)):void e()};t.default={isSender:s,isNotSender:a}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=n(27),s=r(a),u=function(){var e=o(regeneratorRuntime.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,u,c,p,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r().suborderInteracts,a=r().order,!o.busy){e.next=4;break}return e.abrupt("return");case 4:return n({type:"suborderInteracts/busy",payload:!0}),u=o.params,Object.assign(u,{limit:o.limit,page:o.page},t),e.next=9,s.default.getSuborders(a.id,u);case 9:if(c=e.sent,p=c[0],l=c[1],n({type:"suborderInteracts/count",payload:p}),n({type:"suborderInteracts/add",payload:l}),n({type:"suborderInteracts/page/increase"}),!(o.suborders.length+l.length>=p)){e.next=18;break}return n({type:"suborderInteracts/busy",payload:!0}),e.abrupt("return");case 18:n({type:"suborderInteracts/unbusy",payload:!0});case 19:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}();t.default={nextPage:u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.parent?o(e.parent):e}function i(e){return(0,c.default)(e,"provider expect a state store"),function(t){return(0,c.default)("object"===("undefined"==typeof t?"undefined":s(t))&&t instanceof riot.Tag,"\n\t\t\tprovider expect a riot tag instead of "+t),t.opts.store=e,p=t}}function a(e){return p||o(e)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i,t.getProvider=a;var u=n(32),c=r(u),p=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var o=n(40),i=r(o),a=n(146),s=r(a),u=n(145),c=r(u),p=n(144),l=r(p),f=n(39),d=r(f),h=n(41);r(h);t.createStore=i.default,t.combineReducers=s.default,t.bindActionCreators=c.default,t.applyMiddleware=l.default,t.compose=d.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=n(1),s=r(a),u=n(5),c=r(u),p=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(r,o){var a,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o(),u=a.user,e.next=3,$.get("/gift/order/"+n.req.params.id+"/detail");case 3:if(c=e.sent,r({type:"bigpack/update",payload:c}),u.subscribe||"wb"==c.gift.scene){e.next=8;break}return t(),e.abrupt("return",(0,s.default)("/bigpack/"+c.id+"/subscribe"));case 8:if(!c.sender||c.sender.openid!==u.openid){e.next=10;break}return e.abrupt("return",(0,s.default)("/order/"+c.id+"/ready"));case 10:t();case 11:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r(),a=o.user,u=o.bigpack,!u.sender){e.next=7;break}if(u.sender.id!==a.id){e.next=4;break}return e.abrupt("return",(0,s.default)("/order/"+u.id+"/ready"));case 4:return widgets.Alert.add("danger",app.config.messages.GIFT_RECEIVED,2e3),setTimeout(function(){(0,s.default)("/")},2e3),e.abrupt("return");case 7:t();case 8:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r(),a=o.user,u=o.bigpack,!u.sender){e.next=7;break}if(u.sender.id!==a.id){e.next=4;break}return e.abrupt("return",(0,s.default)("/order/"+u.id+"/ready"));case 4:return widgets.Alert.add("danger",app.config.messages.GIFT_RECEIVED,2e3),setTimeout(function(){(0,s.default)("/")},2e3),e.abrupt("return");case 7:t();case 8:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=o(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.chooseImage({count:1,sizeType:["compressed"]});case 3:if(r=e.sent,r.localIds.length){e.next=6;break}throw new Error("image expected.");case 6:t({type:"bigpack/update",payload:{localId:r.localIds[0]}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),widgets.Alert.add("danger",app.config.messages.UPLOAD_IMAGE_FAILED,2e3);case 12:case"end":return e.stop()}},e,i,[[0,9]])}));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=o(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",function(){var e=o(regeneratorRuntime.mark(function e(n,r){var o,a,u,p,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),o=r(),a=o.bigpack,u=o.user,a.localId){e.next=6;break}return widgets.Alert.add("danger",app.config.messages.UPLOAD_IMAGE_FAILED,2e3),e.abrupt("return");case 6:return e.next=8,c.default.uploadImage({localId:a.localId,isShowProgressTips:1});case 8:return p=e.sent,a.serverId=p.serverId,e.next=12,$.post("/gift/order/"+a.id+"/complete",a);case 12:a.sender=u,n({type:"order/update",payload:a}),l=r(),f=l.order,(0,s.default)("/order/"+a.id+"/ready"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),widgets.Alert.add("danger",e.t0.message,2e3);case 21:case"end":return e.stop()}},e,i,[[0,18]])}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,i)}));return function(t,n){return e.apply(this,arguments)}}();t.default={enterBigpackDetail:p,enterBigpackRecord:l,enterBigpackShoot:f,uploadImage:d,onSubmit:h}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(e){return function(e){return function(t){return"route"===t.type,e(t)}}}}function i(e,t){e.off("state-search").on("state-search",function(e){var n=e.param,r=e.value,o=t.getState().route,i=o.data.req.query;i[n]=r,o(o.$location+"?"+$.util.querystring.stringify(i),null,!0)}),e.off("state-change").on("state-change",function(e){t.dispatch({type:"$route",payload:{route:e}})}),e.off("sync-state-query").on("sync-state-query",function(e){t.dispatch({type:"$query",payload:e})}),e.off("busy-pending").on("busy-pending",function(){}),e.off("busy-resolve").on("busy-resolve",function(){})}Object.defineProperty(t,"__esModule",{value:!0}),t.View=t.syncHistoryWithStore=t.routerMiddlewareCreator=void 0;var a=n(1),s=(r(a),n(109)),u=r(s);t.default={routerMiddlewareCreator:o,syncHistoryWithStore:i,View:u.default},t.routerMiddlewareCreator=o,t.syncHistoryWithStore=i,t.View=u.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.provider=t.connect=void 0;var o=n(134),i=r(o),a=n(36),s=r(a);t.connect=i,t.provider=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(e){return function(e){return function(t){return"route"===t.type,e(t)}}}}function i(e,t){e.off("state-search").on("state-search",function(e){var n=e.param,r=e.value,o=t.getState().route,i=o.data.req.query;i[n]=r,o(o.$location+"?"+$.util.querystring.stringify(i),null,!0)}),e.off("state-change").on("state-change",function(e){t.dispatch({type:"$route",payload:{route:e}})}),e.off("sync-state-query").on("sync-state-query",function(e){t.dispatch({type:"$query",payload:e})}),e.off("busy-pending").on("busy-pending",function(){}),e.off("busy-resolve").on("busy-resolve",function(){})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=(r(a),n(138));t.default={routerMiddlewareCreator:o,syncHistoryWithStore:i,view:s.view}},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){return e===t}function o(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,o=null;return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null!==n&&n.length===i.length&&i.every(function(e,r){return t(e,n[r])})||(o=e.apply(void 0,i)),n=i,o}}function i(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return t}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];var s=0,u=o.pop(),c=i(o),p=e.apply(void 0,[function(){return s++,u.apply(void 0,arguments)}].concat(r)),l=function(e,t){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];var a=c.map(function(n){return n.apply(void 0,[e,t].concat(o))});return p.apply(void 0,n(a))};return l.resultFunc=u,l.recomputations=function(){return s},l.resetRecomputations=function(){return s=0},l}}function s(e){var t=arguments.length<=1||void 0===arguments[1]?u:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=o,t.createSelectorCreator=a,t.createStructuredSelector=s;var u=t.createSelector=a(o)},function(e,t,n){function r(e){return n(o(e))}function o(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./app/app.reducers":20,"./bigpack/bigpack.reducers":21,"./gift/gift.reducers":22,"./order/order.reducers":26,"./suborder/suborder.reducers":28};r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=18},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(2),d=r(f),h=n(48),v=r(h),y=n(3),g=(s=(0,y.Connect)(function(e){return{clientWidth:e.clientWidth,clientHeight:e.clientHeight}},function(e){return{setClientWidth:function(){return e(v.default.setClientWidth())},setClientHeight:function(){return e(v.default.setClientHeight())}}}),s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){var t=this;window.addEventListener("resize",function(){$.util.throttle(function(){t.opts.setClientWidth(),t.opts.setClientHeight()},50)},!0)},l(t,[{key:"name",get:function(){return"app"}},{key:"tmpl",get:function(){return"\n\t\t\t<router-outlet></router-outlet>\n\t\t"}}]),t}(d.default.Tag),c.originName="app",u=p))||u);t.default=g},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case"maskShow":return e=!0;case"maskHidden":return e=!1;default:return e}},r=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body.clientWidth,t=arguments[1];return"body/clientWidth"===t.type?e=t.payload:e},o=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:screen.height,t=arguments[1];return"body/clientHeight"===t.type?e=t.payload:e},i=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"91拼团",t=arguments[1];return"changeTitle"===t.type?e=t.payload:e},a=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,arguments[1]);return e},s=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return"user"===t.type?e=t.payload:e},u=function e(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];switch(t.type){case"hideBar":return!1;default:return e}},c=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"merchant":return Object.assign({},e,t.payload);default:return e}},p=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pos:0,direction:"down"},t=arguments[1];if("scroll"===t.type){if(t.payload-e.pos>0)return e={pos:t.payload,direction:"down"};e={pos:t.payload,direction:"up"}}return e};t.default={clientWidth:r,clientHeight:o,mask:n,merchant:c,user:s,title:i,showBar:u,scroll:p,lastAction:a}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={localId:null,serverId:null,name:null,capacity:null,type:null,gift:null},r=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case"bigpack/init":return n;case"bigpack/update":return Object.assign({},e,t.payload);default:return e}};t.default={bigpack:r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={loaded:!1},r=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case"poi/loaded":return Object.assign({},e,{loaded:t.payload});default:return e}},o=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case"qrcode/subscribe/update":return t.payload;default:return e}},i={items:[],busy:!1,page:1,limit:10,params:{},count:0},a=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"gifts/reset":return i;case"gifts/init":return Object.assign({},e,t.payload);case"gifts/params/update":return Object.assign({},e,{params:t.payload});case"gifts/page/increase":return Object.assign({},e,{page:e.page+1});case"gifts/busy":return Object.assign({},e,{busy:!0});case"gifts/unbusy":return Object.assign({},e,{busy:!1});case"gifts/count":return Object.assign({},e,{count:t.payload});case"gifts/add":return Object.assign({},e,{items:[].concat(e.items,t.payload)});default:return e}},s=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"gift/update":return Object.assign({},e,t.payload);default:return e}},u=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"/gift/suborders/update":return t.payload;default:return e}},c=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"pois/update":return[].concat(t.payload);default:return e}};t.default={gifts:a,gift:s,suborders:u,pois:c,poi:r,qrForSubscribe:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(2),d=r(f),h=n(1),v=(r(h),n(3)),y=(s=(0,v.Connect)(function(e){return{order:e.order,clientWidth:e.clientWidth}}),(0,v.View)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},t.prototype.dismiss=function(){this.trigger("dismiss")},l(t,[{key:"name",get:function(){return"order-gift-detail"}},{key:"tmpl",get:function(){return'\n      <div class="gift_dets" onclick="{ dismiss }">\n        <div class="dets_conts">\n          <span class="title">礼物详情</span>\n          <div class="contents">\n            <raw content="{ opts.order.gift.info.detail }"></raw>\n          </div>\n        </div>\n      </div>\n    '}}]),t}(d.default.Tag),c.originName="order-gift-detail",u=p))||u)||u);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(5),w=(r(b),n(4)),_=r(w),O=(u=(0,m.Connect)(function(e){return{gift:e.gift,order:e.order,clientWidth:e.clientWidth,clientHeight:e.clientHeight,recordState:e.record}},function(e){return{enterOrderPlace:function(t,n){return e(_.default.enterOrderPlace(t,n))},place:function(t){return e(_.default.place.apply(this))}}}),c=(0,m.onUse)("enterOrderPlace"),(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-place"}},{key:"tmpl",get:function(){return'\n      <div class="order_place" style="height: { opts.clientHeight }px">\n        <div class="order_voice" style="height: { opts.clientHeight * 0.55 }px">\n          <span class="title">录制语音祝福</span>\n          <order-record-voice></order-record-voice>\n        </div>\n        <div class="order_wepay" style="height: { (opts.clientHeight * 0.45) - 30 }px">\n          <div class="info">\n            <img riot-src="{ opts.gift.info.cover ? \'http://\' + config.phtUri + opts.gift.info.cover + app.config.phtStlList4 : app.config.images.GIFT_DEF_COVER }">\n            <div class="info_right">\n              <span>{ opts.gift.info.name }</span>\n              <span>\n                <em>单价{ $.util.filter.currency(opts.gift.info.price) }</em>\n                <em>x{ opts.order.capacity }</em>\n              </span>\n            </div>\n          </div>\n          <div class="wepay">\n            <span>需支付</span>\n            <span>{ $.util.filter.currency(opts.order.capacity * opts.gift.info.price) }</span>\n          </div>\n          <div class="{ (opts.recordState.start || opts.recordState.stop) ? \'btn_disabled\' : \'btn_pay\' }">\n            <input type="button" onclick="{ opts.place.bind(this) }" value="支付" disabled="{ opts.recordState.start || opts.recordState.stop }" >\n          </div>\n        </div>\n      </div>\n    '}}]),t}(y.default.Tag),f.originName="order-place",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(4)),b=r(m),w=n(9),_=r(w),O=n(3),x=function(e,t){switch(e.scene){case"poi":return"poi";case"logistics":return"logistics";case"wb":return"wb";case"multi":if("poi"===t.scene)return"poi";if("logistics"===t.scene)return"logistics"}},k=(u=(0,O.Connect)(function(e){return{order:e.order,scene:x(e.order.gift,e.receive)}},function(e){return{share:b.default.shareOrder,enterOrderReceive:function(t,n){return e(b.default.enterOrderReceive(t,n))}}}),c=(0,O.onUse)([_.default.isNotSender,"enterOrderReceive"]),(0,O.Component)(p=(0,O.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-receive"}},{key:"tmpl",get:function(){return"\n\t\t\t<order-receive-poi if=\"{ opts.scene === 'poi' }\"></order-receive-poi>\n\t\t\t<order-receive-logistics if=\"{ opts.scene === 'logistics' }\"></order-receive-logistics>\n\t\t\t<order-receive-wb if=\"{ opts.scene === 'wb' }\"></order-receive-wb>\n\t\t"}}]),t}(y.default.Tag),f.originName="order-receive",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p)||p);t.default=k},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={start:!1,stop:!0,record:!1,playVoice:!1,stopVoice:!0},r=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case"record/reset":return n;case"record/update":return Object.assign({},e,t.payload);default:return e}},o={items:[],busy:!1,page:1,limit:10,params:{},count:0},i=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"orders/init":return Object.assign({},e,t.payload);case"orders/params/update":return Object.assign({},e,{params:t.payload});case"orders/page/increase":return Object.assign({},e,{page:e.page+1});case"orders/busy":return Object.assign({},e,{busy:!0});case"orders/unbusy":return Object.assign({},e,{busy:!1});case"orders/count":return Object.assign({},e,{count:t.payload});case"orders/add":return Object.assign({},e,{items:[].concat(e.items,t.payload)});default:return e}},a={localId:null,serverId:null,name:null,capacity:null,type:null,gift:null,receivers:[],receivedCount:0,isUserReceived:!1},s=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1];switch(t.type){case"order/init":return a;case"order/update":return Object.assign({},e,t.payload);case"order/suborders/add":return Object.assign({},e,{receivers:[].concat(e.receivers,[t.payload])});default:return e}},u=function e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return"order/receive/collection"===t.type?t.payload:e};t.default={order:s,orders:i,record:r,orderReceiveCollection:u}},function(e,t){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=this,o={};o.getSuborders=function(){var e=n(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/order/"+t+"/suborders?"+(n?$.util.querystring.stringify(n):""));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,r)}));return function(t,n){return e.apply(this,arguments)}}(),o.getLatestTime=function(){var e=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/order/"+t+"/latest_time");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),t.default=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={consignee:null,address:null,telephone:null,poi:null},r=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments[1];switch(t.type){case"suborder/init":return n;case"suborder/update":return Object.assign({},e,t.payload);default:return e}},o={suborders:[],busy:!1,page:1,limit:10,params:{},count:0},i=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1],n=t.type,r=t.payload;switch(n){case"suborderInteracts/init":return Object.assign({},e,r);case"suborderInteracts/params/update":return Object.assign({},e,{params:r});case"suborderInteracts/page/increase":return Object.assign({},e,{page:e.page+1});case"suborderInteracts/busy":return Object.assign({},e,{busy:!0});case"suborderInteracts/unbusy":return Object.assign({},e,{busy:!1});case"suborderInteracts/count":return Object.assign({},e,{count:r});case"suborderInteracts/add":return Object.assign({},e,{suborders:[].concat(e.suborders,r)});default:return e}},a={receivedCount:0,readCount:0,shippedCount:0},s=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments[1],n=t.type,r=t.payload;switch(n){case"suborderCount/init":return Object.assign({},e,r);case"suborderCount/update":return Object.assign({},e,r);default:return e}},u={receivedTime:null,shippedTime:null,readTime:null},c=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1],n=t.type,r=t.payload;switch(n){case"suborderLatestTime/init":return Object.assign({},e,r);case"suborderLatestTime/update":return Object.assign({},e,r);default:return e}};t.default={suborder:r,suborderInteracts:i,suborderCount:s,suborderLatestTime:c}},function(e,t,n){var r,o;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i){r=i,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o))}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,o,i){var a;if("undefined"!=typeof document){if(arguments.length>1){if(i=e({path:"/"},r.defaults,i),"number"==typeof i.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(e){}return o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}t||(a={});for(var u=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,p=0;p<u.length;p++){var l=u[p].split("="),f=l.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var d=l[0].replace(c,decodeURIComponent);if(f=n.read?n.read(f,d):n(f,d)||f.replace(c,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===d){a=f;break}t||(a[d]=f)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r(e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},function(e,t){"use strict";function n(e,t){if(!e||"string"!=typeof e)throw new Error("invalid validator name [name]="+e);
if(!t||"function"!=typeof t)throw new Error("invalid validator name [fn]="+t);r[e]=t}Object.defineProperty(t,"__esModule",{value:!0});var r={},o=[{name:"required",fn:function(e){return""===e.trim()}},{name:"max",fn:function(e,t){return parseInt(e.trim(),10)>t}},{name:"min",fn:function(e,t){return parseInt(e.trim(),10)<t}},{name:"maxlength",fn:function(e,t){return e.length>t}},{name:"minlength",fn:function(e,t){return e.length<t}},{name:"pattern",fn:function(e,t){return!new RegExp(t).test(e.trim())}}];o.map(function(e){n(e.name,e.fn)}),t.validators=r,t.registerValidators=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.provider=t.Connect=void 0;var o=n(105),i=r(o),a=n(11),s=r(a);t.Connect=i.default,t.provider=s.default},function(e,t){"use strict";function n(e,t){if("undefined"==typeof e||!e)throw new Error(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.onUse=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(43),c=r(u),p=n(1),l=r(p),f=n(7),d=(r(f),n(112)),h=r(d),v=n(113),y=r(v),g=n(111),m=r(g),b=function(){function e(t){o(this,e),this._root=null,this._busy=!1,this._routes=[],this._defaultRoute=null,this._location=null,this._prev=null,this.state={},this._title=null,this._emitter=t,this.refinedRoutes=[],this.prevHints=[],this.currHints=[],this.evtListeners=[]}return e.prototype.startup=function(){return this._parseRoute(),l.default.base("/"),(0,l.default)(this.doRoute.bind(this)),y.default.nextTick(function(){l.default.start(),l.default.exec()}),this},e.prototype.parse=function(e){var t={},n=e.split("?"),r=n[0],o=n[1],i=null;this.location&&(i=y.default.compareUrl(this.location,r));var a=""===r||"/"===r?["/"]:r.split("/");if(t.query={},o&&o.split("&").map(function(e){return t.query[e.split("=")[0]]=e.split("=")[1]}),t.hints=[],a.length)for(var s=0,u=a.length;s<u;s++){var c=a[s];0===s?t.hints.push(y.default.completePart(c)):t.hints.indexOf(c)<0&&t.hints.push(y.default.combineUriParts(a,s,c))}return t},e.prototype._parseRoute=function(){return l.default.parser(this.parse.bind(this)),this},e.prototype.matches=function(e){var t=e.routes,n=e.location,r=this.parse(n);return this.doRoute(r,t)},e.prototype.match=function(e,t){var n=e.split("/").map(function(e){return y.default.completePart(e)}),r=t.split("/").map(function(e){return y.default.completePart(e)});if(!(e&&t&&n&&n.length&&r&&r.length&&r.length==n.length))return!1;var o=n.map(function(e,t){return e.startsWith("/:")?{key:e.slice(1),index:t}:e===r[t]||null}).filter(function(e){return e});return o.length!=n.length?null:o.filter(function(e){return"object"===("undefined"==typeof e?"undefined":a(e))}).reduce(function(e,t){return e[t.key.slice(1)]=r[t.index].slice(1),e},{})},e.prototype.doRoute=function(e,t){if(e){this.busy=!0,this.trigger("busy-pending");var n={req:e},r=this.recurMatch(n,this.root||{},this.refinedRoutes,[]),o=r.ctx,i=r.components,a=i[i.length-1];if(a&&a.route.abstract)return(0,h.default)("cannot transition to a abstract state("+a.route.path+")"),this.routeToDefault();this.currHints=i,this.resolveRoutes(o,this.currHints,this.prevHints,[],[],this.loopRouteTo.bind(this)),this.prevHints=i}},e.prototype.recurMatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.req,s=a.hints,u=s[o],c=n?n:this.routes;if(!u)return{components:r,ctx:e};for(var p=0,l=c.length;p<l;p++){var f=c[p],d=this.match(y.default.completePart(f.path),y.default.completePart(u));if(d){e.req.params||(e.req.params={}),Object.assign(e.req.params,d),!e.req.body&&(e.req.body={}),Object.assign(e.req.body,y.default.omit(f,"resolve","redirectTo","tag","path","name")||{}),f.location=y.default.completePart(u),r.push({param:i({},d),ctx:Object.assign({},e),route:f});break}}return this.recurMatch(e,t,n,r,++o)},e.prototype.resolveRoutes=function(e,t,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=t[0],u=n[0];return t.length?n.length?s.route.path==u.route.path&&y.default.isEqual(s.param,u.param)?this.resolveRoutes(e,t.slice(1),n.slice(1),r,o,i,++a):(r.push(s),o=o.concat(n),this.resolveRoutes(e,t.slice(1),[],r,o,i,++a)):(r=r.concat(t),this.resolveRoutes(e,[],[],r,o,i,++a)):(n.length&&(o=o.concat(n)),i(r,o))},e.prototype.loopRouteTo=function(e,t){var n=e[e.length-1],r=null;n&&(r=n.route.tag),t&&t.length&&this.leaveTags(t,r),e&&e.length&&this.enterTags.apply(this,[e,0])},e.prototype.leaveTags=function(e,t){for(var n=this,r=function(r,o){var i=e[r],a=i.route.tag;if(!i)return"break";if(!a)return(0,h.default)("failed to leave tag with route, [path]="+i.route.path),"break";if(!t){var s=n.refinedRoutes.filter(function(e){return e.id===i.route.parent})[0];s&&(t=s.tag)}a.trigger("leave",t),i.route.cache?(a.opts.show||a.opts.$show)&&(a.opts.show=!1,a.opts.hidden=!0,a.update()):(a.unmount(!0),a.parent.update(),delete i.route.tag),n.handler&&n.handler("leave",a)},o=e.length-1,i=e.length;o>=0;o--){var a=r(o,i);if("break"===a)break}},e.prototype.enterTags=function(e,t){var n=this;if(e&&e.length){var r=e[0];if(!r)return this.enterTags(e.slice(1),++t);var o=r.route,i=r.ctx,a=o.tag,s=o.path,u=o.component;r?!function(){var r=function(){var n=this;if(!a||!a.isMounted){var r=null;if(o.components){var c=i.req.query.component,l=o.components[c];if(r=p.parent.root.querySelector('div[data-tag-name="'+l.displayName+'"]'),a=new l(r,{parent:p.parent}),!l)return(0,h.default)("component provider expected a component."),this.routeToDefault(!0)}else r=p.parent.root.querySelector('div[data-tag-name="'+u.displayName+'"]'),a=new o.component(r,{parent:p.parent}).mount();a&&(a.$routePath=s,o.tag=a,p.update())}if(a)return this.routeTo(o,i,!1,t,function(){n.enterTags.apply(n,[e.slice(1),++t])})};n.state.hint=s;var c=n.refinedRoutes.filter(function(e){return e.id===o.parent})[0],p=(c&&c.tag||n.root).tags["router-outlet"];p.$isMounted?r.apply(n):p.one("$mounted",r.bind(n))}():((0,h.default)("404"),recurEnter(e.slice(1)))}},e.prototype.routeTo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=arguments[3],i=arguments[4];if(this.busy=!1,this.trigger("busy-resolve"),n)return e(e.path);if(e.tag.opts.show||e.tag.opts.$show||y.default.completePart(e.path)!==this.location){var a=e.path,s=e.location;if(this.trigger("state-change",{$state:a,$location:s,ctx:t}),e.redirectTo)return e(e.redirectTo),!0;var u={hints:t.req.hints,req:t.req,route:e,tag:e.tag,$state:a,$location:s,index:o};return e.resolve?e.resolve.apply(e.tag,[function(e){r.routeToDone(e,t,u,i)},t]):void this.routeToDone(null,t,u,i)}},e.prototype.routeToDone=function(e,t,n,r){var o=this,i=n.hints,a=n.req,s=n.route,u=n.tag,c=n.$state,p=n.$location,l=n.index,f=this;t&&e&&(!t.body&&(t.body={}),Object.assign(t.body,e));var d=0,h=function(){d++;var e=o.evtListeners.filter(function(e){var t=e.evt,n=e.fn;if("history-pending"===t)return 5===n.toString().match(/\(.*?\)/)[0].replace("(","").replace(")","").split(",").length}),t=e.length;t===d&&v()},v=function(){f.executeMiddlewares(u,u.$mws,t,function(){f.routeSuccess(e,t,{hints:i,req:a,route:s,tag:u,$state:c,$location:p,index:l},r)})()};f.trigger("history-pending",f.prev,c,p,t,h)},e.prototype.routeSuccess=function(e,t,n,r){var o=this,i=n.hints,a=(n.req,n.route),s=n.tag,u=(n.$state,n.$location),c=n.index,p=this,l=0,f=function(){l++;var e=o.evtListeners.filter(function(e){var t=e.evt,n=e.fn;if("history-resolve"===t)return 6===n.toString().match(/\(.*?\)/)[0].replace("(","").replace(")","").split(",").length}),t=e.length;t===l&&d()},d=function(){s.enter(p.prev,a,t),p.handler&&p.handler("enter",s),s.update(),p.trigger("history-success",p.prev,a),p.location=u,p.prev=a,r()};p.trigger("history-resolve",p.prev,a,t,i,c,f)},e.prototype.routeToDefault=function(e){var t=this.refinedRoutes.filter(function(e){return e.defaultRoute})[0].path;return e?location.href=location.origin+t:(0,l.default)(t)},e.prototype.setHandler=function(e){this.handler=e},e.prototype.go=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2];return!t&&this.title&&(t=this.title()),(0,l.default)(e,t,n),this},e.prototype.setTitle=function(e){this.title=e},e.prototype.executeMiddlewares=function(e,t,n,r){var o=this;return function(){return t&&t.length?void t[0].call(e,function(){return o.executeMiddlewares(e,t.slice(1),n,r)()},n):r()}},e.prototype.search=function(e,t){return this.trigger("state-search",{param:e,value:t}),this},e.prototype.subscribe=function(e,t){var n=this;return this.evtListeners.push({evt:e,fn:t}),this.on(e,t),function(){for(var r=0,o=n.evtListeners.length;r<o;r++){var i=n.evtListeners[r];if(t===i.fn)return n.off(e,t),!0}return!1}},e.prototype.trigger=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._emitter.trigger.apply(this._emitter,t)},e.prototype.on=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._emitter.on.apply(this._emitter,t)},e.prototype.off=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._emitter.off.apply(this._emitter,t)},e.prototype.one=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._emitter.one.apply(this._emitter,t)},s(e,[{key:"root",get:function(){return this._root},set:function(e){this._root=e}},{key:"prev",get:function(){return this._prev},set:function(e){this._prev=e}},{key:"busy",get:function(){return this._busy},set:function(e){this._busy=e}},{key:"title",get:function(){return this._title},set:function(e){this._title=e}},{key:"routes",get:function(){return this._routes},set:function(e){this._routes=e,y.default.flatAndComposePrefix(this.routes,this.refinedRoutes)}},{key:"defaultRoute",get:function(){return this._defaultRoute},set:function(e){this._defaultRoute=e}},{key:"location",get:function(){return this._location},set:function(e){this._location=e}}]),e}(),w=new b((0,c.default)());t.default={hub:w,$use:function(e){!this.$mws&&(this.$mws=[]),this.$mws.push(e)}};t.onUse=m.default.onUse},function(e,t,n){var r=n(130),o=r.Symbol;e.exports=o},function(e,t,n){function r(e){if(!a(e)||o(e)!=s)return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&p.call(n)==f}var o=n(124),i=n(126),a=n(131),s="[object Object]",u=Function.prototype,c=Object.prototype,p=u.toString,l=c.hasOwnProperty,f=p.call(Object);e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.parent?o(e.parent):e}function i(e){return(0,c.default)(e,"provider expect a state store"),function(t){return(0,c.default)("object"===("undefined"==typeof t?"undefined":s(t))&&t instanceof riot.Tag,"\n\t\t\tprovider expect a riot tag instead of "+t),t.opts.store=e,p=t}}function a(e){return p||o(e)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i,t.getProvider=a;var u=n(37),c=r(u),p=null},function(e,t){"use strict";function n(e,t){if("undefined"==typeof e||!e)throw new Error(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),p=o(c),l=n(1),f=r(l),d=function(){function e(t){i(this,e),this._root=null,this._view=null,this._busy=!1,this._routes=[],this._defaultRoute=null,this._location=null,this._prev=null,this.state={},this._title=null,this._emitter=t,this.refinedRoutes=[]}return u(e,[{key:"startup",value:function(){return this._parseRoute(),f.default.base("/"),(0,f.default)(this.doRoute.bind(this)),h.nextTick(function(){f.default.start(),f.default.exec()}),this}},{key:"matches",value:function(e){var t=e.routes,n=e.location,r=this.parse(n);return this.doRoute(r,t)}},{key:"parse",value:function(e){var t={},n=e.split("?"),r=s(n,2),o=r[0],i=r[1],a=null;this.location&&(a=h.compareUrl(this.location,o));var u=""===o||"/"===o?["/"]:o.split("/");if(t.query={},i&&i.split("&").map(function(e){return t.query[e.split("=")[0]]=e.split("=")[1]}),this.location&&this.location==="/"+o)return this.trigger("sync-state-query",t.query),null;if(t.hints=[],u.length)for(var c=0,p=u.length;c<p;c++){var l=u[c];0===c?t.hints.push(h.completePart(l)):t.hints.indexOf(l)<0&&t.hints.push(h.combineUriParts(u,c,l))}return t}},{key:"_parseRoute",value:function(){return f.default.parser(this.parse.bind(this)),this}},{key:"routeTo",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this,i=arguments[4],a=arguments[5];if(this.busy=!1,this.trigger("busy-resolve"),r)return e(e.path);if(e.tag.opts.show||e.tag.opts.$show||h.completePart(e.path)!==this.location){var s=e.path,u=n;if(this.trigger("state-change",{$state:s,$location:u,ctx:t}),e.redirectTo)return e(e.redirectTo),!0;var c={hints:t.req.hints,req:t.req,route:e,tag:e.tag,$state:s,$location:u,index:i};return e.resolve?e.resolve.apply(e.tag,[function(e){o.routeToDone(e,t,c,a)},t]):void this.routeToDone(null,t,c,a)}}},{key:"match",value:function(e,t){var n=h.distinct(e.split("/").map(function(e){return h.completePart(e)})),r=h.distinct(t.split("/").map(function(e){return h.completePart(e)}));if(!(e&&t&&n&&n.length&&r&&r.length&&r.length==n.length))return!1;var o=n.map(function(e,t){return e.startsWith("/:")?{key:e.slice(1),index:t}:e===r[t]||null}).filter(function(e){return e});return o.length!=n.length?null:o.filter(function(e){return"object"===("undefined"==typeof e?"undefined":a(e))}).reduce(function(e,t){return e[t.key.slice(1)]=r[t.index].slice(1),e},{})}},{key:"recurMatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=this,o=arguments[3],i=arguments[4],a=e.req,s=a.hints,u=s[n];if(!t||!u)return{ctx:e,components:i};for(var c=null,p=o?o:this.routes,l=0,f=p.length;l<f;l++){var d=p[l],v=this.match(h.completePart(d.path),h.completePart(u));if(v){e.req.params||(e.req.params={}),Object.assign(e.req.params,v),!e.req.body&&(e.req.body={}),Object.assign(e.req.body,h.omit(d,"resolve","redirectTo","tag","path","name")||{}),c=d;break}}return c||n!==s.length?c?void!function(){var t=function(){var t=this;if(!c.tag||!c.tag.isMounted){var r=p.root.querySelector('div[data-tag-name="'+c.component.name+'"]'),a=new c.component(r);a&&(a.$routePath=c.path,p.parent.tags[a.opts.riotTag]=a,a.parent=p.parent,c.tag=a)}return c.tag?this.routeTo(c,e,u,!1,n,function(){if(s[n+1])return t.recurMatch(e,c.tag,n+1,o,i.concat(c))}):this.recurMatch(e,c,n+1,o,i.concat(c))};r.state.hint=c.path;var a=o.filter(function(e){return e.id===c.parent})[0],p=(a&&a.tag||r.root).tags["router-outlet"];p.$isMounted?t.apply(r):p.one("$mounted",t.bind(r))}():(console.info("404"),this.recurMatch(e,t,n+1,o,i)):t.defaultRoute?(this.routeTo(t.defaultRoute,e,u,!0,n),{ctx:e,components:i.concat(c)}):(console.info("404"),this.busy=!1,this.trigger("busy-resolve"),{ctx:e,components:i})}},{key:"doRoute",value:function(e,t){if(e){this.busy=!0,this.trigger("busy-pending");var n={req:e};return this.recurMatch(n,this.root||{},0,this.refinedRoutes,[])}}},{key:"routeToDone",value:function(e,t,n,r){var o=n.hints,i=n.req,a=n.route,s=n.tag,u=n.$state,c=n.$location,p=n.index,l=this;t&&e&&(!t.body&&(t.body={}),Object.assign(t.body,e));var f=requestAnimationFrame(function(){cancelAnimationFrame(f),f=void 0,l.trigger("history-pending",l.prev,u,c,t,l.executeMiddlewares(s,s.$mws,t,function(){l.routeSuccess(e,t,{hints:o,req:i,route:a,tag:s,$state:u,$location:c,index:p},r)}))})}},{key:"routeSuccess",value:function(e,t,n,r){var o=n.hints,i=(n.req,n.route),a=(n.tag,n.$state,n.$location),s=n.index,u=this,c=u.getMetaDataFromRouteMap(u.location).route,p=i,l=requestAnimationFrame(function(){cancelAnimationFrame(l),l=void 0,u.trigger("history-resolve",u.prev,p,t,o,s,function(){u.trigger("history-success",c,p),u.location=a,u.prev=i,r()})})}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2];return!t&&this.title&&(t=this.title()),(0,f.default)(e,t,n),this}},{key:"setTitle",value:function(e){this.title=e}},{key:"getMetaDataFromRouteMap",value:function(e){e=e&&e.startsWith("/")?e:"/"+e;for(var t=Object.keys(this.routes),n=0,r=t.length;n<r;n++){var o=t[n],i=this.routes[o];if(h.toPattern(o)===h.toPattern(e)){var a=(h.extractParams(o)||[]).map(function(e){return e.slice(2)}),s=(h.extractParams(e)||[]).map(function(e){return e.slice(1)});return{route:i,$state:o,$location:e,params:h.composeObject(a,s)}}}return{tag:null,params:null}}},{key:"executeMiddlewares",value:function(e,t,n,r){var o=this;return function(){return t&&t.length?void t[0].call(e,function(){return o.executeMiddlewares(e,t.slice(1),n,r)()},n):r()}}},{key:"search",value:function(e,t){return this.trigger("state-search",{param:e,value:t}),this}},{key:"trigger",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._emitter.trigger.apply(this._emitter,t)}},{key:"on",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._emitter.on.apply(this._emitter,t)}},{key:"off",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._emitter.off.apply(this._emitter,t)}},{key:"one",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._emitter.one.apply(this._emitter,t)}},{key:"view",get:function(){return this._view},set:function(e){this._view=e}},{key:"root",get:function(){return this._root},set:function(e){this._root=e}},{key:"prev",get:function(){return this._prev},set:function(e){this._prev=e}},{key:"busy",get:function(){return this._busy},set:function(e){this._busy=e}},{key:"title",get:function(){return this._title},set:function(e){this._title=e}},{key:"routes",get:function(){return this._routes},set:function(e){this._routes=e,h.flatAndComposePrefix(this.routes,this.refinedRoutes)}},{key:"defaultRoute",get:function(){return this._defaultRoute},set:function(e){this._defaultRoute=e}},{key:"location",get:function(){return this._location},set:function(e){this._location=e}}]),e}(),h=function(){function e(){i(this,e)}return u(e,null,[{key:"distinct",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];t.indexOf(o)<0&&t.push(o)}return t}},{key:"genId",value:function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",r=0;r<e;r++){var o=Math.ceil(35*Math.random());n+=t[o]}return n}},{key:"completePart",value:function(e){return e.startsWith("/")?e:"/"+e}},{key:"assert",value:function(e,t){if(!e)throw new Error(t)}},{key:"omit",value:function(e){for(var t={},n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i in e)r.indexOf(i)<0&&(t[i]=e[i]);return t}},{key:"compareUrl",value:function(e,t){for(var n=[],r=e.split("/"),o=t.split("/"),i=0,a=r.length;i<a&&r[i]===o[i];i++)n.push(r[i]);return n.join("/")}},{key:"combineUriParts",value:function(t,n,r){if(!t.length||n<=0)return r;var o=t[n-1]+"/"+r;return e.combineUriParts(t,--n,o)}},{key:"composeObject",value:function(e,t){var n={};return Array.isArray(e)&&Array.isArray(t)&&e.length==t.length?(e.forEach(function(e,r){n[e]=t[r]}),n):n}},{key:"extractParams",value:function(e){return e.match(/_[a-zA-Z0-9:]+/g)}},{key:"toPattern",value:function(e){return e.replace(/_[a-zA-Z0-9:]+/g,"*")}},{key:"nextTick",value:function(e){return setTimeout(e,0)}}]),e}();h.flatAndComposePrefix=function(e,t){var n=e.children;if(n)for(var r=0,o=n.length;r<o;r++){var i=n[r];i.path=(e.path||"")+i.path,i.parent=e.id||"",i.id=h.genId(8),t.push(i),h.flatAndComposePrefix(i,t)}};var v=new d(p.observable());t.default={hub:v,$use:function(e){!this.$mws&&(this.$mws=[]),this.$mws.push(e)}}},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];var r=t[t.length-1],o=t.slice(0,-1);return function(){return o.reduceRight(function(e,t){return t(e)},r.apply(void 0,arguments))}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){function r(){g===y&&(g=y.slice())}function i(){return v}function s(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return r(),g.push(e),function(){if(t){t=!1,r();var n=g.indexOf(e);g.splice(n,1)}}}function p(e){if(!(0,a.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(m)throw new Error("Reducers may not dispatch actions.");try{m=!0,v=h(v,e)}finally{m=!1}for(var t=y=g,n=0;n<t.length;n++)t[n]();return e}function l(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");h=e,p({type:c.INIT})}function f(){var e,t=s;return e={subscribe:function(e){function n(){e.next&&e.next(i())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");n();var r=t(n);return{unsubscribe:r}}},e[u.default]=function(){return this},e}var d;if("function"==typeof t&&"undefined"==typeof n&&(n=t,t=void 0),"undefined"!=typeof n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(o)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,v=t,y=[],g=y,m=!1;return p({type:c.INIT}),d={dispatch:p,subscribe:s,getState:i,replaceReducer:l},d[u.default]=f,d}t.__esModule=!0,t.ActionTypes=void 0,t.default=o;var i=n(35),a=r(i),s=n(157),u=r(s),c=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}t.__esModule=!0,t.default=n},function(e,t,n){var r,o;r=[t],o=function(e){"use strict";function t(e){var t=[];for(var n in e)t.push(n);return t}function n(e,t){var n=function(n){n&&n instanceof Event?(n.preventUpdate=!0,e[t](n),e.update()):e[t](n)};return n._inherited=!0,n}function r(e){var t=/^[a-zA-Z]+(\-[a-zA-Z]+)*$/;return e.replace(t,function(e){return e+', [data-is="'+e+'"]'})}var o={triggerDomEvent:function(e){var t=this;return setTimeout(function(){var n;"function"==typeof Event?n=new Event(e):(n=document.createEvent("Event"),n.initEvent(e,!0,!0)),t.root.dispatchEvent(n)},0),this}},i={init:function(){var e=this;this._shouldSyncFromOpts=!0,this.on("update",function(){e._shouldSyncFromOpts&&e.trigger("sync"),e._shouldSyncFromOpts=!0})},skipSync:function(){return this._shouldSyncFromOpts=!1,this}},a={init:function(){var e=this;this.one("update",function(){e._ownPropKeys=t(e),e._ownOptsKeys=t(e.opts)}),this.on("update",function(){var r=["root","triggerDomEvent"];t(e.parent).filter(function(t){return!~e._ownPropKeys.concat(r).indexOf(t)}).forEach(function(t){e[t]="function"!=typeof e.parent[t]||e.parent[t]._inherited?e.parent[t]:n(e.parent,t)}),t(e.parent.opts).filter(function(t){return!~e._ownOptsKeys.indexOf(t)&&"riotTag"!=t}).forEach(function(t){e.opts[t]="function"!=typeof e.parent.opts[t]||e.parent.opts[t]._inherited?e.parent.opts[t]:n(e.parent,t)})})}},s={init:function(){this.$=this.querySelector,this.$$=this.querySelectorAll},querySelector:function(e,t){var n=this.root.querySelector(r(e));return t?n._tag||void 0:n},querySelectorAll:function(e,t){var n=this.root.querySelectorAll(r(e));return t?Array.prototype.map.call(n,function(e){return e._tag||void 0}):n}};e.domEvent=o,e.syncEvent=i,e.parentScope=a,e.querySelector=s}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){!function(t,n){var r=function(e){e=e||{};var t={},n=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(n,r){return"function"==typeof r&&(t[n]=t[n]||[]).push(r),e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,r){if("*"!=n||r)if(r)for(var o,i=t[n],a=0;o=i&&i[a];++a)o==r&&i.splice(a--,1);else delete t[n];else t={};return e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,n){function r(){e.off(t,r),n.apply(e,arguments)}return e.on(t,r)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(r){var o,i,a,s=arguments.length-1,u=new Array(s);for(a=0;a<s;a++)u[a]=arguments[a+1];for(o=n.call(t[r]||[],0),a=0;i=o[a];++a)i.apply(e,u);return t["*"]&&"*"!=r&&e.trigger.apply(e,["*",r].concat(u)),e},enumerable:!1,writable:!1,configurable:!1}}),e};e.exports=r}("undefined"!=typeof window?window:void 0)},function(e,t,n){riot.tag2("radio",'<button type="button" __disabled="{opts.disabled || opts.__disabled}" data-selected="{selected ? \'yes\' : \'no\'}" data-size="{opts.size}" onclick="{onClick}"><input type="radio" __checked="{selected}" onclick="{onClick}"><yield></yield></button></style>','radio button,[riot-tag="radio"] button,[data-is="radio"] button{ display: inline-block; padding: 6px 12px; margin-bottom: 0; font-size: 14px; font-weight: normal; line-height: 1.42857143; text-align: center; white-space: nowrap; vertical-align: middle; cursor: pointer; background-image: none; border: 1px solid transparent; border-radius: 4px; } radio button:focus,[riot-tag="radio"] button:focus,[data-is="radio"] button:focus{ outline: thin dotted; outline: 5px auto -webkit-focus-ring-color; outline-offset: -2px; } radio button:hover,[riot-tag="radio"] button:hover,[data-is="radio"] button:hover,radio button:focus,[riot-tag="radio"] button:focus,[data-is="radio"] button:focus{ color: #333; text-decoration: none; } radio button:active,[riot-tag="radio"] button:active,[data-is="radio"] button:active{ background-image: none; outline: 0; box-shadow: inset 0 3px 5px rgba(0, 0, 0, .125); } radio button[disabled],[riot-tag="radio"] button[disabled],[data-is="radio"] button[disabled]{ pointer-events: none; cursor: not-allowed; box-shadow: none; opacity: .65; } radio button,[riot-tag="radio"] button,[data-is="radio"] button{ color: #333; background-color: #fff; border-color: #ccc } radio button:hover,[riot-tag="radio"] button:hover,[data-is="radio"] button:hover,radio button:focus,[riot-tag="radio"] button:focus,[data-is="radio"] button:focus,radio button:active,[riot-tag="radio"] button:active,[data-is="radio"] button:active,radio button[data-selected="yes"],[riot-tag="radio"] button[data-selected="yes"],[data-is="radio"] button[data-selected="yes"]{ color: #FFFFFF; background-color: #F0373D; border-color: #F0373D } radio button[data-size="lg"],[riot-tag="radio"] button[data-size="lg"],[data-is="radio"] button[data-size="lg"]{ padding: 10px 16px; font-size: 18px; line-height: 1.3333333; border-radius: 6px; } radio button[data-size="sm"],[riot-tag="radio"] button[data-size="sm"],[data-is="radio"] button[data-size="sm"]{ padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 3px; } radio button[data-size="xs"],[riot-tag="radio"] button[data-size="xs"],[data-is="radio"] button[data-size="xs"]{ padding: 1px 5px; font-size: 12px; line-height: 1.5; border-radius: 3px; }',"",function(e){"use strict";var t=this,r=n(42);this.mixin(r.parentScope),this.onClick=function(n){n.stopPropagation(),t.selected=!0,t.trigger("radioClicked",e.value||t.root.innerText)},this.on("update",function(){t.selected=e.value==t.parent.value})})},function(e,t,n){function r(e){return n(o(e))}function o(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./app/app/app.reducers.js":20,"./app/bigpack/bigpack.reducers.js":21,"./app/gift/gift.reducers.js":22,"./app/order/order.reducers.js":26,"./app/suborder/suborder.reducers.js":28,"./framework/ninjiajs/src/riot-router-redux/riot.router.reducers.js":110};r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=45},function(e,t){"use strict";var n={};n["91songli.cc"]="//api.91songli.com",n["91songli.com"]="//api.91songli.com",n["wx.songni.cc"]="//api.91songli.com",n["dalibao.com"]="//api.dalibao.com",n["dev.91songli.cc"]="http://apidev.91songli.cc",n["dev.songni.cc"]="http://apidev.91songli.cc",n["dev2.songni.cc"]="//apidev.91songli.cc",n["qa.songni.cc"]="http://apidev.91songli.cc",t=e.exports={development:{uri:"http://apidev.91songli.cc",imgUri:"img.91pintuan.com",phtUri:"photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5726bf8700bbe21526c4ccbe",apiUri:n,debug:!0,from:"client"},production:{uri:"http://api.91songli.cc",imgUri:"img.91pintuan.com",phtUri:"photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5581117b5f225e4c401c9259",apiUri:n,debug:!1,from:"client"},test:{uri:"http://apidev.91songli.cc",imgUri:"img.91pintuan.com",phtUri:"photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5581117b5f225e4c401c9259",apiUri:n,debug:!1,from:"client"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),
r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(3)),v=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(){!this.opts.theme&&(this.opts.theme="white"),this.theme=this.opts.theme},p(t,[{key:"name",get:function(){return"icon-href"}},{key:"tmpl",get:function(){return'\n\t\t\t<div class="icon-href-container" >\n\t\t\t\t<a href="http://www.91songli.com/">\n\t\t\t\t\t<img riot-src="{\'//img.91pintuan.com/songli/icon-herf/\' + theme + \'_news.png\' }">\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t'}}]),t}(f.default.Tag),u.originName="icon-href",s=c))||s;t.default=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={setClientWidth:function(){return{type:"body/clientWidth",payload:document.body.clientWidth}},setClientHeight:function(){return{type:"body/clientHeight",payload:screen.height}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(3)),v=(0,h.View)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},p(t,[{key:"name",get:function(){return"bigpack"}},{key:"tmpl",get:function(){return"<router-outlet></router-outlet>"}}]),t}(f.default.Tag),u.originName="bigpack",s=c))||s;t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,p,l,f,d,h,v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(2),g=r(y),m=n(1),b=r(m),w=n(3),_=n(13),O=r(_),x=(c=(0,w.Connect)(function(e){return{merchant:e.merchant,order:e.bigpack,clientWidth:e.clientWidth,isUnavailable:e.bigpack&&e.bigpack.sender&&e.bigpack.sender.id}},function(e){return{enterBigpackDetail:function(t,n){return e(O.default.enterBigpackDetail(t,n))}}}),p=(0,w.onUse)("enterBigpackDetail"),(0,w.View)(l=c((h=d=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.onSubmit=function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=app.store.getState,n=t(),r=n.bigpack,o=n.user,i=r.gift.status,!i.wb){e.next=5;break}return e.abrupt("return",(0,b.default)("/bigpack/"+r.id+"/shoot"));case 5:return e.abrupt("return",(0,b.default)("/bigpack/"+r.id+"/record"));case 6:case"end":return e.stop()}},e,this)}));return e}(),v(t,[{key:"name",get:function(){return"bigpack-detail"}},{key:"tmpl",get:function(){return'<router-outlet>\n  <div class="bigpack">\n    <div class="bigpack_wrap">\n      <div class="bigpack_cont" >\n        <!--title-->\n        <div class="pack_title" style="width: { parent.opts.clientWidth - 24 }px;">\n          <span><img riot-src="{ parent.opts.merchant.pubno.head_img }"/></span>\n          <span style="width: { parent.opts.clientWidth - 76 }px;">商家{ parent.opts.merchant.pubno.nick_name }发给你一个大礼包 </span>\n          <span>订单号 { parent.opts.order.id }</span>\n        </div>\n        <!--bigpack order detail-->\n        <div class="detail">\n          <div class="order_img" style="width: { parent.opts.clientWidth - 50 }px; height: { parent.opts.clientWidth - 50 }px;">\n            <img riot-src="{ parent.opts.order.gift && parent.opts.order.gift.info && parent.opts.order.gift.info.cover ? app.config.phtUri + parent.opts.order.gift.info.cover : app.config.images.GIFTSHRAE_DEF_COVER }"/>\n            <div class="title_price" style="width: { parent.opts.clientWidth - 50 }px;">\n              <span>{ parent.opts.order.gift.info.name }</span>\n              <span>{ $.util.filter.currency(parent.opts.order.gift.info.price) }</span>\n            </div>\n          </div>\n          <div class="order_num">{ parent.opts.order.capacity }份礼物</div>\n          <div class="order_btn">\n            <button class="btn_end" if="{ parent.opts.isUnavailable }">该大礼包已送出</button>\n            <a class="btn_start" if="{ !parent.opts.isUnavailable }" href="javascript:void 0" onclick="{ parent.onSubmit }">开始使用</a>\n          </div>\n          <div if="{ parent.opts.order.gift.scene != \'wb\' }" class="des_info">\n            <span>点击开始送礼并完善语音信息</span>\n          </div>\n          <div if="{ parent.opts.order.gift.scene === \'wb\' }" class="des_info">\n            <span>点击开始使用，领取大客户礼包</span>\n            <span>上传微信二维码名片，即可开始送礼</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <icon-href theme="white"></icon-href>\n    </div>\n</router-outlet>\n '}}]),t}(g.default.Tag),d.originName="bigpack-detail",f=h,u(f.prototype,"onCreate",[p],Object.getOwnPropertyDescriptor(f.prototype,"onCreate"),f.prototype),l=f))||l)||l);t.default=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,p,l,f,d,h,v,y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(2),m=r(g),b=n(1),w=r(b),_=n(3),O=n(5),x=r(O),k=n(13),j=r(k),S=(c=(0,_.Form)({name:{maxlength:20,required:!0}}),p=(0,_.Connect)(function(e){return{merchant:e.merchant,order:e.bigpack,user:e.user,recordState:e.record,clientHeight:e.clientHeight}},function(e){return{enterBigpackRecord:function(t,n){return e(j.default.enterBigpackRecord(t,n))}}}),l=(0,_.onUse)("enterBigpackRecord"),(0,_.View)(f=c(f=p((v=h=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.onSubmit=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,s,u,c,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),n=app.store,r=n.dispatch,o=n.getState,i=o(),a=i.bigpack,s=i.user,this.opts.submit("bigpackRecordForm"),!this.opts.forms.bigpackRecordForm.$invalid){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,x.default.uploadVoice({localId:a.localId,isShowProgressTips:1});case 9:return u=e.sent,a.serverId=u.serverId,1===a.capacity&&(a.name=this.refs.name.value),e.next=14,$.post("/gift/order/"+a.id+"/complete",a);case 14:a.sender=s,r({type:"order/update",payload:a}),c=o(),p=c.order,(0,w.default)("/order/"+a.id+"/ready"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),widgets.Alert.add("danger",e.t0.message,2e3);case 23:case"end":return e.stop()}},e,this,[[0,20]])}));return e}(),y(t,[{key:"name",get:function(){return"bigpack-record"}},{key:"tmpl",get:function(){return'<div class="bigpack_record">\n  <form class="record_form" ref="bigpackRecordForm" novalidate>\n    <div if="{ opts.order.capacity === 1 }" class="one2one">\n      <div class="name">\n        <span>送给</span>\n        <input type="text" placeholder="{ opts.forms.bigpackRecordForm.name.$invalid && opts.forms.bigpackRecordForm.$submitted ? \'昵称未填写\' : \'Ta的名字\' }" ref="name" />\n        <p show="{ opts.forms.bigpackRecordForm.name.$error.maxlength && opts.forms.bigpackRecordForm.$submitted }" class="help-block">昵称字数太多.</p>\n        <p show="{ opts.forms.bigpackRecordForm.name.$error.required && opts.forms.bigpackRecordForm.$submitted }" class="help-block">昵称未填写.</p>\n      </div>\n    </div>\n    <div class="voice_box">\n      <span class="title">录制语音祝福</span>\n      <order-record-voice store-field="bigpack"></gift-record-voice>\n    </div>\n    <div class="bigpack_detail">\n      <div class="info">\n        <img riot-src="{ opts.order.gift.info.cover ? app.config.phtUri + opts.order.gift.info.cover + app.config.phtStlList4 : app.config.images.GIFT_DEF_COVER }">\n        <span>{ opts.order.gift.info.name }</span>\n      </div>\n      <div class="num">\n        <span>数量</span>\n        <span>{ opts.order.capacity }份</span>\n      </div>\n    </div>\n  </form>\n</div> '}}]),t}(m.default.Tag),h.originName="bigpack-record",d=v,u(d.prototype,"onCreate",[l],Object.getOwnPropertyDescriptor(d.prototype,"onCreate"),d.prototype),f=d))||f)||f)||f);t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h,v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(2),g=r(y),m=n(1),b=(r(m),n(3)),w=n(5),_=(r(w),n(13)),O=r(_),x=(u=(0,b.Form)({image:{required:!0}}),c=(0,b.Connect)(function(e){return{merchant:e.merchant,order:e.bigpack,user:e.user,clientWidth:e.clientWidth}},function(e){return{uploadImage:function(){return e(O.default.uploadImage)},onSubmit:function(t){return e(O.default.onSubmit(t,this.opts))},enterBigpackShoot:function(t,n){return e(O.default.enterBigpackShoot(t,n))}}}),p=(0,b.onUse)("enterBigpackShoot"),(0,b.View)(l=u(l=c((h=d=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},v(t,[{key:"name",get:function(){return"bigpack-shoot"}},{key:"tmpl",get:function(){return'<div class="shoot">\n  <div class="shoot_warp">\n    <div class="shoot_cont">\n      <div class="header">\n        <div class="user_photo"><img riot-src="{ opts.user.photo }"></div>\n        <div class="user_name">\n          <span>{ opts.user.name }，请上传你的微信二维码名片</span>\n        </div>\n      </div>\n      <div class="note">\n        <span>上传二维码名片，便于客户领取礼品后添加你的微信</span>\n        <span>路径：微信—我—个人信息—我的二维码</span>\n      </div>\n      <div class="img" style=" width:{ opts.clientWidth * 0.8 }px; height:{ (opts.clientWidth * 0.8)*4/3 }px; ">\n        <img onclick="{ opts.uploadImage }" riot-src="{ opts.order.localId ? opts.order.localId : \'//img.91pintuan.com/songli/client2/def_img.jpg\' }" />\n      </div>\n      <div class="button">\n        <input type="button" value="下一步" onclick="{ opts.onSubmit.bind(this) }"/>\n      </div>\n    </div>\n  </div>\n</div>\n '}}]),t}(g.default.Tag),d.originName="bigpack-shoot",f=h,s(f.prototype,"onCreate",[p],Object.getOwnPropertyDescriptor(f.prototype,"onCreate"),f.prototype),l=f))||l)||l)||l);t.default=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(2),d=r(f),h=n(1),v=(r(h),n(4)),y=(r(v),n(3)),g=(s=(0,y.Connect)(function(e){return{merchant:e.merchant,order:e.bigpack,clientWidth:e.clientWidth}}),(0,y.View)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"bigpack-subscribe"}},{key:"tmpl",get:function(){return'<div class="bigpack_subscribe">\n  <div class="subscribe_wrap">\n    <div class="subscribe_cont">\n      <div class="pack_title" style="width: { opts.clientWidth - 24 }px;">\n        <span><img riot-src="{ opts.merchant.pubno.head_img }"/></span>\n        <span style="width: { opts.clientWidth - 76 }px;">商家{ opts.merchant.pubno.nick_name }发给你一个大礼包 </span>\n      </div>\n      <div class="mer_code">\n        <div class="explain">\n          <span>请长按二维码关注商家公号</span>\n          <span>获取该大礼包</span>\n        </div>\n        <div class="merchant_name">\n          <span>{ opts.merchant.pubno.nick_name }</span>\n        </div>\n        <div class="merchant_code" style="width: { opts.clientWidth/2 + 50 }px; height: { opts.clientWidth / 2 + 50 }px;">\n          <img riot-src="{ opts.order.qrcode.bigpack_sub_src }" alt="" />\n          <div class="radius">\n            <img src="//img.91pintuan.com/songli/client/icon/top.png"/>\n            <img src="//img.91pintuan.com/songli/client/icon/right.png"/>\n            <img src="//img.91pintuan.com/songli/client/icon/bottom.png"/>\n            <img src="//img.91pintuan.com/songli/client/icon/left.png"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <icon-href theme="white"></icon-href>\n</div> '}}]),t}(d.default.Tag),c.originName="bigpack-subscribe",u=p))||u)||u);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var i=this,a=n(29),s=r(a),u=n(46),c=r(u),p=n(5),l=r(p),f=function(){var e=o(regeneratorRuntime.mark(function e(t,n){var r,o,a,u,p,f,d,h,v,y,g,m,b,w,_,O=n.origin;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.env,o=t.store,a=c.default[r],u=o.dispatch,Object.assign($,$.ajax.base(a.apiUri[O]+"/api")),window.config=a,$.setErrorInterceptor(function(e,t){var n=e.response;return n?void(n&&401===n.status):(console.error("[action Failed]"),void console.error(e))}),$.addResponseInterceptor(function(e){return e}),p={"X-API-From":a.from},Object.assign($,$.withProps({headers:p})),f=function(e){return $.util.querystring.parse(window.location.search.replace("?",""))[e]},d=f("code"),!d){e.next=24;break}return e.next=15,fetch(a.apiUri[O]+"/api/wechat/token?code="+d,{method:"get",headers:{"X-API-From":a.from,"X-Component":a.component}});case 15:return h=e.sent,e.next=18,h.json();case 18:return v=e.sent,y=v.token,y&&s.default.set("token",y),g=s.default.get("referer"),location.href=""+location.origin+g,e.abrupt("return");case 24:if(m=s.default.get("token"),!m){e.next=39;break}return p.Authorization=m,Object.assign($,$.withProps({headers:p})),b=null,e.prev=29,e.next=32,$.get("/wechat/userinfo");case 32:b=e.sent,e.next=38;break;case 35:e.prev=35,e.t0=e.catch(29),alert(JSON.stringify(e.t0));case 38:u({type:"user",payload:b});case 39:return e.next=41,$.get("/merchant");case 41:w=e.sent,u({type:"merchant",payload:w}),_=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseWXPay","editAddress","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","getLocation","onVoicePlayEnd","uploadVoice","downloadVoice","openLocation"],l.default.config(_),e.next=50;break;case 47:e.prev=47,e.t1=e.catch(0),alert(e.t1.message);case 50:case"end":return e.stop()}},e,i,[[0,47],[29,35]])}));return function(t,n){return e.apply(this,arguments)}}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(3)),v=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){this.on("mount",this.componentDidMounted.bind(this)),this.on("unmount",this.componentUnmounted.bind(this))},t.prototype.componentDidMounted=function(){var e=this;this.gap=this.opts.gap||60,this.height=this.opts.height,this.speed=parseInt(this.opts.speed)||3e3,this.index=0,this.count=0,this.capacity=Math.ceil(parseInt(this.height/this.gap,10)),this.nextItem(),setTimeout(function(){e.initPoi()},100),this.itemsInterval=setInterval(function(){e.nextItem(),e.resetPoi()},this.speed)},t.prototype.nextItem=function(){var e=this.opts.items.length,t=this.index+this.capacity-e,n=this.opts.items.slice(this.index,this.index+this.capacity);n.length<this.capacity&&(n=n.concat(this.opts.items.slice(0,t))),this.items=n,t>=this.capacity&&(this.index=0),this.index++,this.update()},t.prototype.initPoi=function(){var e=document.querySelector(".marquee_body");e.style.transition="margin "+this.speed/1e3+"s",e.style.transitionTimingFunction="linear",e.style.marginTop="-"+this.gap+"px"},t.prototype.resetPoi=function(){var e=this,t=document.querySelector(".marquee_body");t.style.transition="none",t.style.marginTop="0px",setTimeout(function(){e.initPoi()},20)},t.prototype.componentUnmounted=function(){clearInterval(this.itemsInterval)},p(t,[{key:"name",get:function(){return"imarquee"}},{key:"css",get:function(){return"\n\t\t\t.marquee_container {\n\t\t\t\tposition: relative;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\t\t\t.marquee_body {\n\t\t\t\ttransition: margin 3s;\n\t\t\t\ttransition-timing-function: linear;\n\t\t\t\tmargin: 0px;\n\t\t\t}\n\t\t"}},{key:"tmpl",get:function(){return'\n\t\t\t<div class="marquee_container" style="height: { gap * (capacity - 1) }px">\n\t\t\t\t<div ref="marquee_body" class="marquee_body">\n\t\t\t\t\t<yield/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'}}]),t}(f.default.Tag),u.originName="imarquee",s=c))||s;t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(3)),v=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){this.$isMounted=!1,this.hasNoChildren=!0,this.skipSync=!1,this.on("update",this.componentOnUpdate.bind(this)),this.on("unmount",this.componentUnMounted.bind(this)),this.on("mount",this.componentDidMount.bind(this))},t.prototype.componentOnUpdate=function(){this.hasNoChildren=this.routes.filter(function(e){return e.tag&&e.tag.isMounted}).length<=0,this.skipSync||(this.skipSync=!0,this.update()),this.skipSync=!1},t.prototype.componentUnMounted=function(){this.$isMounted=!1,this.routes.forEach(function(e){e.tag&&e.tag.unmount()})},t.prototype.componentDidMount=function(){var e=this;this.$isMounted=!1,this.routes=[],app.hub.state.hint?!function(){var t=app.hub.refinedRoutes.filter(function(e){return e.path===app.hub.state.hint})[0];e.routes=app.hub.refinedRoutes.filter(function(e){return e.id===t.id})[0].children}():this.routes=app.hub.routes.children,this.update(),this.trigger("$mounted"),this.$isMounted=!0},t.prototype.distinct=function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var o=e[n];o.components?Object.keys(o.components).forEach(function(e){var n=o.components[e];t.filter(function(e){return e.component.displayName===n.displayName}).length<=0&&(o.component=n,t.push(o))}):t.filter(function(e){return e.component.displayName===o.component.displayName}).length<=0&&t.push(o)}return t},p(t,[{key:"name",get:function(){return"router-outlet"}},{key:"tmpl",get:function(){return'\n\t\t\t<div if="{hasNoChildren}" data-yield>\n\t\t\t\t<yield/>\n\t\t\t</div>\n\t\t\t<div data-tag-name="{ route.component.displayName }" each="{ route in distinct(routes) }"></div>\n\t\t'}}]),t}(f.default.Tag),u.originName="router-outlet",s=c))||s;t.default=v},function(e,t,n){"use strict";function r(e,t){for(var n in t)e[n]=t[n]}Object.defineProperty(t,"__esModule",{value:!0});var o={};o["wx.dev.91pintuan.com"]="https://apidev.91pintuan.com",o["99.dev.91pintuan.com"]="https://api99dev.91pintuan.com";var i={};i["wx.91pintuan.com"]="https://api.91pintuan.com",i["91pintuan.com"]="https://api.91pintuan.com",i["99.91pintuan.com"]="https://api99.91pintuan.com";var a={phtStlList:"@1e_1c_0o_0l_100sh_150h_150w_90q.src",phtStlList2:"@1e_1c_0o_0l_100sh_300h_300w_90q.src",phtStlList3:"@1e_1c_0o_0l_100sh_60h_60w_90q.src",phtStlList4:"@1e_1c_0o_0l_100sh_50h_50w_90q.src",phtStlList5:"@1e_1c_0o_0l_100sh_150h_300w_90q.src",phtWbQrcode:"@1e_1c_0o_0l_100sh_400h_300w_30q.src",images:{SHARE_DEF_COVER:"http://91pt.oss-cn-beijing.aliyuncs.com/songli/icon-herf/default-img.png",GIFTSHRAE_DEF_COVER:"https://img.91pintuan.com/songli/icon-herf/present_sent_demo.png",GIFT_DEF_COVER:"https://img.91pintuan.com/songli/rose_demo.png"},messages:{GIFT_SAVED:"该礼物已被领取",NO_GIFT_LEFT:"手慢了，没有礼物了",INFO_INCOMPLETE:"信息不全",SHARE_INFO:"送你一份礼物，请点击领取。",SHARE_TITLE:"会说话的礼物",SHARE_DETAIL_CARE:"微信轻送礼，就用91送礼",SHARE_DESC:"的礼物货架",GIFT_REDUCE:"礼物份数至少是1份",GIFT_RECEIVED:"礼物已被他人领取",UPLOAD_IMAGE_FAILED:"请上传图片"},errors:{NORIGHT_OPEN_PAGE:{code:404,message:"无权打开此页面"},SERVER_ERROR:{code:500,message:"系统内部错误"},NO_RES_CODE:{code:501,message:"没有response code !"},PAY_CANCEL:{code:503,message:"您取消了支付"},PAY_FAIL:{code:504,message:"支付失败"},NETWORK_ERR:{code:502,message:"网络错误"},LOCATION_NOAUTH:{code:801,message:"您拒绝授权获取地理位置"},VOICE_EXPECTED:{code:505,message:"请录制祝福语"}}},s={development:{uri:"https://apidev.91pintuan.com",imgUri:"https://img.91pintuan.com",phtUri:"https://photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5726bf8700bbe21526c4ccbe",apiUri:o,debug:!0,from:"client"},production:{uri:"https://api.91pintuan.com",imgUri:"https://img.91pintuan.com",phtUri:"https://photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5581117b5f225e4c401c9259",apiUri:i,debug:!1,from:"client"},test:{uri:"https://apidev.91pintuan.com",imgUri:"https://img.91pintuan.com",phtUri:"https://photo.91pintuan.com",phtUriExotic:"http://photo.91pintuan.com",component:"5581117b5f225e4c401c9259",apiUri:i,debug:!1,from:"client"}};r(s.development,a),r(s.production,a),r(s.test,a),t.default=s.production},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(6)),v=(r(h),n(3)),y=(0,v.View)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},p(t,[{key:"name",get:function(){return"gift"}},{key:"tmpl",get:function(){return"<router-outlet></router-outlet>"}}]),t}(f.default.Tag),u.originName="gift",s=c))||s;t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(2),h=r(d),v=n(1),y=(r(v),n(3)),g=n(6),m=(r(g),s=(0,y.Form)({capacity:{required:!0,min:1,max:9999}}),u=(0,y.Connect)(function(e){return{gift:e.gift,clientWidth:e.clientWidth}},function(e){return{}}),(0,y.Component)(c=s(c=u((l=p=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},t.prototype.reduCapacity=function(){var e=app.store,t=e.dispatch,n=(e.getState,this.refs.capacity.value);n>1?t({type:"order/update",payload:{capacity:this.refs.capacity.value--}}):widgets.Alert.add("warning",app.config.messages.GIFT_REDUCE,2e3)},t.prototype.incrCapacity=function(){var e=app.store,t=e.dispatch;e.getState;t({type:"order/update",payload:{capacity:++this.refs.capacity.value}})},t.prototype.buyNext=function(e){var t=app.store,n=t.dispatch,r=t.getState;if(e.preventDefault(),this.opts.submit("giftBuyCapacity"),!this.opts.forms.giftBuyCapacity.$invalid){1==this.refs.capacity.value&&n({type:"order/update",payload:{capacity:1}});var o=r(),i=o.gift,a=o.order;a.gift=i.id,localStorage.setItem("order:capacity",JSON.stringify(a)),location.href="/wepay/?component=OrderPlace",this.trigger("dismiss")}},f(t,[{key:"name",get:function(){return"gift-buy-modal"}},{key:"tmpl",get:function(){return'\n       <div class="gift_buy">\n        <div class="buy_cont">\n          <div class="title">\n            <img riot-src="{ opts.gift.info.cover ? app.config.phtUri + opts.gift.info.cover + app.config.phtStlList3 : app.config.images.GIFT_DEF_COVER }">\n            <span style="width: {opts.clientWidth - 105 }px">{ opts.gift.info.name }</span>\n          </div>\n          <div class="price">\n            <span>礼品单价</span>\n            <span>{ $.util.filter.currency(opts.gift.info.price) }</span>\n          </div>\n          <form ref="giftBuyCapacity" novalidate class="num">\n            <span>礼品数量</span>\n            <span class="input_group">\n              <button type="button" onclick="{ reduCapacity }"><em></em></button>\n              <input  type="number" ref="capacity" value="1">\n              <button type="button" onclick="{ incrCapacity }" data-type="plus" ><em>+</em></button>\n            </span><b>份</b>\n            <p if="{ opts.forms.giftBuyCapacity.$submitted && opts.forms.giftBuyCapacity.capacity.$error.required }" class="help-block">礼物份数不能为空</p>\n            <p if="{ opts.forms.giftBuyCapacity.$submitted && opts.forms.giftBuyCapacity.capacity.$error.min }" class="help-block">礼物份数至少是1份</p>\n            <p if="{ opts.forms.giftBuyCapacity.$submitted && opts.forms.giftBuyCapacity.capacity.$error.max }" class="help-block">礼物份数至多9999份</p>\n          </form>\n          <div class="next">\n            <button onclick="{ buyNext }">录音并支付</button>\n          </div>\n        </div>\n      </div>\n    ';
}}]),t}(h.default.Tag),p.originName="gift-buy-modal",c=l))||c)||c)||c);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(6)),b=r(m),w=n(3),_=(u=(0,w.Connect)(function(e){return{gift:e.gift,clientWidth:e.clientWidth}},function(e){return{enterGiftDetail:function(t,n){return e(b.default.enterGiftDetail(t,n))}}}),c=(0,w.onUse)("enterGiftDetail"),(0,w.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},t.prototype.buy=function(){widgets.Modal.open({tag:"gift-buy-modal"})},h(t,[{key:"name",get:function(){return"gift-detail"}},{key:"tmpl",get:function(){return'<router-outlet>\n\t<div class="gift_detail">\n\t\t<div class="detail_cont">\n\t\t\t<div class="gift_img">\n\t\t\t\t<img \n\t\t\t\t  riot-src="{ parent.opts.gift.info.cover ? app.config.phtUri + parent.opts.gift.info.cover + app.config.phtStlList2 : app.config.images.GIFT_DEF_COVER }"\n\t\t\t\t  style=" width: { parent.opts.clientWidth - 28 }px; height: { parent.opts.clientWidth - 28 }px "\n\t\t\t\t>\n\t\t\t</div>\n\t\t\t<div class="gift_info">\n\t\t\t\t<p class="name">{ parent.opts.gift.info.name }</p>\n\t\t\t\t<p class="lead">{ parent.opts.gift.info.lead }</p>\n\t\t\t\t<div class="receivers">\n\t\t\t\t\t<div class="used" if="{ parent.opts.gift.num.pay > 0 }">\n\t\t\t\t\t\t<span><img riot-src="{ \'//img.91pintuan.com/songli/icon-herf/gift-box.png\'} "/></span>\n\t\t\t\t\t\t<span>{ ( parent.opts.gift.info && parent.opts.gift.info.benedictory && parent.opts.gift.info.benedictory.title) ? \n\t\t\t\t\t\t\t\tparent.opts.gift.info.benedictory.title.replace(\'{NUM}\', (parent.opts.gift.num.receivers || 0)) : \'已有\' + (parent.opts.gift.num.receivers || 0) + \'人收到了礼物\' }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div if="{ parent.opts.gift.num.pay <= 0 }"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="price">\n\t\t\t\t\t<span>{ $.util.filter.currency(parent.opts.gift.info.price) }</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="detail_info">\n\t\t\t  <span class="title">礼物详情</span>\n\t\t\t\t<raw content="{ parent.opts.gift.info.detail }"></raw>\n\t\t\t</div>\n\t\t\t<!--底表logo-->\n\t\t\t<bottom></bottom>\n\t\t</div>\n\t\t<!-- Start giving gifts to friends -->\n\t\t<div class="btn_give" if="{ !parent.opts.gift.num.stock || ((parent.opts.gift.num.stock - parent.opts.gift.num.subpay) > 0) }">\n\t\t  <button onclick="{ parent.buy }">购买并赠送</button>\n\t\t  <!--\n\t\t\t<a class="fl btn_one" href="{ \'/gift/\' + parent.opts.gift.id + \'/order/record?type=one2one\' }">送一人</a>\n\t\t\t<a class="fr btn_more" href="{ \'/gift/\' + parent.opts.gift.id + \'/order/record?type=one2many\' }">送多人</a>\n\t\t\t-->\n\t\t</div>\n\t\t<!-- The gift has been sold out  -->\n\t\t<div class="btn_online" if="{ !parent.opts.gift.status.online || ( parent.opts.gift.num.stock != 0 && ((parent.opts.gift.num.stock - parent.opts.gift.num.subpay) <= 0) ) }">\n\t\t\t<a href="javascript:;" disabled="true">抱歉，该商品已售罄</a>\n\t\t</div>\n\t</div>\n</router-outlet> '}}]),t}(y.default.Tag),f.originName="gift-detail",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(6)),b=r(m),w=n(3),_=(u=(0,w.Connect)(function(e){return{gifts:e.gifts,clientWidth:e.clientWidth}},function(e){return{nextPage:function(){return e(b.default.nextPage())},enterGiftList:function(t,n){return e(b.default.enterGiftList(t,n))}}}),c=(0,w.onUse)("enterGiftList"),(0,w.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"gift-list"}},{key:"tmpl",get:function(){return'<on-scroll \n  infinite-scroll=\'{ opts.nextPage }\' \n  infinite-scroll-disabled=\'{ opts.gifts.busy }\' \n  infinite-scroll-distance=\'{ 100 }\'\n  >\n  <div class="gift-list">\n    <a class="list_item fl" \n      each="{ gift in parent.opts.gifts.items }" \n      href="/gift/{ gift.id }"\n      style="width: { parent.parent.opts.clientWidth/2}px;"\n      >\n      <div class="list_img" style="width: { parent.parent.opts.clientWidth/2}px; height: { parent.parent.opts.clientWidth/2  -12 }px;" >\n        <img \n          riot-src="{ gift.info.cover ? app.config.phtUri + gift.info.cover + app.config.phtStlList : app.config.images.GIFT_DEF_COVER }" \n          style="width: { parent.parent.opts.clientWidth/2 -12 }px; height: { parent.parent.opts.clientWidth/2  -12 }px;"\n        >\n      </div>\n      <div class="gift_name" style="width: { parent.parent.opts.clientWidth/2 -12 }px;">\n\t\t\t\t<span>{ gift.info.name }</span>\n      </div>\n      <div class="gift_price" style="width: { parent.parent.opts.clientWidth/2 -12 }px;">\n        <span>{ $.util.filter.currency(gift.info.price) }</span>\n      </div>\n    </a>\n  </div>\n</on-scroll>\n '}}]),t}(y.default.Tag),f.originName="gift-list",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(2),d=r(f),h=n(1),v=(r(h),n(3)),y=n(6),g=r(y),m=(s=(0,v.Connect)(function(e){return{order:e.order,pois:e.pois,clientWidth:e.clientWidth,poiLoaded:e.poi.loaded}},function(e){return{getPois:function(){return e(g.default.getPois())},selectPoi:function(t){return e(g.default.selectPoi(t))}}}),(0,v.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){this.on("mount",this.onMount.bind(this)),this.on("mount",function(){app.store.dispatch({type:"poi/loaded",payload:!0})})},t.prototype.selPoi=function(e){var t=this;return function(n){t.opts.selectPoi(e),t.trigger("dismiss",e)}},t.prototype.onMount=function(){this.opts.getPois()},t.prototype.dismiss=function(){this.trigger("dismiss")},l(t,[{key:"name",get:function(){return"gift-poi-modal"}},{key:"tmpl",get:function(){return'<div class="poi-address"  if="{ opts.pois.length }">\n  <div class="list-group address_list">\n    <a href="javascript:void(0)" class="list-group-item poiList"\n        each="{ poi in opts.pois }"\n        onclick="{selPoi(poi)}">\n      <!--右侧按钮圈-->\n      <span class="poi-com point"></span>\n      <span class="poi-com point1" if="{ parent.opts.poi.id === poi.id }"></span>\n      <div class="resLeft">\n        <span class="distance" if="{ poi.distance }">{poi.distance}km</span>\n        <h4 class="list-group-item-heading">\n          { poi.base_info.business_name + (poi.base_info.branch_name ? \'(\' + poi.base_info.branch_name + \')\' : \'\') }\n        </h4>\n        <p class="list-group-item-text">\n          <span>{ poi.base_info.province }</span>\n          <span>{ poi.base_info.city }</span>\n          <span>{ poi.base_info.district }</span>\n          <span>{ poi.base_info.address }</span>\n        </p>\n      </div>\n    </a>\n  </div>\n</div>\n\n<div if="{ !opts.pois.length && !opts.poiLoaded}" class="beyWamp" >\n  <div class="beyond">\n    <span>:( 您当前位置距离该商家门店过远</span><br />\n    <button class="bey_back"  onclick="{ dismiss }">返回</button>\n  </div>\n</div> '}}]),t}(d.default.Tag),c.originName="gift-poi-modal",u=p))||u)||u);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(6)),b=r(m),w=n(3),_=(u=(0,w.Connect)(function(e){return{gift:e.gift,clientWidth:e.clientWidth,suborders:e.suborders,receivedCount:e.suborders.length}},function(e){return{enterGiftShare:function(t,n){return e(b.default.enterGiftShare(t,n))}}}),c=(0,w.onUse)("enterGiftShare"),(0,w.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},t.prototype.getSuborderInfo=function(e,t){return e&&e.info&&e.info.benedictory&&e.info.benedictory.content?e.info.benedictory.content.replace("{RECEIVER}",t.name.slice(0,1)+"** "||t.consignee.slice(0,1)+"** "):(t.name&&t.name.slice(0,1)||t.consignee&&t.consignee.slice(0,1))+"** 收到了礼物"},h(t,[{key:"name",get:function(){return"gift-share"}},{key:"tmpl",get:function(){return'<div class="gift_share">\n  <div class="img_bg" style="width: { opts.clientWidth - 20 }px;">\n    <img src="https://img.91pintuan.com/songli/icon-herf/img-share-bg.png" />\n  </div>\n  <div class="share_box">\n    <div class="share_head">\n      <div class="gift_img">\n        <img riot-src="{ opts.gift.info.cover ? app.config.phtUri + opts.gift.info.cover : app.config.images.GIFTSHRAE_DEF_COVER }">\n      </div>\n    </div>\n    <div class="share_gift_name">\n      <span>{ opts.gift.info.name }</span>\n    </div>\n    <div class="share_main">\n      <div class="main_top">\n        <span><img src="//img.91pintuan.com/songli/icon-herf/gift-box.png" /></span>\n        <span>{ (opts.gift.info && opts.gift.info.benedictory && opts.gift.info.benedictory.title) ? \n          opts.gift.info.benedictory.title.replace(\'{NUM}\', opts.receivedCount) : \'已有\' + opts.receivedCount + \'人收到了礼物\' }\n        </span>\n      </div>\n      \n      <div class="main_bottom">\n        <imarquee direction="down" height="200" gap="40" speed="3000" items="{ opts.suborders }">\n          <ul class="scroll_box" id="marquee_content">\n            <li each="{ suborder in items }">\n              <img src="{ suborder.headimgurl }" />\n              <span>{ parent.parent.getSuborderInfo(opts.gift, suborder) }</span>\n            </li>\n          </ul>\n        </imarquee>\n      </div>\n    </div>\n    <div class="share_foot">\n      <a href="/gift/{ opts.gift.id }">我也要送礼</a>\n    </div>    \n  </div>\n  \n  <icon-href theme="white"></icon-href>\n</div>\n '}}]),t}(y.default.Tag),f.originName="gift-share",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(3)),v=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){this.shareSrc="//img.91pintuan.com/songli/gift_shared.png"},t.prototype.dismiss=function(){this.trigger("dismiss")},p(t,[{key:"name",get:function(){return"gift-share-modal"}},{key:"css",get:function(){return"\n      .share{\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n      }\n      .share img{\n        width: 80%;\n        float: right;\n        margin-right: 2%;\n      }\n    "}},{key:"tmpl",get:function(){return'\n      <div class="share" id="share" onclick="{ dismiss }">\n        <img riot-src="{ shareSrc }" />\n      </div>\n\t\t'}}]),t}(f.default.Tag),u.originName="gift-share-modal",s=c))||s;t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}var i=this,a=n(2),s=r(a),u=n(161),c=r(u),p=n(116);n(97),n(99);var l=n(29),f=r(l),d=n(54),h=r(d),v=n(57),y=r(v),g=n(3),m=n(95),b=r(m),w=n(66),_=r(w),O=n(96),x=r(O),k=n(19),j=r(k);window.libs={riot:s.default,wx:c.default},window.riot=s.default,window.wx=c.default;var S=(0,g.Ninjia)({container:window,reducer:b.default,middlewares:_.default,state:{}});S.config=y.default,S.set("env","production"),S.set("mode","browser"),S.set("context",{util:{promisify:p.promisify,promisifyAll:p.promisifyAll}}),S.set("routes",x.default),S.start(o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.app=S,t=location.host.replace(location.host.split(".")[0],"").slice(1),e.next=4,(0,h.default)(S,{origin:t});case 4:S.hub.subscribe("history-pending",function(){var e=o(regeneratorRuntime.mark(function e(t,n,r,o,a){var s,u,c,p=o.req;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.body.authenticate){e.next=11;break}if(f.default.get("token")){e.next=11;break}return s=p.query,u=location.pathname+location.search,u=u.startsWith("/")?u:"/"+u,f.default.set("referer",u),e.next=8,$.get("/wechat/client?referer="+u);case 8:return c=e.sent,location.href=c.link,e.abrupt("return");case 11:a&&a();case 12:case"end":return e.stop()}},e,i)}));return function(t,n,r,o,i){return e.apply(this,arguments)}}()),S.hub.on("history-resolve",function(e,t,n,r,o){}),n(152),n(151),n(147),n(156),n(150),n(148),n(155),n(149),n(153),n(154),n(44),n(56),n(55),n(47),n(64),n(62),n(59),n(67),n(23),n(24),n(84),n(85),n(71),n(70),n(77),n(76),n(25),n(79),n(80),n(78),n(82),n(74),S.registerWidget({name:"alert",methods:["add"]}),S.registerWidget({name:"modal",methods:["open"]}),window.widgets.Alert=S.context.tags.alert,window.widgets.Modal=S.context.tags.modal,S.set("entry",new j.default(document.getElementById("app"),{store:S.store}));case 43:case"end":return e.stop()}},e,i)})))},function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(120),s=function(e){return function(t){return function(n){var r=null,o=null;"object"===("undefined"==typeof n?"undefined":i(n))&&(r=n.type,o=n),"function"==typeof n&&(r=(n.name||n.toString().match(/function\s*([^(]*)\(/)[1])+"[Async-Thunk]",o="thunk is pending"),n.then&&"function"==typeof n.then&&(r="[Async-Promise]",o=n),console.group(r),console.info("dispatching",o);var a=t(n);return console.log("next state",e.getState()),console.groupEnd(r),a}}},u=function(e){return function(e){return function(t){return"changeTitle"===t.type&&(document.title=t.payload),e(t)}}},c=function(e){return function(e){return function(t){if(!t.meta||!t.meta.delay)return e(t);var n=setTimeout(function(){return e(t)},t.meta.delay);return function(){clearTimeout(n)}}}},p=function(e){var t=e.dispatch;return function(e){return function(n){return(0,a.isFSA)(n)?r(n.payload)?n.payload.then(function(e){return t(o({},n,{payload:e}))},function(e){return t(o({},n,{payload:e,error:!0})),Promise.reject(e)}):e(n):r(n)?n.then(t):e(n)}}},l=function(e){return function(e){return function(t){function n(e,n){var r=Object.assign({},t,{ready:e},n);return delete r.promise,r}return t.promise?(e(n(!1)),t.promise.then(function(t){return e(n(!0,{result:t}))},function(t){return e(n(!0,{error:t}))})):e(t)}}},f=function(e){return function(t){return function(n){return"function"==typeof n?n(e.dispatch,e.getState):t(n)}}},d={logger:s,timeoutScheduler:c,vanillaPromise:p,readyStatePromise:l,thunk:f,changeTitle:u};d={timeoutScheduler:c,vanillaPromise:p,readyStatePromise:l,thunk:f,changeTitle:u},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(2),d=r(f),h=n(1),v=(r(h),n(3)),y=(s=(0,v.Connect)(function(e){return{merchant:e.merchant,clientWidth:e.clientWidth}}),(0,v.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},t.prototype.dismiss=function(){this.trigger("dismiss")},l(t,[{key:"name",get:function(){return"merchant-info"}},{key:"tmpl",get:function(){return'\n      <div class="merchant-info" onclick="{ dismiss }">\n        <div class="merchant-pubno">\n          <div class="pubno">\n            <span><img width="50px"  riot-src="{ opts.merchant.pubno.head_img }"></span>\n            <span>{ opts.merchant.pubno.nick_name }</span>\n          </div>\n          <div class="pubno">\n            <span>联系人</span>\n            <span>{ opts.merchant.info.linkman }</span>\n          </div>\n          <div class="pubno">\n            <span>联系商家</span>\n            <span>{ opts.merchant.info.phone ? opts.merchant.info.phone : opts.merchant.info.telephone }</span>\n          </div>\n          <div class="pubno">\n            <span>官方微信</span>\n            <span>{ opts.merchant.pubno.nick_name }</span>\n          </div>\n        </div>\n      </div>\n    '}}]),t}(d.default.Tag),c.originName="merchant-info",u=p))||u)||u);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(3)),v=(0,h.View)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},p(t,[{key:"name",get:function(){return"order"}},{key:"tmpl",get:function(){return"<router-outlet></router-outlet>"}}]),t}(f.default.Tag),u.originName="order",s=c))||s;t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(4),w=r(b),_=(u=(0,m.Connect)(null,function(e){return{enterOrderDetail:function(t,n){return e(w.default.enterOrderDetail(t,n))}}}),c=(0,m.onUse)("enterOrderDetail"),(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-detail"}},{key:"tmpl",get:function(){return"\n\t\t\t<router-outlet></router-outlet>\n\t\t"}}]),t}(y.default.Tag),f.originName="order-detail",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(2),d=r(f),h=n(1),v=(r(h),n(3)),y=n(4),g=(r(y),n(10)),m=r(g),b=n(17),w=function(e){return e.order},_=(0,b.createSelector)(w,function(e){return e.receivedCount}),O=(0,b.createSelector)(w,function(e){return e.capacity-e.receivedCount}),x=((0,b.createSelector)(w,function(e){return e.receivers&&e.receivers.sort(function(e,t){return e.id-t.id})||[]}),(0,b.createSelector)(w,function(e){return e.receivedCount>0})),k=(s=(0,v.Connect)(function(e){return{order:e.order,remainCount:O(e),isInteract:x(e),receivedNum:_(e),suborderInteracts:e.suborderInteracts}},function(e){return{nextPage:function(){return e(m.default.nextPage())}}}),(0,v.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){var t=app.store.dispatch;t({type:"suborderInteracts/reset"}),t(m.default.nextPage())},l(t,[{key:"name",get:function(){return"order-interact"}},{key:"tmpl",get:function(){return'\n\t\t\t<div if="{ opts.isInteract }" class="interact">\n\t\t\t\t<p>{ opts.receivedNum }人已领取 ，<span if="{ opts.remainCount === 0 }">礼物已经被领完</span><span if="{ opts.remainCount !== 0 }">还有{ opts.remainCount }份</span></p>\n        <on-scroll \n        infinite-scroll=\'{ opts.nextPage }\' \n        infinite-scroll-disabled=\'{ opts.suborderInteracts.busy }\' \n        infinite-scroll-distance=\'{ 100 }\'\n        >\n          <ul>\n            <li each="{ suborder in parent.opts.suborderInteracts.suborders }">\n              <img riot-src="{ suborder.headimgurl }"/>\n              <span>{ suborder.name || suborder.consignee }</span>\n              <span> 已领取</span>\n              <span>{ $.util.filter.date(suborder.fillinDate, \'MM-dd hh:mm:ss\') }</span>\n            </li>\n          </ul>\n        </on-scroll>\n\t\t\t</div>\n\t\t'}}]),t}(d.default.Tag),c.originName="order-interact",u=p))||u)||u);t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(4),w=r(b),_=(u=(0,m.Connect)(function(e){return{orders:e.orders,clientWidth:e.clientWidth}},function(e){return{enterOrderList:function(t,n){return e(w.default.enterOrderList(t,n))},nextPageCreator:function(t){return function(){return e(w.default.nextPage(t))}}}}),c=(0,m.onUse)("enterOrderList"),(0,m.Component)(p=(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-list"}},{key:"tmpl",get:function(){return'<on-scroll \n  infinite-scroll=\'{ opts.nextPageCreator(opts.force) }\' \n  infinite-scroll-disabled=\'{ opts.orders.busy }\' \n  infinite-scroll-distance=\'{ 100 }\'\n  >\n  <div class="order_list">\n    <a class="order_href" \n      each="{ order in parent.opts.orders.items }" \n      href="{ \'/personal/order/\' + order.id + \'/info\' }"\n      >\n      <div class="order_wrap">\n        <div class="order_head">\n          <span>\n            <img  riot-src="{ order.gift.info.cover ? app.config.phtUri + order.gift.info.cover : app.config.images.GIFTSHRAE_DEF_COVER }">\n          </span>\n          <span style="width: { parent.parent.opts.clientWidth - 120 }px">{ order.gift.info.name }</span>\n        </div>\n        <div class="order_main">\n          <ul>\n            <li>\n              <span>单&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;价：</span>\n              <span>{ $.util.filter.currency(order.gift.info.price) }</span>\n              <em>x{ order.capacity }</em>\n            </li>\n            <li>\n              <span>支付金额：</span>\n              <span>{ $.util.filter.currency(order.gift.info.price * order.capacity) }</span>\n            </li>\n            <li>\n              <span>下单时间：</span>\n              <span>{ $.util.filter.date(order.time.add, \'yyyy-MM-dd hh:mm:ss\') }</span>\n            </li>\n          </ul>\n        </div>\n        <div class="order_foot">\n          <span>订单号 { order.serial }</span>\n          <span><img src="//img.91pintuan.com/songli/client/poi-right.png"/></span>\n        </div>\n      </div>\n    </a>\n  </div>\n</on-scroll>\n ';
}}]),t}(y.default.Tag),f.originName="order-list",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(2),v=r(h),y=n(1),g=r(y),m=n(3),b=n(4),w=(r(b),u=(0,m.onUse)([function(e,t){return(0,g.default)("/order/"+t.req.params.id+"/state")}]),(0,m.View)((f=l=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},d(t,[{key:"name",get:function(){return"order-mock"}},{key:"tmpl",get:function(){return""}}]),t}(v.default.Tag),l.originName="order-mock",p=f,s(p.prototype,"onCreate",[u],Object.getOwnPropertyDescriptor(p.prototype,"onCreate"),p.prototype),c=p))||c);t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(4),w=r(b),_=(u=(0,m.Connect)(function(e){return{order:e.order,gift:e.gift}},function(e){return{enterOrderPay:function(t,n){return e(w.default.enterOrderPay(t,n))},wxPay:function(t){return e(w.default.wxPay.apply(this))}}}),c=(0,m.onUse)("enterOrderPay"),(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-pay"}},{key:"tmpl",get:function(){return'<div class="order_pay">\n  <div class="payment">\n    <div class="pay_info">\n      <div class="pay_nl">\n        <span>{ opts.gift.info.name }</span>\n        <span>{ opts.gift.info.lead }</span>\n      </div>\n      <div class="pay_num">\n        <span>{ $.util.filter.currency(opts.gift.info.price) }</span>\n        <span>{ opts.order.capacity }份</span>\n      </div>\n    </div>\n    <div class="pay_total">\n      <span>总 计</span>\n      <span>{ $.util.filter.currency(opts.gift.info.price * opts.order.capacity) }</span>\n    </div>\n    <!--/total-pay-->\n    <div class="pay_now">\n      <a class="pay_btn" onclick="{ opts.wxPay.bind(this) }" disabled="{ submiting }">{ submiting ? \'支付中...\' : \'支付\' }</a>\n    </div>\n  </div>\n</div> '}}]),t}(y.default.Tag),f.originName="order-pay",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(2),h=r(d),v=n(1),y=r(v),g=n(4),m=r(g),b=n(3),w=n(17),_=function(e){return e.order},O=(0,w.createSelector)(_,function(e){return e.capacity-e.receivedCount>0}),x=(0,w.createSelector)(_,function(e){return e.receivedCount}),k=(u=(0,b.Connect)(function(e){return{order:e.order,suborders:e.suborderInteracts.suborders,clientWidth:e.clientWidth,type:e.order.capacity>1?"one2many":"one2one",availableCount:e.order.capacity-x(e),receivedCount:x(e),isInteract:!0,isAvailable:O(e)}},function(e){return{detail:m.default.giftDetail}}),(0,b.Component)(c=u((l=p=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.onSubmit=function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=app.store,n=t.getState,r=t.dispatch,o=n().order,!o.gift||"wb"!==o.gift.scene){e.next=8;break}return e.next=5,r(m.default.orderReceiveSubmit());case 5:return e.abrupt("return");case 8:(0,y.default)("/order/"+o.id+"/receive");case 9:case"end":return e.stop()}},e,this)}));return e}(),f(t,[{key:"name",get:function(){return"order-pre-receive"}},{key:"tmpl",get:function(){return'<div class="pre_receive">\n  <div class="pre_wrap">\n    <div class="pre_cont">\n      <img class="right_top_corner" src="//img.91pintuan.com/songli/i.png" />\n      <div class="head_portrait">\n        <img riot-src="{ opts.order.sender.info.headimgurl }" />\n      </div>\n      <div class="head_nickname">\n        <span>{ opts.order.sender.info.nickname }送给你一份礼物</span>\n      </div>\n      <div class="receive_status">\n        <div if="{ opts.isAvailable }">\n          <div if="{ opts.type === \'one2one\' }">\n            <span class="gift_num">请尽快领取</span>\n            <span class="receive_num" if="{ opts.order.gift.scene === \'poi\' }">领取后到店使用</span>\n            <span class="receive_num" if="{ opts.order.gift.scene === \'logistics\' }">点击领取礼物完善收货信息</span>\n          </div>\n          <div if="{ opts.type === \'one2many\' }">\n            <span class="gift_num">还有{ opts.availableCount }份 </span>\n            <span class="receive_num">{ opts.receivedCount }人已领取</span>\n          </div>\n        </div>\n        <div if="{ !opts.isAvailable }">\n          <div if="{ opts.type === \'one2one\' }">\n            <span class="gift_num">礼物已被抢完</span>\n            <span class="receive_num">{ opts.suborders[0].name }</span>\n          </div>\n          <div if="{ opts.type === \'one2many\' }">\n            <span class="gift_num">礼物已被抢完</span> <br />\n            <span class="receive_num">{ opts.receivedCount }人已领取</span>\n          </div>\n        </div>\n      </div>\n      \n      <div class="btn_group">\n        <a if="{ opts.isAvailable }" href="javascript: void(0)" onclick="{ onSubmit }" class="btn_receive">领取礼物</a>\n        <a if="{ !opts.isAvailable }" href="/gift/{ opts.order.gift.id }" class="btn_send">我也要送礼</a>\n        <span if="{ opts.type === \'one2many\' && opts.order.gift.scene === \'poi\' }">领取后到店使用</span>\n      </div>\n      \n      <div class="gift_cover">\n        <div class="cover_cont">\n          <div class="img_cover" style="height: {(opts.clientWidth -50 )/2}px">\n            <img riot-src="{ opts.order.gift.info.cover ? app.config.phtUri + opts.order.gift.info.cover + app.config.phtStlList5 : app.config.images.GIFT_DEF_COVER }">\n          </div>\n          <div class="title">\n            <span>{ opts.order.gift.info.name }</span>\n            <a href="/order/{ opts.order.id }/detail"><img src="//img.91pintuan.com/songli/client2/white_right.png"></a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <order-interact\n        if="{ opts.isInteract }"\n        order="{ order }"\n    ></order-interact>\n  </div>\n  <icon-href theme="white"></icon-href>\n</div> '}}]),t}(h.default.Tag),p.originName="order-pre-receive",c=l))||c)||c);t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(4)),b=r(m),w=n(3),_=n(17),O=n(9),x=r(O),k=function(e){return e.order},j=(0,_.createSelector)(k,function(e){return 0===e.receivedCount}),S=(0,_.createSelector)(k,function(e){var t=e.receivedCount;return t>0&&t<e.capacity}),P=(0,_.createSelector)(k,function(e){return e.capacity===e.receivedCount}),E=(0,_.createSelector)(k,function(e){return e.receivedCount>0}),R=(u=(0,w.Connect)(function(e){return{order:e.order,clientWidth:e.clientWidth,receivers:E(e),isUnReceived:j(e),isUnAllReceived:S(e),isAllReceived:P(e)}},function(e){return{enterOrderReady:function(t,n){return e(b.default.enterOrderReady(t,n))},share:b.default.shareOrder}}),c=(0,w.onUse)([x.default.isSender,"enterOrderReady"]),(0,w.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-ready"}},{key:"tmpl",get:function(){return'\n      <div class="ready_multi">\n        <div class="multi_wrap">\n          <div class="multi_cont">\n            <img class="right_top_corner" src="//img.91pintuan.com/songli/i.png" />\n            <div class="head_portrait">\n              <img riot-src="{ opts.order.sender.info.headimgurl }"/>\n            </div>\n            <div class="head_nickname">\n              <span>我的礼包</span> \n            </div>\n            <div class="receive_status">\n              <div if="{ opts.isUnReceived }">\n                <span class="gift_num">{ opts.order.capacity }份礼物已备好</span>\n                <span class="receive_num">开始送礼吧</span>\n              </div>\n              <div if="{ opts.isUnAllReceived }">\n                <span class="gift_num">还有{ opts.order.capacity - opts.order.receivedCount }份</span>\n                <span class="receive_num">{ opts.order.receivedCount }人已领取</span>\n              </div>\n              <div if="{ opts.isAllReceived }"> \n                <span class="gift_num">礼物已全部被领完</span>\n                <span class="receive_num">{ opts.order.receivedCount }人已领取</span>\n              </div>\n            </div>\n            <div class="btn_receive"> \n              <!--gift receive-->\n              <a href="javascript:void(0)" if="{ opts.isUnReceived }" onclick="{ opts.share }" class="btn-fill">开始送礼</a>\n              <!--gift received-->\n              <a href="javascript:void(0)" if="{ opts.isAllReceived || opts.isUnAllReceived }" onclick="{ opts.share }" class="btn_continue">继续送礼</a>\n            </div>\n            <div class="gift_cover">\n              <div class="cover_cont">\n                <div class="img_cover" style="height: {(opts.clientWidth - 50)/2}px">\n                  <img riot-src="{ opts.order.gift.info.cover ? app.config.phtUri + opts.order.gift.info.cover + app.config.phtStlList5 : app.config.images.GIFT_DEF_COVER }">\n                </div>\n                <div class="title">\n                  <span>{ opts.order.gift.info.name }</span>\n                  <a href="/order/{ opts.order.id }/detail">\n                    <img src="//img.91pintuan.com/songli/client2/white_right.png">\n                  </a>\n                </div>\n              </div>\n            </div>\n          </div>\n          <!--receive gifts interact information-->\n          <order-interact></order-interact>\n        </div>\n        <!--Bottom mark-->\n        <icon-href theme="{ white }"></icon-href\'>\n      </div>\n    '}}]),t}(y.default.Tag),f.originName="order-ready",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=R},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(2),d=r(f),h=n(1),v=(r(h),n(3)),y=n(4),g=r(y),m=(s=(0,v.Connect)(function(e){return{order:e.order,clientWidth:e.clientWidth}},function(e){return{share:g.default.shareOrder,detail:g.default.giftDetail}}),(0,v.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"order-ready-one2many"}},{key:"tmpl",get:function(){return'\n      <div class="ready_multi">\n        <div class="multi_wrap">\n          <div class="multi_cont">\n            <img class="right_top_corner" src="//img.91pintuan.com/songli/i.png" />\n            <div class="head_portrait">\n              <img riot-src="{ opts.order.sender.info.headimgurl }"/>\n            </div>\n            <div class="head_nickname">\n              <span>{ opts.order.sender.info.nickname }的礼物</span>\n            </div>\n            <div class="receive_status">\n              <div if="{ !opts.order.receivers || !opts.order.receivers.length }">\n                <span class="gift_num">{ opts.order.capacity }份礼物已备好</span>\n                <span class="receive_num">开始送礼吧</span>\n              </div>\n              <div if="{ opts.order.receivers && opts.order.receivers.length && opts.order.receivers.length != opts.order.capacity }">\n                <span class="gift_num">还有{ opts.order.capacity - opts.order.receivers.length }份</span>\n                <span class="receive_num">{ opts.order.receivers.length }人已领取</span>\n              </div>\n              <div if="{ opts.order.receivers && opts.order.receivers.length && opts.order.receivers.length === opts.order.capacity }">\n                <span class="gift_num">礼物已被抢完</span>\n                <span class="receive_num">{ opts.order.receivers.length }人已领取</span>\n              </div>\n            </div>\n            <div class="btn_receive">\n              <!--礼物领取中-->\n              <a href="javascript:void(0)" \n                if="{ !opts.order.receivers || !opts.order.receivers.length || (opts.order.receivers.length && opts.order.receivers.length !== opts.order.capacity) }"\n                onclick="{ opts.share }" \n                class="{ btn_null : opts.order.receivers.length === opts.order.capacity }"\n                class="btn-fill">\n                  { opts.order.receivers && opts.order.receivers.length ? \'继续送礼\' : \'开始送礼\' }\n              </a>\n              <!--礼物被抢完时-->\n              <a href="/gift/list" class="btn_continue"\n                if="{ opts.order.receivers && opts.order.receivers.length && opts.order.receivers.length === opts.order.capacity }">继续送礼\n              </a>\n            </div>\n            <div class="gift_cover">\n              <div class="cover_cont">\n                <div class="img_cover" style="height: {(opts.clientWidth - 50)/2}px">\n                  <img riot-src="{ opts.order.gift.info.cover ? \'http://\' + config.phtUri + opts.order.gift.info.cover + app.config.phtStlList5 : app.config.images.GIFT_DEF_COVER }">\n                </div>\n                <div class="title">\n                  <span>{ opts.order.gift.info.name }</span>\n                  <span onclick="{ opts.detail }">详情</span>\n                </div>\n              </div>\n            </div>\n            <!--\n            <div class="gift_inform">\n              <span>您已成功购买{ opts.order.capacity }份{ opts.order.gift.info.name },发至到微信好友/微信群或朋友圈,开始送礼吧！</span>\n            </div>\n            -->\n          </div>\n          <!--receive gifts interact information-->\n          <order-interact></order-interact>\n        </div>\n        <!--Bottom mark-->\n        <icon-href theme="{ white }"></icon-href\'>\n      </div>\n\t\t'}}]),t}(d.default.Tag),c.originName="order-ready-one2many",u=p))||u)||u);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(2),h=r(d),v=n(1),y=(r(v),n(4)),g=r(y),m=n(3),b=function(e){return e.receivers&&e.receivers[0]&&e.receivers[0].telephone||!1},w=(u=(0,m.Connect)(function(e){return{order:e.order,isReceived:b(e.order)}},function(e){return{enterOrderReadyOne2One:e(g.default.enterOrderReadyOne2One),share:g.default.shareOrder}}),(0,m.Component)(c=u((l=p=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,app.store.dispatch(g.default.enterOrderReadyOne2One());case 2:case"end":return e.stop()}},e,this)}));return e}(),f(t,[{key:"name",get:function(){return"order-ready-one2one"}},{key:"tmpl",get:function(){return'\n\t\t\t<div if="{ opts.isReceived }" class="ready_single">\n        <div class="single_wrap">\n          <div class="single_cont">\n            <img class="right_top_corner" src="https://img.91pintuan.com/songli/i.png">\n            <div class="head_portrait">\n              <img riot-src="{ opts.order.sender.info.headimgurl }" />\n            </div>\n            <div class="head_nickname">\n              <span>{ opts.order.sender.info.nickname }的礼物</span>\n            </div>\n            <div class="receive_status">\n              <span class="gift_num">{ opts.order.receivers[0].consignee }</span>\n              <span class="receive_num">已经领取了你的礼物</span>\n            </div>\n            <div class="gift_inform">\n                <span>您已经成功购买1份{ opts.order.gift.info.name }；自己领取或转发送给好友。</span>\n              </div>\n            <div class="btn_continue"> \n              <a href="/">继续送礼</a>\n            </div>\n          </div>\n        </div>\n        <icon-href theme="{ white }"></icon-href\'>\n      </div>\n\n      <div if="{ !opts.isReceived }">\n        <div  if="{ opts.order.gift.scene === \'poi\' }"  class="ready_single">\n          <div class="single_wrap">\n            <div class="single_cont">\n              <img class="right_top_corner" src="https://img.91pintuan.com/songli/i.png">\n              <div class="head_portrait">\n                <img riot-src="{ opts.order.sender.info.headimgurl }" />\n              </div>\n              <div class="head_nickname">\n                <span>{ opts.order.sender.info.nickname }的礼物</span><br />\n              </div>\n              <div class="receive_status">\n                <span class="gift_num">已购买成功</span>\n                <span class="receive_num">开始送礼吧</span>\n              </div>\n              <div class="gift_inform">\n                <span>您已经成功购买1份{ opts.order.gift.info.name }；自己领取或转发送给朋友。</span>\n              </div>\n              <div class="btn_receive">\n                <a href="javascript:void(0)" onclick="{ opts.share }">送给朋友</a>\n              </div>\n            </div>\n          </div>\n          <icon-href theme="{ white }"></icon-href\'>\n        </div>\n        <div if="{opts.order.gift.scene === \'logistics\'}">\n          <order-receive force="true"></order-receive>\n        </div>\n      </div>\n\t\t'}}]),t}(h.default.Tag),p.originName="order-ready-one2one",c=l))||c)||c);t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(2),v=r(h),y=n(1),g=(r(y),n(4)),m=r(g),b=n(3),w=(u=(0,b.Form)({consignee:{required:!0,maxlength:20},telephone:{required:!0},address:{required:!0,maxlength:500}}),c=(0,b.Connect)(function(e){return{order:e.order,isShare:e.orderReceiveCollection}},function(e){return{share:m.default.shareOrder,orderReceiveSubmit:function(t){return e(m.default.orderReceiveSubmit(t))}}}),(0,b.Component)(p=u(p=c((f=l=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.onSubmit=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var n,r,o,i,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=app.store,r=n.dispatch,o=n.getState,i=this,this.opts.submit("orderReceiveLogisticsForm"),!this.opts.forms.orderReceiveLogisticsForm.$invalid){e.next=6;break}return e.abrupt("return");case 6:return a={consignee:this.refs.consignee.value,telephone:this.refs.telephone.value,address:this.refs.address.value},e.next=9,this.opts.orderReceiveSubmit(a);case 9:case"end":return e.stop()}},e,this)}));return e}(),d(t,[{key:"name",get:function(){return"order-receive-logistics"}},{key:"tmpl",get:function(){return'<div class="ready_single">\n  <div class="single_wrap">\n    <div class="receive_logistics">\n      <img class="right_top_corner" src="//img.91pintuan.com/songli/i.png">\n      <div class="head_portrait">\n        <img riot-src="{ opts.order.sender.info.headimgurl }" />\n      </div>\n      <div class="gift_inform">\n        <span if="{ opts.isShare }" class="receive-present-text">已经完成支付！想要送给谁写下收礼人的收货信息；不知道地址可以直接发给对方填写</span>\n        <span if="{ !opts.isShare }" class="receive-present-text">{ opts.order.sender.info.nickname }送你一份礼物，并对你说了一段话。领取并完善信息，收到礼物扫描语音二维码即可收听。</span>\n      </div>\n      <!--form表单-->\n      <form class="form_group" ref="orderReceiveLogisticsForm" novalidate>\n        <input class="form_name" type="text" ref="consignee" placeholder="输入姓名">\n        <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.consignee.$error.required }" class="help-block" >* 请填写收货人姓名</p>\n        <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.consignee.$error.maxlength }" class="help-block" >* 收货人姓名过长</p>  \n    \n        <input class="form_tel" type="tel" ref="telephone" placeholder="输入手机号">\n        <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.telephone.$error.required" class="help-block">* 请填写手机号码.</p>\n        \n        <div class="form_addr" if="{ (opts.order.gift.scene || opts.order.gift.scene === \'logistics\') }">\n          <textarea rows="2" ref="address" class="form_textarea" placeholder="输入你的详细收货地址"></textarea>\n          <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.address.$error.required }" class="help-block">* 请输入收货人的详细地址.</p>\n          <p if="{ opts.forms.orderReceiveLogisticsForm.$submitted && opts.forms.orderReceiveLogisticsForm.address.$error.maxlength }" class="help-block" >* 配送地址字数太多.</p>\n        </div>\n        \n        <div class="btn_group">\n          <button  type="submit" class="btn_done" onclick="{ onSubmit }">完成</button>\n          <a href="javascript:void(0)" if="{ opts.isShare }" class="btn_share"  onclick="{ opts.share }">不知道地址，发给好友填写</a>\n        </div> \n        \n      </form>\n    </div>\n  </div>\n  <!--Bottom mark-->\n  <icon-href theme="{ white }"></icon-href>\n</div> '}}]),t}(v.default.Tag),l.originName="order-receive-logistics",p=f))||p)||p)||p);t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(2),v=r(h),y=n(1),g=(r(y),n(4)),m=r(g),b=n(3),w=(u=(0,b.Form)({consignee:{required:!0,maxlength:20},telephone:{required:!0},poi:{required:!0}}),c=(0,b.Connect)(function(e){return{order:e.order,clientWidth:e.clientWidth,poi:e.suborder.poi,poiLoaded:e.poi.loaded}},function(e){return{orderReceiveSubmit:function(t){return e(m.default.orderReceiveSubmit(t))}}}),(0,b.Component)(p=u(p=c((f=l=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){this.on("mount",function(){app.store.dispatch({type:"poi/loaded",payload:!0})})},t.prototype.selPoi=function(){var e=this,t=(this.pois,this.address,widgets.Modal.open({tag:"gift-poi-modal",props:{poi:this.opts.poi}}));t.one("dismiss",function(t){function n(e,t){var n=document.createEvent("Event");n.initEvent(e,!0,!0),setTimeout(function(){t.dispatchEvent(n)},0)}e.refs.poi.value=t,n("change",e.refs.poi)}),this.opts.poi&&this.opts.poi.id&&(this.refs.poi.value=this.opts.poi.id)},t.prototype.onSubmit=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=app.store,
r=n.dispatch,o=n.getState,i=o(),a=i.suborder,s=i.order,u=i.user,this.opts.submit("orderReceivePoiForm"),!this.opts.forms.orderReceivePoiForm.$invalid){e.next=6;break}return e.abrupt("return");case 6:return c={consignee:this.refs.consignee.value,telephone:this.refs.telephone.value,poi:a.poi},e.next=9,this.opts.orderReceiveSubmit(c);case 9:case"end":return e.stop()}},e,this)}));return e}(),d(t,[{key:"name",get:function(){return"order-receive-poi"}},{key:"tmpl",get:function(){return'<div class="receive_poi">\n  <div class="receive_wrap">\n    <div class="poi_cont">\n      <div class="gift_info">\n        <div class="info">\n          <div class="title">\n            <span><img riot-src="{ app.config.phtUri + opts.order.gift.info.cover }"></span>\n            <span style=" width: { (opts.clientWidth-24)*0.85 - 60 }px;" >{ opts.order.gift.info.name }</span>\n          </div>\n        </div>\n        <div class="step">\n          <img src="//img.91pintuan.com/songli/client/receive-step-1.png" alt="" />\n        </div>\n      </div>\n      <!--form表单-->\n      <form class="form-recpoi" ref="orderReceivePoiForm" novalidate>\n        <div class="form_common">\n          <label class="form_label fl">姓名</label>\n          <input class="fr" type="text" ref="consignee" placeholder="收礼人姓名">\n          <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.consignee.$error.required }" class="help-block" >* 请填写收货人姓名</p>\n          <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.consignee.$error.maxlength }" class="help-block" >* 收货人姓名过长</p>\n        </div>\n        <div class="form_common">\n          <label class="form_label fl">手机号</label>\n          <input class="fr" type="tel" ref="telephone" placeholder="手机号码">\n          <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.telephone.$error.required" class="help-block">* 请填写手机号码.</p>\n        </div>\n        <!--门店自提-->\n        <div class="form_common form_poi" onclick="{ selPoi }">\n          <label class="label_poi fl" for="poi">使用门店</label>\n          <span class="fl poi" if="{ !opts.poiLoaded }">门店加载中</span>\n          <span class="fl poi" if="{ opts.poiLoaded }">{ opts.poi ? opts.poi.base_info.business_name : \'请选择门店\' }</span>\n          <input type="hidden" ref="poi">\n          <span class="fr right"><img src="//img.91pintuan.com/songli/client/poi-right.png" alt="" /></span>\n          <p if="{ opts.forms.orderReceivePoiForm.$submitted && opts.forms.orderReceivePoiForm.poi.$error.required }" class="help-block">* 请选择门店</p>\n        </div>\n        \n        <button type="submit" class="btn_next" onclick="{ onSubmit }" >下一步</button> \n      </form>\n    </div>\n  </div>\n  <icon-href theme="{ white }"></icon-href>\n</div> '}}]),t}(v.default.Tag),l.originName="order-receive-poi",p=f))||p)||p)||p);t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(4)),v=(r(h),n(3)),y=(0,v.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){console.warn(e)},p(t,[{key:"name",get:function(){return"order-receive-wb"}},{key:"tmpl",get:function(){return"<div></div>"}}]),t}(f.default.Tag),u.originName="order-receive-wb",s=c))||s;t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,p,l,f,d,h,v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=n(2),g=r(y),m=n(1),b=(r(m),n(3)),w=n(5),_=r(w),O=n(4),x=r(O),k=(c=(0,b.Connect)(function(e){return{order:e.order,suborder:e.suborder,merchant:e.merchant,clientWidth:e.clientWidth}},function(e){return{detail:x.default.giftDetail,enterOrderReceived:function(t,n){return e(x.default.enterOrderReceived(t,n))}}}),p=(0,b.onUse)(["enterOrderReceived"]),(0,b.View)(l=c((h=d=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.openMerchant=function(){widgets.Modal.open({tag:"merchant-info",size:"lg"})},t.prototype.openLocation=function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.opts.suborder){e.next=2;break}return e.abrupt("return");case 2:return t=this.opts.suborder.poi.base_info,n=null,e.prev=4,e.next=7,_.default.getLocation({latitude:t.latitude,longitude:t.longitude,name:t.business_name+""+t.branch_name,address:t.province+t.city+t.district+t.address,scale:17,infoUrl:window.location.href});case 7:n=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),widgets.Alert.add("warning",app.config.errors.LOCATION_NOAUTH.message);case 13:case"end":return e.stop()}},e,this,[[4,10]])}));return e}(),v(t,[{key:"name",get:function(){return"order-received"}},{key:"tmpl",get:function(){return'<div class="received_result">\n  <div class="received_wrap">\n    <div class="reeceived_cont">\n      <!--门店场景-->\n      <div if="{ opts.suborder.scene === \'poi\' }">\n        <div class="gift_info" href="">\n          <div class="info">\n            <div class="title">\n              <span><img riot-src="{ app.config.phtUri + opts.order.gift.info.cover }"></span>\n              <span style=" width: { (opts.clientWidth-24)*0.85 - 60 }px;" >{ opts.order.gift.info.name }</span>\n            </div>\n          </div>\n        </div>\n        <!--使用状态-->\n        <div class="use_state" if="{ opts.suborder }">\n          <span>礼物券已被领取</span>\n          <span class="color-pink" >{ opts.suborder.status.shipping ? \'已使用\' : \'未使用\' }</span>\n        </div>\n        <!--二维码-->\n        <div class="gift_code" if="{ suborder} ">\n          <span><img riot-src="{ opts.suborder.qrcode.src }"></span>\n          <span>{ opts.suborder.id }</span>\n          <span>请保留二维码消费凭证</span>\n          <span>到店使用时请向商家出示二维码</span>\n        </div>\n        <!--领取信息-->\n        <div class="rec_info" if="{ opts.suborder }" >      \n          <ul>\n            <li onclick="{ openMerchant }">\n              <div class="rec-l fl">\n                <span>联系商家</span>\n                <span>{ opts.merchant.pubno.nick_name }</span>\n              </div>\n              <div class="rec-r fl">\n                <img class="merchant" riot-src="{ opts.merchant.pubno.head_img }">\n                <img class="icon-r fr" src="https://img.91pintuan.com/songli/client/received.png">\n              </div>\n            </li>\n            <li onclick="{ openLocation }">\n              <div class="rec-l fl">\n                <span>自提门店</span>\n                <span>{ opts.suborder.poi.base_info.business_name }</span>\n              </div>\n              <div class="rec-r fl">\n                <img class="poi-icon" src="http://91pt.oss-cn-beijing.aliyuncs.com/songli/client/received-address.png">\n                <img class="icon-r fr" src="http://91pt.oss-cn-beijing.aliyuncs.com/songli/client/received.png">\n              </div>\n            </li>\n            <li>\n              <div class="clear"></div>\n              <div class="rec-l">\n                <span>领取人信息</span>\n                <span>{ opts.suborder.consignee + \'   \' + opts.suborder.telephone }</span>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <!--微商场景-->\n      <div class="received_wb" if="{ opts.suborder.scene === \'wb\' }">\n        <a href="" class="wb_title" onclick="{ opts.detail }" >\n          <span><img riot-src="{ app.config.phtUri + opts.order.gift.info.cover + app.config.phtStlList4 }"></span>\n          <span>{ opts.order.gift.info.name }</span>\n          <span><img src="https://img.91pintuan.com/songli/client/poi-right.png" alt="" /></span>\n        </a>\n        <div class="wb_note">\n          <span>长按二维码添加客服微信获取礼包</span>\n        </div>\n        <div class="wb_img">\n          <div class="img" style=" width:{ opts.clientWidth * 0.85 }px; height:{ (opts.clientWidth * 0.85)*4/3 }px;" >\n            <img riot-src="{ \'//\' + config.phtUri + opts.order.media.info.path + app.config.phtWbQrcode }">\n          </div>          \n        </div>\n      </div>\n    </div>\n  </div>\n  <!--Bottom mark-->\n  <icon-href theme="{ white }"></icon-href>\n</div> '}}]),t}(g.default.Tag),d.originName="order-received",f=h,u(f.prototype,"onCreate",[p],Object.getOwnPropertyDescriptor(f.prototype,"onCreate"),f.prototype),l=f))||l)||l);t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(2),d=r(f),h=n(1),v=(r(h),n(4)),y=r(v),g=n(3),m=(s=(0,g.Connect)(function(e){return{order:e.order,suborders:e.suborderInteracts.suborders,clientWidth:e.clientWidth}},function(e){return{detail:y.default.giftDetail}}),(0,g.Component)(u=s((p=c=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},l(t,[{key:"name",get:function(){return"order-received-guide"}},{key:"tmpl",get:function(){return'<div if="{ opts.order.gift.scene === \'logistics\' }" class="received_guide">\n  <div class="guide_wrap">\n    <div class="received_cont">\n      <img class="right_top_corner" src="//img.91pintuan.com/songli/i.png">\n      <div class="head_portrait">\n        <img riot-src="{ opts.order.sender.info.headimgurl }" />\n      </div>\n      <div class="head_nickname">\n        <span>{ opts.order.sender.info.nickname }的礼物</span>\n      </div>\n      <div if="{ opts.order.capacity === 1 }">\n        <div class="receive_status">\n          <span class="gift_num">礼物已被领取</span> \n          <span class="receive_num">等待商家发货</span>\n        </div>\n        <div class="receiver_info">\n          <div><span>收礼人：</span><span>{ opts.suborders[0].consignee }</span></div>\n          <div><span>手机号：</span><span>{ opts.suborders[0].telephone }</span></div>\n          <div><span>地&nbsp;&nbsp;&nbsp;&nbsp;址：</span><span>{ opts.suborders[0].address }</span></div>\n        </div>\n        <div class="btn_continue"> \n          <a href="/gift/{ opts.order.gift.id }">我也要送礼</a>\n        </div>\n      </div>\n      <div if="{ opts.order.capacity > 1 }">\n        <div class="receive_status">\n          <span class="gift_num">你已领取礼物</span> \n          <span class="receive_num" if="{ opts.order.capacity - opts.order.receivedCount > 0 }">还有{ opts.order.capacity - opts.order.receivers.length }份</span>\n          <span class="receive_num" if="{ opts.order.capacity - opts.order.receivedCount === 0 }">礼物已全部被领完</span>\n        </div>\n        <div class="btn_continue"> \n          <a href="/gift/{ opts.order.gift.id }">我也要送礼</a>\n        </div>\n        <div class="gift_cover">\n          <div class="cover_cont">\n            <div class="img_cover" style="height: {(opts.clientWidth - 50)/2}px">\n              <img riot-src="{ opts.order.gift.info.cover ? app.config.phtUri + opts.order.gift.info.cover + app.config.phtStlList5 : app.config.images.GIFT_DEF_COVER }">\n            </div>\n            <div class="title">\n              <span>{ opts.order.gift.info.name }</span>\n              <a href="/order/{ opts.order.id }/detail"><img src="//img.91pintuan.com/songli/client2/white_right.png"></a>\n            </div>\n          </div>\n        </div>\n        \n      </div>\n    </div>\n    <order-interact></order-interact>\n  </div>\n  <!--Bottom mark-->\n  <icon-href theme="{ white }"></icon-href>\n</div>\n\n<div if="{ opts.order.gift.scene === \'poi\' }" class="received_guide">\n  <div class="guide_wrap">\n    <div class="received_cont">\n      <img class="right_top_corner" src="//img.91pintuan.com/songli/i.png" />\n      <div class="head_portrait">\n        <img riot-src="{ opts.order.sender.info.headimgurl }" />\n      </div>\n      <div class="head_nickname">\n        <span>{ opts.order.sender.info.nickname }的礼物</span>\n      </div>\n      <div class="receive_status">\n        <span class="gift_num">你已领取礼物 </span>\n      </div>\n      <div class="gift_inform">\n        <span>已领取礼物使用凭证，使用时请到所选门店，点击立即使用按钮将二维码凭证出示给商家即可。</span>\n      </div>\n      <div class="user_intr">\n        <span><img src="//img.91pintuan.com/songli/client/vcode-icon.png"></span>\n        <span>到店使用时请向商家出示二维码</span>\n      </div>\n      <div class="btn_group">\n        <a href="/order/{ opts.order.id }/received" class="btn_use">立即使用</a>\n        <a href="/gift/{ opts.order.gift.id }" class="btn_send">我也要送礼</a>\n      </div>\n    </div>\n    <order-interact></order-interact>\n  </div>\n  <!--Bottom mark-->\n  <icon-href theme="{ white }"></icon-href>\n</div>\n\n<div if="{ opts.order.gift.scene === \'wb\' }" class="received_guide">\n  <div class="guide_wrap">\n    <div class="received_cont">\n      <img class="right_top_corner" src="//img.91pintuan.com/songli/i.png" />\n      <div class="head_portrait">\n        <img riot-src="{ opts.order.sender.info.headimgurl }" />\n      </div>\n      <div class="head_nickname">\n        <span>{ opts.order.sender.info.nickname }送给你一份礼物</span>\n      </div>\n      <div class="receive_status receive_wb">\n        <span class="gift_num">你已领取礼物</span>\n        <span class="receive_num" ><a href="/order/{ opts.order.id }/received" >点击查看客服微信</a></span>\n      </div>\n    </div>\n    <div class="gift_cover">\n      <div class="cover_cont">\n        <div class="img_cover" style="height: {(opts.clientWidth - 50)/2}px">\n          <img riot-src="{ opts.order.gift.info.cover ? app.config.phtUri + opts.order.gift.info.cover + app.config.phtStlList5 : app.config.images.GIFT_DEF_COVER }">\n        </div>\n        <div class="title">\n          <span>{ opts.order.gift.info.name }</span>\n          <a href="/order/{ opts.order.id }/detail"><img src="//img.91pintuan.com/songli/client2/white_right.png"></a>\n        </div>\n      </div>\n    </div>\n    <order-interact></order-interact>\n  </div>\n  <!--Bottom mark-->\n  <icon-href theme="{ white }"></icon-href>\n</div>\n\n '}}]),t}(d.default.Tag),c.originName="order-received-guide",u=p))||u)||u);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,p,l,f,d,h,v,y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=n(2),m=r(g),b=n(1),w=(r(b),n(3)),_=n(5),O=r(_),x=n(4),k=r(x),j=(c=(0,w.Form)({name:{required:!0,minlength:1,maxlength:20},capacity:{required:!0,min:2,max:9999}}),p=(0,w.Connect)(function(e){return{order:e.order,recordState:e.record,gift:e.gift}},function(e){return{enterOrderRecord:function(t,n,r){return e(k.default.enterOrderRecord(t,n,r))}}}),l=(0,w.onUse)("enterOrderRecord"),(0,w.View)(f=c(f=p((v=h=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){},t.prototype.reduCapacity=function(){var e=app.store,t=e.dispatch,n=e.getState,r=n().order.capacity;r>2?t({type:"order/update",payload:{capacity:--r}}):2==r&&widgets.Alert.add("warning",app.config.messages.GIFT_REDUCE,2e3)},t.prototype.incrCapacity=function(){var e=app.store,t=e.dispatch,n=e.getState,r=n().order.capacity;t({type:"order/update",payload:{capacity:++r}})},t.prototype.onSubmit=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=app.store,r=n.dispatch,o=n.getState,i=this,t.preventDefault(),this.opts.submit("orderRecordForm"),!this.opts.forms.orderRecordForm.$invalid){e.next=6;break}return e.abrupt("return");case 6:return a=o().order,e.next=9,O.default.uploadVoice({localId:a.localId,isShowProgressTips:1});case 9:s=e.sent,a.serverId=s.serverId,"one2one"===a.type&&(a.name=i.refs.name.value),"one2many"===a.type&&(a.capacity=i.refs.capacity.value),r({type:"order/update",payload:a}),localStorage.setItem("order:recorded",JSON.stringify(a)),location.href="/wepay/?showwxpaytitle=1&component=OrderPay";case 16:case"end":return e.stop()}},e,this)}));return e}(),y(t,[{key:"name",get:function(){return"order-record"}},{key:"tmpl",get:function(){return'<form class="record" ref="orderRecordForm" novalidate>\n  <div class="sound-record">\n    <!--大礼包-->\n    <div if="{ opts.order.status.bigpack }" class="bigpack_recoding">\n      <div class="start_recoding">\n        <img if="{ opts.user.photo }" riot-src="{ opts.user.photo }" alt="" />\n        <span>请开始录音</span>\n      </div>\n    </div>\n    <!--送单人-->\n    <div if="{ opts.order.type === \'one2one\' }"  class="single">\n      <img src="//img.91pintuan.com/songli/word_send_to.png" />\n      <input type="text" ref="name" placeholder="Ta的名字"  />\n      <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.name.$error.required }" class="help-block" >昵称未填写</p>\n      <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.name.$error.maxlength }" class="help-block" >收货人昵称过长</p>\n      <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.name.$error.minlength }" class="help-block" >收货人昵称过短</p>\n    </div>\n    <!--送多人-->\n    <div if="{ opts.order.type === \'one2many\' }" class="multiple">\n      <img src="//img.91pintuan.com/songli/gift_copies-more.png" />\n      <div class="input-group">\n        <span class="input-left">\n          <button type="button" onclick="{ reduCapacity }" class="input-lr" >\n            <span> - </span>\n          </button>\n        </span>\n        <span class="input-middle">\n          <input type="number" ref="capacity" value="{ opts.order.capacity }">\n        </span>\n        <span class="input-right">\n          <button type="button" onclick="{ incrCapacity }" class="input-lr" data-type="plus" >\n            <span> + </span>\n          </button>\n        </span>\n        <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.capacity.$error.required }" class="help-block">礼物份数至少是2份</p>\n        <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.capacity.$error.min }" class="help-block">礼物份数至少是2份</p>\n        <p if="{ opts.forms.orderRecordForm.$submitted && opts.forms.orderRecordForm.capacity.$error.max }" class="help-block">礼物份数至多9999份</p>\n      </div>\n    </div>\n    \n    <order-record-voice></order-record-voice>\n\n    <!--说明-->\n    <div class="recoding_desc">\n      <div if="{ (opts.recordState.stop || opts.recordState.start) && (opts.order.gift && opts.gift.scene && opts.gift.scene === \'poi\' || opts.gift.status.poi) }">\n        <span>录制一段语音，收礼人到店领取该礼物时</span>\n        <span>即可听到你的话</span>\n      </div>\n      <div if="{ (opts.recordState.stop || opts.recordState.start) && (opts.order.gift && opts.gift.scene && opts.gift.scene === \'logistics\' || opts.gift.status.logistics)  }">\n        <span>录制一段语音，收礼人收到礼物后</span>\n        <span>扫描语音码，即可听到你的话</span>\n      </div>\n    </div>\n  </div>\n</form>\n '}}]),t}(m.default.Tag),h.originName="order-record",d=v,u(d.prototype,"onCreate",[l],Object.getOwnPropertyDescriptor(d.prototype,"onCreate"),d.prototype),f=d))||f)||f)||f);t.default=j},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(3)),v=(0,h.Component)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onInit=function(){this.progress=0,this.countdown=60,this.maxtime=60,this.proRecorded=0,this.timeRecorded=0,this.startTime=0,this.endTime=0,this.interval&&clearInterval(this.interval),this.timeout&&clearTimeout(this.timeout)},t.prototype.reset=function(){clearInterval(this.interval),clearTimeout(this.timeout),this.interval=null,this.timeout=null,this.progress=0,this.countdown=60},t.prototype.onCreate=function(e){var t=this;this.on("unmount",this.reset),this.on("update",function(){t.maxtime=parseInt(t.opts.maxtime,10)||60,t.during=parseInt(t.opts.interval,10)||1e3}),this.on("timer:init",this.onInit.bind(this)),this.on("timer:start",function(){t.reset(),t.startTime=new Date,t.interval=setInterval(function(){t.progress+=100*t.during/1e3/t.maxtime,t.countdown-=t.during/1e3,t.update()},t.during)}),this.on("timer:stop",function(){clearInterval(t.interval),t.endTime=new Date,t.proRecorded=t.progress,t.timeRecorded=t.endTime-t.startTime,t.startTime=0,t.endTime=0}),this.on("timer:pause",function(){clearInterval(t.interval)}),this.on("timer:play",function(){t.reset(),t.startTime=new Date,t.interval=setInterval(function(){t.progress+=100*t.during/1e3/t.countdown,t.countdown-=t.during/1e3,t.update()},t.during),t.timeout=setTimeout(function(){t.trigger("timer:stop")},t.timeRecorded)}),this.onInit()},p(t,[{key:"name",get:function(){return"order-record-timer"}},{key:"tmpl",get:function(){return'\n\t\t  <!--\n\t\t\t<div class="progress">\n\t\t\t\t<div class="progress-active" id="pro" aria-valuenow="{ countdown }" aria-valuemin="0" aria-valuemax="60" style="width: { progress ? progress : 0 }%;">\n\t\t\t\t</div>\n\t\t\t<div>\n\t\t\t-->\n\t\t\t<span class="progress-time" id="second">{ countdown === 60 ? \'00:00\' : $.util.filter.toDouble(60 - countdown) }</span>\n\t\t'}}]),t}(f.default.Tag),u.originName="order-record-timer",s=c))||s;t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(2),h=r(d),v=n(1),y=(r(v),n(3)),g=n(5),m=r(g),b=(u=(0,y.Connect)(function(e){return{recordState:e.record,order:e.order,bigpack:e.bigpack}}),(0,y.Component)(c=u((l=p=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.onCreate=function(e){e.storeField||(e.storeField="order"),this.on("mount",this.onMount.bind(this))},t.prototype.onMount=function(){this.tags["order-record-timer"].trigger("timer:init")},t.prototype.record=function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=app.store.dispatch,e.next=3,m.default.startRecord();case 3:this.tags["order-record-timer"].trigger("timer:start"),t({type:"record/update",payload:{start:!0,stop:!1,record:!1,playVoice:!0,stopVoice:!1}});case 5:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.stop=function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=app.store.dispatch,n=this,e.next=4,m.default.stopRecord();case 4:r=e.sent,n.tags["order-record-timer"].trigger("timer:stop"),t({type:this.opts.storeField+"/update",payload:{localId:r.localId}}),t({type:"record/update",payload:{start:!1,stop:!1,record:!0,playVoice:!0,stopVoice:!1}});case 8:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.rerecord=function(){var e=app.store.dispatch;this.tags["order-record-timer"].trigger("timer:init"),e({type:"record/reset"})},t.prototype.playVoice=function(){var e=app.store.dispatch,t=app.store.getState().order;this.tags["order-record-timer"].trigger("timer:play"),m.default.playVoice({localId:t.localId}),e({type:"record/update",payload:{stopVoice:!0,playVoice:!1}})},t.prototype.suspend=function(){var e=(app.store.getState().order,app.store.dispatch);this.tags["order-record-timer"].trigger("timer:pause"),e({type:"record/update",payload:{stopVoice:!1,playVoice:!0}})},f(t,[{key:"name",get:function(){return"order-record-voice"}},{key:"tmpl",get:function(){return'<div class="voice-box">\n\t<div class="voice-process">\n\t\t<div if="{ opts.order.type === \'one2one\' }"><img src="//img.91pintuan.com/songli/word_say_to.png" /></div>\n\t\t<div if="{ opts.order.type === \'one2many\' }"><img src="//img.91pintuan.com/songli/word-zhufu_newyear.png" /></div>\n\t\t<order-record-timer interval="1000" countdown="60" autostart="false">\n\t\t</order-record-timer>\n\t</div>\n\t<!-- 开始录音 -->\n\t<div class="record-before" if="{ opts.recordState.stop }">\n\t\t<img src="//img.91pintuan.com/songli/client2/recode_start.png" onclick="{ record }" />\n\t\t<span class="hint">点击按钮开始录音</span>\n\t</div>\n\t<!-- 结束录音 -->\n\t<div class="record-before" if="{ opts.recordState.start }">\n\t\t<img src="//img.91pintuan.com/songli/client2/recode_stop.png" onclick="{ stop }" />\n\t\t<span class="hint">再次点击结束录音</span>\n\t</div>\n\t<!-- 调试录音 -->\n\t<div class="record-after" if="{ opts.recordState.record }">\n\t\n\t\t<div if="{ opts.recordState.playVoice }"  class="btn_play" >\n\t\t\t<img src="//img.91pintuan.com/songli/client2/recode_play.png" onclick="{ playVoice }">\n\t\t\t<label class="hint">播放</label>\n\t\t</div>\n\t\t\n\t\t<div if="{ opts.recordState.stopVoice }" class="btn_play" >\n      <img src="//img.91pintuan.com/songli/client2/pause_play.png" onclick="{ suspend }">\n      <label class="hint">暂停</label>\n    </div>\n\t\t\n\t\t<div class="btn_reset" >\n\t\t\t<img src="//img.91pintuan.com/songli/client2/recode_reset.png" onclick="{ rerecord }">\n\t\t\t<label class="hint">重录</label>\n\t\t</div>\n\t\t\n\t\t<div class="btn_bigpack" if="{ opts.bigpack && opts.bigpack.gift && opts.bigpack.gift.id }" onclick="{ parent.onSubmit.bind(parent) }">\n\t\t\t<button>下一步</button>\n\t\t</div>\n\t</div>\n</div> ';
}}]),t}(h.default.Tag),p.originName="order-record-voice",c=l))||c)||c);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(4),w=r(b),_=n(9),O=r(_),x=function(e,t){return e.isUserReceived},k=(u=(0,m.Connect)(function(e){return{isReceived:x(e.order,e.user)}},function(e){return{enterOrderState:function(t,n){return e(w.default.enterOrderState(t,n))}}}),c=(0,m.onUse)([O.default.isNotSender,"enterOrderState"]),(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-state"}},{key:"tmpl",get:function(){return'\n\t\t\t<order-received-guide if="{ opts.isReceived }"></order-received-guide>\n\t\t\t<order-pre-receive if="{ !opts.isReceived }"></order-pre-receive>\n\t\t'}}]),t}(y.default.Tag),f.originName="order-state",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(4),w=r(b),_=(u=(0,m.Connect)(function(e){return{clientWidth:e.clientWidth,order:e.order,qrcode:e.qrForSubscribe}},function(e){return{enterOrderSubscribe:function(t,n){return e(w.default.enterOrderSubscribe(t,n))}}}),c=(0,m.onUse)("enterOrderSubscribe"),(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"order-subscribe"}},{key:"tmpl",get:function(){return'<div class="subscribe">\n  <div class="subscribe_wrap">\n    <div class="subscribe_cont">\n      <div class="gift_info">\n        <div class="info">\n          <div class="title"> \n            <span><img riot-src="{ app.config.phtUri + opts.order.gift.info.cover }"></span>\n            <span style=" width: { (opts.clientWidth-24)*0.85 - 60 }px;" >{ opts.order.gift.info.name }</span>\n          </div>\n        </div>\n        <div class="step">\n          <img src="https://img.91pintuan.com/songli/client/receive-step-2.png" alt="" />\n        </div>\n      </div>\n      <div class="guidance">\n        <span>长按二维码关注公号</span>\n        <span>获取礼物领取凭证</span>\n      </div>\n      <div class="merchant_code" style="width: { opts.clientWidth / 2 + 40 }px; height: { opts.clientWidth / 2 + 40 }px;">\n        <!--商家二维码-->\n        <div class="code" style="width: { opts.clientWidth / 2 + 40 }px;">\n          <img if="{ opts.qrcode }" riot-src="{ \'https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=\' + opts.qrcode }"/>\n        </div>\n        <div class="radius">\n          <img src="https://img.91pintuan.com/songli/client/tops.png"/>\n          <img src="https://img.91pintuan.com/songli/client/right.png"/>\n          <img src="https://img.91pintuan.com/songli/client/bottom.png"/>\n          <img src="https://img.91pintuan.com/songli/client/left.png"/>\n        </div>\n      </div>\n      <div class="past"></div>\n    </div>\n  </div>\n  <icon-href theme="white"></icon-href>\n</div> '}}]),t}(y.default.Tag),f.originName="order-subscribe",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=this,o={};o.isUserReceived=function(){var e=n(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/order/"+t+"/is_user_received?openid="+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,r)}));return function(t,n){return e.apply(this,arguments)}}(),o.receivedCount=function(){var e=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/gift/order/"+t+"/received_count");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=r(g),b=n(3),w=n(100),_=(r(w),n(8)),O=r(_),x=n(9),k=r(x),j=n(10),S=(r(j),u=(0,b.Connect)(function(e){return{order:e.order,suborder:e.suborderInteracts.suborders[0],receivedNum:e.suborderCount.receivedCount,shippedNum:e.suborderCount.shippedCount,listenedNum:e.suborderCount.readCount,receivedTime:e.suborderLatestTime.receivedTime,shippedTime:e.suborderLatestTime.shippedTime,readTime:e.suborderLatestTime.readTime,clientWidth:e.clientWidth}},function(e){return{enterPersonalOrderInfo:function(t,n){return e(O.default.enterPersonalOrderInfo(t,n))}}}),c=(0,b.onUse)([k.default.isSender,"enterPersonalOrderInfo"]),(0,b.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},t.prototype.received=function(){this.opts.receivedNum&&(0,m.default)("/personal/order/"+this.opts.order.id+"/info/received")},t.prototype.listened=function(){this.opts.listenedNum>0&&(0,m.default)("/personal/order/"+this.opts.order.id+"/info/listened")},t.prototype.shipped=function(){this.opts.shippedNum>0&&(0,m.default)("/personal/order/"+this.opts.order.id+"/info/shipped")},t.prototype.jumpToAddressCard=function(){(0,m.default)("/order/"+this.opts.order.id+"/ready")},h(t,[{key:"name",get:function(){return"personal-order-info"}},{key:"tmpl",get:function(){return'<router-outlet>\n  <div class="order_detail">\n    <div class="order_wrap">\n      <div class="order_cont">\n        <div class="order_head">\n          <span>\n            <img riot-src="{ parent.opts.order.gift.info.cover ? app.config.phtUri + parent.opts.order.gift.info.cover : app.config.images.GIFTSHRAE_DEF_COVER }" >\n          </span>\n          <span style="width: { parent.opts.clientWidth - 95 }px">{ parent.opts.order.gift.info.name }</span>\n        </div>\n        <div class="order_main">\n          <ul>\n            <li>\n              <span>单价：</span>\n              <span>{ $.util.filter.currency(parent.opts.order.gift.info.price) }</span>\n            </li>\n            <li>\n              <span>数量：</span>\n              <span>{ parent.opts.order.capacity }份</span>\n            </li>\n            <li>\n              <span>总价：</span>\n              <span>{ $.util.filter.currency(parent.opts.order.gift.info.price * parent.opts.order.capacity) }</span>\n            </li>\n            <li>\n              <span>下单时间：</span>\n              <span>{ $.util.filter.date(parent.opts.order.time.add) }</span>\n            </li>\n            <li if="{ parent.opts.order.receivers[0].express.no }">\n              <span>快递单号：</span>\n              <span>{ parent.opts.order.receivers[0].express.no }</span>\n            </li>\n          </ul>\n        </div>\n        <!--送一人礼物领取状态-->\n        <div class="order_state" if="{ parent.opts.order.capacity == 1 }" >\n          <div class="title" if="{ parent.opts.suborder && ( parent.opts.suborder.status.read || parent.opts.suborder.status.shipping || parent.opts.suborder.telephone || parent.opts.order.time.pay) }">\n            <span>礼物状态 </span>\n          </div>\n          <ul>\n            <li if="{ parent.opts.suborder.status.read }" >\n              <span>{ $.util.filter.date(parent.opts.suborder.status.read_date) }</span>\n              <span>已收货</span>\n            </li>\n            <li if="{ parent.opts.suborder.status.shipping }">\n              <span>{ $.util.filter.date(parent.opts.suborder.status.shipping_date) }</span>\n              <span>已发货</span>\n            </li>\n            <li if="{ parent.opts.suborder && parent.opts.suborder.telephone }" >\n              <span>{ $.util.filter.date(parent.opts.suborder.fillinDate) }</span>\n              <span>已领取</span>\n            </li>\n            <li>\n              <span>{ parent.opts.suborder && parent.opts.order.time.pay ? $.util.filter.date(parent.opts.order.time.pay) + \'下单\' : \'\' }</span>\n              <a if="{ parent.opts.suborder && parent.opts.suborder.telephone }" ui-sref="order.detail.one2one-address({id: order.id})">\n                <em>礼物已被领取</em>\n                <em><img src="//img.91pintuan.com/songli/client/poi-right.png"/></em>\n              </a>\n              <a if="{ !parent.opts.suborder || !parent.opts.suborder.telephone }" ui-sref="order.detail.one2one-address({id: order.id})">\n                <em>1份礼物未被领取</em>\n                <em><img src="//img.91pintuan.com/songli/client/poi-right.png"/></em>\n              </a>\n            </li>\n          </ul>\n        </div>\n        <!--送多人礼物领取状态-->\n        <div class="order_state" if="{ parent.opts.order.capacity > 1 }" >\n          <div class="title" if="{ parent.opts.listenedNum || parent.opts.shippedNum || parent.opts.receivedNum || parent.opts.order.time.pay }">\n            <span>礼物状态 </span>\n          </div>\n          <ul>\n            <li class="receiver" if="{ parent.opts.listenedNum != 0 }">\n              <span>{ $.util.filter.date(parent.opts.readTime) }</span>\n              <span onclick="{ parent.listened.bind(parent) }">\n                <em>已收货 { parent.opts.listenedNum }</em>\n                <em><img src="//img.91pintuan.com/songli/client/poi-right.png"/></em>\n              </span>\n            </li>\n            <li if="{ parent.opts.shippedNum != 0 }">\n              <span>{ $.util.filter.date(parent.opts.shippedTime) }</span>\n              <span onclick="{ parent.shipped.bind(parent) }">\n                <em>已发货 { parent.opts.shippedNum }</em>\n                <em><img src="//img.91pintuan.com/songli/client/poi-right.png"/></span></em>\n              </span>\n            </li>\n            <li if="{ parent.opts.receivedNum != 0 }">\n              <span>{ $.util.filter.date(parent.opts.receivedTime) }</span>\n              <span onclick="{ parent.received.bind(parent) }">\n                <em>已领取 { parent.opts.receivedNum }</em>\n                <em><img src="//img.91pintuan.com/songli/client/poi-right.png"/></em>\n              </span>\n            </li>\n            <li>\n              <span>{ $.util.filter.date(parent.opts.order.time.pay) }</span>\n              <span onclick="{ parent.jumpToAddressCard.bind(parent) }">\n                <em>{ parent.opts.order.capacity - parent.opts.receivedNum === 0 ? \'礼物已被领完\' : parent.opts.order.capacity - parent.opts.receivedNum + \'份礼物未领取\' }</em>\n                <em><img src="//img.91pintuan.com/songli/client/poi-right.png"/></em>\n              </span>\n            </li>\n          </ul>\n        </div>\n        \n      </div>\n    </div>\n  </div>\n</router-outlet>\n '}}]),t}(y.default.Tag),f.originName="personal-order-info",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(8),w=r(b),_=(u=(0,m.Connect)(function(e){return{order:e.order,suborders:e.suborderInteracts.suborders,clientWidth:e.clientWidth}},function(e){return{enterPersonalOrderInfoListened:function(t,n){return e(w.default.enterPersonalOrderInfoListened(t,n))}}}),c=(0,m.onUse)("enterPersonalOrderInfoListened"),(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"personal-order-info-listened"}},{key:"tmpl",get:function(){return'\n      <div class="order_info" each="{ suborder in opts.suborders }">\n        <div class="suborder_img">\n          <img riot-src="{ suborder.headimgurl }">\n        </div>\n        <div class="suborder_info" style="width: { parent.opts.clientWidth -90 }px" >\n          <div class="name">\n            <span>{ suborder.consignee }</span>\n            <span>已收货</span>\n          </div>\n          <div class="time">\n            <span>{ $.util.filter.date(suborder.status.read_date) }</span>\n          </div>\n        </div>\n        <div class="express" >\n          <div if="{ suborder.scene === \'logistics\' }">\n            <span>快递单号</span>\n            <span>{ suborder.express.company.name } { suborder.express.no }</span>\n          </div>\n        </div>\n      </div>\n    '}}]),t}(y.default.Tag),f.originName="personal-order-info-listened",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(8),w=r(b),_=(u=(0,m.Connect)(function(e){return{order:e.order,suborders:e.suborderInteracts.suborders,clientWidth:e.clientWidth}},function(e){return{enterPersonalOrderInfoReceived:function(t,n){return e(w.default.enterPersonalOrderInfoReceived(t,n))}}}),c=(0,m.onUse)("enterPersonalOrderInfoReceived"),(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"personal-order-info-received"}},{key:"tmpl",get:function(){return'\n      <div class="order_received">\n        <div class="received_list">\n          <div class="received" each="{ suborder in opts.suborders }" >\n            <div class="suborder_img">\n              <img riot-src="{ suborder.headimgurl }" >\n            </div>\n            <div class="suborder_info" style="width: { parent.opts.clientWidth -120 }px">\n              <div class="name">\n                <span>{ suborder.consignee }</span>\n                <span>已领取</span>\n              </div>\n              <div class="time">\n                <span>{ $.util.filter.date(suborder.fillinDate) }</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    '}}]),t}(y.default.Tag),f.originName="personal-order-info-received",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(8),w=r(b),_=(u=(0,m.Connect)(function(e){return{order:e.order,suborders:e.suborderInteracts.suborders,clientWidth:e.clientWidth}},function(e){return{enterPersonalOrderInfoShipped:function(t,n){return e(w.default.enterPersonalOrderInfoShipped(t,n))}}}),c=(0,m.onUse)("enterPersonalOrderInfoShipped"),(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"personal-order-info-shipped"}},{key:"tmpl",get:function(){return'\n      <div class="order_info" each="{ suborder in opts.suborders }">\n        <div class="suborder_img">\n          <img riot-src="{ suborder.headimgurl }" >\n        </div>\n        <div class="suborder_info" style="width: { parent.opts.clientWidth -90 }px" >\n          <div class="name">\n            <span>{ suborder.consignee }</span>\n            <span>已发货</span>\n          </div>\n          <div class="time">\n            <span>{ $.util.filter.date(suborder.status.shipping_date) }</span>\n          </div>\n        </div>\n        <div class="express">\n          <div if="{ suborder.scene === \'logistics\' }">\n            <span>快递单号</span>\n            <span>{ suborder.express.company.name } { suborder.express.no }</span>\n          </div>\n        </div>\n      </div>\n    '}}]),t}(y.default.Tag),f.originName="personal-order-info-shipped",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,u,c,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),d=n(1),h=(r(d),n(3)),v=(0,h.View)((c=u=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},p(t,[{key:"name",get:function(){return"personal-order-list"}},{key:"tmpl",get:function(){return'\n\t\t\t<order-list force="true" personal="true"></order-list>\n\t\t'}}]),t}(f.default.Tag),u.originName="personal-order-list",s=c))||s;t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,c,p,l,f,d,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(2),y=r(v),g=n(1),m=(r(g),n(3)),b=n(8),w=r(b),_=(u=(0,m.Connect)(null,function(e){return{enterPersonal:function(t,n){return e(w.default.enterPersonal(t,n))}}}),c=(0,m.onUse)("enterPersonal"),(0,m.View)(p=u((d=f=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return a(t,e),t.prototype.onCreate=function(e){},h(t,[{key:"name",get:function(){return"personal"}},{key:"tmpl",get:function(){return"<router-outlet></router-outlet>"}}]),t}(y.default.Tag),f.originName="personal",l=d,s(l.prototype,"onCreate",[c],Object.getOwnPropertyDescriptor(l.prototype,"onCreate"),l.prototype),p=l))||p)||p);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.keys().map(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(139),a=r(i),s=("undefined"==typeof e||!e.exports,{}),u=n(45);s=o(u).concat([{default:a.default}]).reduce(function(e,t){for(var n in t.default)e[n]=t.default[n];return e},{}),t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),i=r(o),a=n(61),s=r(a),u=n(58),c=r(u),p=n(60),l=r(p),f=n(63),d=r(f),h=n(68),v=r(h),y=n(83),g=r(y),m=n(24),b=r(m),w=n(73),_=r(w),O=n(69),x=r(O),k=n(94),j=r(k),S=n(93),P=r(S),E=n(89),R=r(E),C=n(91),T=r(C),M=n(92),I=r(M),$=n(90),A=r($),N=n(75),F=r(N),L=n(86),D=r(L),U=n(25),z=r(U),q=n(87),W=r(q),V=n(81),B=r(V),H=n(23),G=r(H),J=n(72),Q=r(J),X=n(49),Z=r(X),K=n(50),Y=r(K),ee=n(53),te=r(ee),ne=n(51),re=r(ne),oe=n(52),ie=r(oe);t.default={component:i.default,path:"",children:[{path:"/",component:s.default,defaultRoute:!0},{path:"/wepay/",authenticate:!0,components:{OrderPay:_.default,OrderPlace:b.default}},{path:"/gift",component:c.default,abstract:!0,children:[{path:"/list",component:s.default},{path:"/:id",component:l.default,children:[{path:"/order",component:v.default,abstract:!0,children:[{path:"/state",component:D.default,authenticate:!0},{path:"/record",component:g.default,authenticate:!0},{path:"/place",component:b.default,authenticate:!0}]},{path:"/share",component:d.default}]}]},{path:"/order",component:v.default,abstract:!0,children:[{path:"/:id",component:x.default,authenticate:!0,children:[{path:"/ready",component:F.default},{path:"/state",component:D.default},{path:"/fillin",component:Q.default},{path:"/receive",component:z.default},{path:"/subscribe",component:W.default},{path:"/received",component:B.default},{path:"/detail",component:G.default}]}]},{path:"/personal",component:j.default,authenticate:!0,children:[{path:"/order",component:v.default,children:[{path:"/list",component:P.default},{path:"/:id",component:x.default,children:[{path:"/info",component:R.default,children:[{path:"/received",component:T.default},{path:"/shipped",component:I.default},{path:"/listened",component:A.default}]}]}]}]},{path:"/bigpack",component:Z.default,authenticate:!0,abstract:!0,children:[{path:"/:id",component:Y.default,children:[{path:"/subscribe",component:te.default},{path:"/record",component:re.default},{path:"/shoot",component:ie.default}]}]}]}},function(e,t){"use strict";!function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}()},function(e,t){"use strict";function n(e,t,n){var r={Accept:"application/json","Content-Type":"application/json"};return n&&n.headers&&Object.assign(r,n.headers),fetch(e,{method:"post",headers:r,mode:"cors",body:JSON.stringify(t)}).then(function(e){return a(e)}).then(function(e){return s(e)}).then(function(e){return u(e)})}function r(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments[2]),n={method:"get",headers:{},mode:"cors"};return t&&t.headers&&Object.assign(n.headers,t.headers),fetch(e,n).then(function(e){return a(e)}).then(function(e){return s(e)}).then(function(e){return u(e)})}function o(e,t,n){var r={Accept:"application/json","Content-Type":"application/json"};return n&&n.headers&&Object.assign(r,n.headers),fetch(e,{method:"put",headers:r,mode:"cors",body:JSON.stringify(t)}).then(function(e){return a(e)}).then(function(e){return s(e)}).then(function(e){return u(e)})}function i(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments[2]),n={method:"del",headers:{},mode:"cors"};return t&&t.headers&&Object.assign(n.headers,t.headers),fetch(e,n).then(function(e){return a(e)}).then(function(e){return s(e)}).then(function(e){return u(e)})}function a(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function s(e){var t=e.headers.get("Content-Type");if(/json/.test(t))return e.json();if(/text/.test(t))return e.text();var n=new Error("unknown data from remote");throw n.response=e,n}function u(e){if("object"===("undefined"==typeof e?"undefined":p(e))&&e.errmsg)throw new Error(e.errmsg);return e}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){
var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={get:r,post:n,put:o,del:i},f=function(e,t){var n=null;return this&&this.hasOwnProperty("path")?(n=this,e&&(n.path=e),t&&(n.props=t)):n={path:e,props:t,withProps:y,base:g},["get","post","put","del"].forEach(function(e){n[e]=function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=r[0],a=r[1],s=r[2],u=s||{};n.path&&(i=n.path+(i||"")),n.props&&Object.assign(u,n.props);var c=l[e].call(null,i,a,u||{});return c.catch(function(e){d&&d(e,c)}),c}}),n},d=null,h=function(e){d=e},v=function(e){a=e},y=function(e){return f.bind(this)(null,e)},g=function(e){return f.bind(this)(e)};t.default=c({setErrorInterceptor:h,addResponseInterceptor:v,base:g,withProps:y},l)},function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(98),a=r(i),s=n(117),u=t(s);!function(t,n){t="undefined"!=typeof window?window:e;var r=t.jQuery;if(r)return r;var i=function e(t){if(t){var n={append:function(e){var t=this,n=document.createElement("div");for(n.innerHTML=e;n.children.length>0;)t.appendChild(n.children[0]);return this},css:function(e){if("string"==typeof e)return this.style[e];for(var t in e)this.style[t]=e[t];return this},find:function(t){var n=document.querySelectorAll(t);return n=[].slice.apply(n),e(1===n.length?n[0]:n)},parent:function(){return e(this.parentNode)},next:function(){return e(this.nextSbiling)},remove:function(){this.parentNode&&this.parentNode.removeChild(this)},addClass:function(e){return this.hasClass(e)||(this.className+=" "+e),this},removeClass:function(e){if(this.hasClass(e)){var t=new RegExp("(\\s|^)"+e+"(\\s|$)");this.className=this.className.replace(t," ")}return this},hasClass:function(e){return this.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},outerWidth:function(){return this.css&&(this.css("marginLeft")||this.css("marginRight"))?this.offsetWidth+parseInt(this.css("marginLeft")||0,10)+parseInt(this.css("marginRight")||0,10):this.offsetWidth},height:function(){return this.offsetHeight}};return Array.isArray(t)?(t.each=t.forEach,t.map(function(e){return u.default.mixin(e,n)})):u.default.mixin(t,n)}},s=function(e){if("object"===("undefined"==typeof e?"undefined":o(e)))return i(e);var t=document.querySelectorAll(e);return t=[].slice.apply(t),i(1===t.length?t[0]:t)};s=u.default.mixin.apply(u.default,[s].concat(a.default)),s.ajax={},s.ajax.base=a.default.base,s.ajax.withProps=a.default.withProps,s.util=u.default,t.$=s}()}).call(t,function(){return this}())},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return new a(e)},a=function(){function e(t){return n(this,e),t?void(this._d=new Date(t)):void(this._d=new Date)}return e.prototype.isBefore=function(e){return this._d.getTime()<this.getDate(e)},e.prototype.isAfter=function(e){return this._d.getTime()>this.getDate(e)},e.prototype.fromNow=function(){return this._d.getTime()-this.getDate()},e.prototype.getDate=function(e){return e="string"==typeof e?new Date(e).getTime():"object"===("undefined"==typeof e?"undefined":r(e))?e.getTime():(new Date).getTime()},o(e,[{key:"data",get:function(){return this._d},set:function(e){this._d=e}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.provider=t.connect=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),c=r(u),p=n(115),l=n(14),f=r(l),d=n(33),h=r(d),v=n(31),y=n(104),g=r(y),m=n(7),b=r(m),w=function(){function e(t){var n=t.container,r=t.reducer,o=t.middlewares,s=t.state,u=void 0===s?{}:s;if(i(this,e),!n)throw new Error("a container expected.");this.framework=c.default,this.container=n;var l=a({},r,g.default);this.reducer=l,this.middlewares=o,this.buildInProps=["env","entry","context","mode","routes"],this._mode="hash",this._store=(0,p.configureStore)(u,this.reducer,o,this._mode),this.router(h.default),this._context={store:this._store,hub:h.default.hub,tags:{}},c.default.util.tmpl.errorHandler=function(e){},this.emitter=c.default.observable({}),n.widgets=this._widgets={}}return e.prototype.set=function(e,t){switch(this.accseptSet(e)){case"mode":this["_"+e]=t;var n={};this.store&&(n=this.store.getState()),this._store=(0,p.configureStore)(n,this.reducer,this.middlewares,this._mode),this._router&&(f.default.syncHistoryWithStore(this._router.hub,this._store),this.mixin("router",this._router));break;case"context":b.default.mixin(this._context,t);break;case"routes":if(!this._router||!this._router.hub)throw new Error("ninjia compose routes expected a router hub.");this._router.hub.routes=t,this.router(this._router);break;case"entry":this["_"+e]=t,this.hub.root=t,(0,v.provider)(this.store)(t);break;default:this["_"+e]=t}},e.prototype.accseptSet=function(e){return this.buildInProps.indexOf(e)>=0?e:null},e.prototype.router=function(e){return this._router=e,e.app=this,f.default.syncHistoryWithStore(this._router.hub,this._store),this},e.prototype.registerWidget=function(e){var t=this,n=e.name,r=e.methods,o=c.default.mount(n),i=o[0];this._context.tags[n]=i;var a=n.replace(/(\w)/,function(e){return e.toUpperCase()});this._widgets[a]={},r.forEach(function(e){t._widgets[a][e]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];i[e].apply(i,n)}})},e.prototype.start=function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(this.entry){e.next=4;break}throw new Error("application expected a entry component");case 4:this._router.hub.startup();case 5:case"end":return e.stop()}},e,this)}));return e}(),e.prototype.mixin=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.framework.mixin.apply(this.framework,t)},e.prototype.on=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.emitter.on.apply(this.emitter,t)},e.prototype.one=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.emitter.one.apply(this.emitter,t)},e.prototype.off=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.emitter.off.apply(this.emitter,t)},e.prototype.trigger=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.emitter.trigger.apply(this.emitter,t)},s(e,[{key:"container",get:function(){return this._container},set:function(e){this._container=e}},{key:"hub",get:function(){return this._router.hub}},{key:"context",get:function(){return this._context}},{key:"store",get:function(){return this._store},set:function(e){this._store=e}},{key:"mode",get:function(){return this._mode}},{key:"util",get:function(){return b.default}},{key:"entry",get:function(){return this._entry}},{key:"env",get:function(){return this._env}}]),e}(),_=function(e){return new w(e)};t.default=_,t.connect=v.connect,t.provider=v.provider},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return function(t){return function(n){function r(){return o(this,r),i(this,n.apply(this,arguments))}return a(r,n),r.prototype.onCreate=function(t){n.prototype.onCreate.call(this,t),this.options=e,this.on("updated",this.onUpdated),this.mapDispatchToOpts()},r.prototype.resetForm=function(){var e=this,t=[];this.extractFormNamesFromRef().forEach(function(n){e.delForm(n),t.push({form:n})});var n=this.getStore();n.dispatch({type:"forms/remove",payload:t})},r.prototype.resetInputs=function(e){var t=this;e.forEach(function(e){return t.resetInput(e)})},r.prototype.setRef=function(e){function t(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}else{var n=document.createEventObject();n.eventType=t,e.fireEvent("on"+n.eventType,n)}}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e){var r=new Error("set ref method expecta input name");throw r}this.refs[e].value=n,t(this.refs[e],"change")},r.prototype.resetInput=function(e){if(!e){var t=new Error("[redux-form]: reset input expect a inputName");throw t}if(this.refs[e]&&this.refs[e].form&&this.refs[e].form.getAttribute("ref")){var n=this.refs[e].form.getAttribute("ref");this.delInput(e,n)}},r.prototype.mapDispatchToOpts=function(){var e=this,t=this.getStore();this.opts.submit=function(n){e.refs[n]||console.warn("failed to submit the form, can not find the form [name]"+n);var r=e.extractFormNamesFromRef().map(function(t){return e.refs[t]});r.forEach(function(r){var o=e.extractInputsFromForm(r).map(function(t){return e.refs[t]});o.forEach(function(t){e.validate(t,t.value)}),o&&o.length||t.dispatch({type:"form/valid",payload:n})}),t.dispatch({type:"form/submit",payload:n})},this.opts.unsubmit=function(n){e.refs[n]||console.warn("failed to unsubmit the form, can not find the form [name]"+n),t.dispatch({type:"form/unsubmit",payload:n})}},r.prototype.unMapDispatchToOpts=function(){delete this.opts.forms,delete this.opts.submit},r.prototype.onUpdated=function(){this.getStore();if(this.refs){var e=this.extractFormNamesFromRef();e&&e.length&&(this.refDiff(this.extractFormsFromRef()),this.rebindInputs())}},r.prototype.rebindInputs=function(){for(var e in this.refs){var t=this.findHandlerInFormHandlersByInputName(e),n=this.refs[e];t&&t.input!=n&&(t.input=n,n.addEventListener("change",t.bind(this)))}},r.prototype.findHandlerInFormHandlersByInputName=function(e){if(this.$form&&this.$form.handlers)for(var t=this.$form.handlers,n=Array.isArray(t),r=0,t=n?t:t[Symbol.iterator]();;){var o;if(n){if(r>=t.length)break;o=t[r++]}else{if(r=t.next(),r.done)break;o=r.value}var i=o;if(i.input.getAttribute("ref")===e)return i}},r.prototype.extractFormNamesFromRef=function(){var e=this;return Object.keys(this.refs).filter(function(t){return"FORM"===e.refs[t].nodeName})},r.prototype.extractFormsFromRef=function(){var e=this;return this.extractFormNamesFromRef().map(function(t){return e.refs[t]})},r.prototype.extractInputsNames=function(){var e=this;return Object.keys(this.refs).filter(function(t){return"INPUT"===e.refs[t].nodeName})},r.prototype.extractInputsFromRefs=function(){var e=this;return Object.keys(this.refs).filter(function(t){return"INPUT"===e.refs[t].nodeName}).map(function(t){return e.refs[t]})},r.prototype.extractInputsFromForm=function(e){var t=this;return Object.keys(this.refs).filter(function(n){return t.refs[n].form===e})},r.prototype.getStore=function(){return(0,c.getProvider)(this).opts.store},r.prototype.getInputs=function(e){var t=this;return Object.keys(this.refs).filter(function(n){return t.refs[n].form===e}).map(function(e){return t.refs[e]})},r.prototype.refDiff=function(e){var t=this,n=this.getStore(),r=n.getState().forms,o=this.distinctForm(e,r,function(e){return e.attributes.ref.value}),i=o.adds,a=o.dels,s=this.extractFormNamesFromRef().filter(function(e){return i.indexOf(e)<0&&a.indexOf()<0});if(i&&i.length&&!function(){var e=[];i.forEach(function(r){t.addForm(n,r);var o=t.getInputs(t.refs[r]),i=o.map(function(e){return t.addInput(n,e,r)});e.push({form:r,inputs:i})}),e.length&&n.dispatch({type:"forms/inputs/add",payload:e})}(),a&&a.length&&!function(){var e=[];a.forEach(function(r){t.delForm(n,r),e.push({form:r})}),n.dispatch({type:"forms/remove",payload:e})}(),s&&s.length){var u=this.resolveInputsInFormLoop(s),c=u.adds,p=u.dels;c&&c.length&&!function(){var e=[];c.forEach(function(r){var o=r.formName,i=r.inputs;if(i&&i.length){var a=i.map(function(e){return t.addInput(n,t.refs[e],o)});e.push({form:o,inputs:a})}}),e.length&&n.dispatch({type:"forms/inputs/add",payload:e})}(),p&&p.length&&!function(){var e=[];p.forEach(function(n,r){r&&r.length&&(r.forEach(function(e){t.refs[e].forEach(function(e){return t.delInput(e)})}),e.push({form:n,inputs:r}))}),e.length&&n.dispatch({type:"forms/inputs/remove",payload:e})}()}},r.prototype.distinctForm=function(e,t,n){for(var r=this,o=Object.keys(t).filter(function(e){return t[e].$meta._riot_id===r._riot_id}).map(function(e){return t[e]}),i=o.map(function(e){return e.$name}),a=[],s=[],u=0,c=e.length;u<c;u++){var p=e[u],l=i.indexOf(n(p));l>=0?i.splice(l,1):a.push(n(p))}return i.length&&(s=i),{adds:a,dels:s}},r.prototype.distinctInput=function(e,t,n){for(var r=[],o=[],i=f.default.clone(t),a=0,s=e.length;a<s;a++){var u=e[a],c=this.refs[u],p=i.indexOf(n(c));p>=0?i.splice(p,1):r.push(n(c))}return i.length&&(o=i),{adds:r,dels:o}},r.prototype.bindInputChange=function(e){var t=this;this.$form||(this.$form={handlers:[]});var n=function(n){var r=n.target.value;t.validate(e,r)};n.input=e,this.$form.handlers.push(n),e.addEventListener("change",n.bind(this))},r.prototype.unbindInputChange=function(e){if(this.$form.handlers.length){var t=this.$form.handlers.filter(function(t){return t.input===e});this.$form.handlers=this.$form.handlers.filter(function(t){return t.input!=e}),t.length&&t.forEach(function(t,n){e.removeEventListener("change",t)})}},r.prototype.validate=function(e,t){var n=this,r=this.getStore(),o=e.form.getAttribute("ref"),i=r.getState().forms[o],a=i[e.getAttribute("ref")],s=a.$rule,u=[];Object.keys(s).map(function(r){var o=(s[r],p.validators[r]),i=o(t,s[r]),c=null;c=i?n.inputInvalid(e,a,r,t):n.inputValid(e,a,r,t),c.$val=t,n.resolveClass(a,e),u.push(c)}),r.dispatch({type:"forms/inputs/update",payload:{form:o,inputs:u}})},r.prototype.resolveInputsInFormLoop=function(e){for(var t=this,n=this.getStore(),r=n.getState().forms,o=[],i=[],a=function(){if(u){if(c>=s.length)return"break";p=s[c++]}else{if(c=s.next(),c.done)return"break";p=c.value}var e=p,n=f.default.extractField(r[e]),a=Object.keys(n).map(function(e){return n[e].$name}),l=t.distinctInput(t.extractInputsFromForm(t.refs[e]),a,function(e){return e.attributes.ref.value}),d=l.adds,h=l.dels;o=o.concat({formName:e,inputs:d}),i=i.concat({formName:e,inputs:h})},s=e,u=Array.isArray(s),c=0,s=u?s:s[Symbol.iterator]();;){var p,l=a();if("break"===l)break}return{adds:o,dels:i}},r.prototype.inputValid=function(e,t,n,r){return t.$valid=!0,t.$invalid=!1,t.$error[n]&&delete t.$error[n],r!=t.$originVal?t.$dirty=!0:t.$dirty=!1,t.$pristine=!t.$dirty,t},r.prototype.inputInvalid=function(e,t,n,r){return t.$valid=!1,t.$invalid=!0,t.$error[n]=!0,r!=t.$originVal?t.$dirty=!0:t.$dirty=!1,t.$pristine=!t.$dirty,t},r.prototype.resolveClass=function(e,t){Object.keys(e.$error).length>0?(f.default.removeClass(t,"f-valid"),f.default.addClass(t,"f-invalid")):(f.default.removeClass(t,"f-invalid"),f.default.addClass(t,"f-valid")),e.$dirty&&(f.default.addClass(t,"f-dirty"),f.default.removeClass(t,"f-pristine")),e.$pristine&&(f.default.addClass(t,"f-pristine"),f.default.removeClass(t,"f-dirty"))},r.prototype.addInput=function(e,t,n){var r=this,o=this.getInputName(t),i=this.options[o],a=Object.keys(i).map(function(e){return{name:e,value:i[e]}}),s=this.getInputInstance(t,n);return a.map(function(e){return r.addInputRule(s,e)}),this.bindInputChange(t),s},r.prototype.addInputRule=function(e,t){return e.$rule[t.name]=t.value,e},r.prototype.getInputName=function(e){return e.attributes.ref.value},r.prototype.getInputInstance=function(e,t){var n=null,r=this.getInputName(e),o=this.getStore().getState(),i=o.forms[t];return n=i[r],n||(n={$name:r,$dirty:!1,$pristine:!0,$valid:!0,$invalid:!1,$error:{},$rule:{},$originVal:e.value}),n},r.prototype.delInput=function(e,t){var n=[],r=this.getStore(),o=this.refs[e];o.value="",this.unbindInputChange(o),n.push({form:t,inputs:[e]}),r.dispatch({type:"forms/inputs/remove",payload:n})},r.prototype.addForm=function(e,t){var n={$meta:{_riot_id:this._riot_id},$name:t,$dirty:!1,$pristine:!0,$valid:!1,$invalid:!0,$submitted:!1,$error:{}};e.dispatch({type:"form/add",payload:n})},r.prototype.delForm=function(e){var t=this;this.extractInputsFromForm(this.refs[e]).map(function(e){return t.refs[e]}).forEach(function(e){e.value="",t.unbindInputChange(e)})},r.prototype.trySubscribe=function(){var e=this;n.prototype.trySubscribe.call(this);var t=this.getStore();this.subscribe=t.subscribe(function(){var n=t.getState(),r=n.lastAction;("forms/add"===r.type||"forms/inputs/add"===r.type||"forms/inputs/update"===r.type&&e.extractFormNamesFromRef().indexOf(r.payload.form)>=0||"form/submit"===r.type&&e.extractFormNamesFromRef().indexOf(r.payload)>=0||e.concernActions(r.type,r.payload))&&e.isMounted&&(e.opts.forms=n.forms,e.update())})},r.prototype.concernActions=function(e,t){var n=this.extractFormNamesFromRef();if("forms/remove"===e&&n&&n.length){var r=f.default.intersect(n,t.map(function(e){return e.form}));return r.length>0}if("forms/inputs/remove"===e){var o=t.map(function(e){return e.inputs}).reduce(function(e,t){return e.concat(t)},[]);if(o)return f.default.intersect(o,Object.keys(this.refs)).length>0}return!1},r.prototype.unSubscribe=function(){return n.prototype.unSubscribe.call(this),!!this.subscribe&&(this.subscribe(),!0)},u(r,[{key:"name",get:function(){return"form-"+(n.prototype.name||t.name)}}]),r}(t)}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=s;var c=n(11),p=n(30),l=n(7),f=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerValidators=void 0;var o=n(102),i=r(o),a=n(30);t.default=i.default,t.registerValidators=a.registerValidators},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(7),s=r(a),u={},c=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1],n=null,r=function(){var r,o,a,u,c,p,l,f;switch(t.type){case"form/input":var d=t.payload,h=d.form,v=d.input;return n=h.$name,e[n][v.name]=v.value,{v:Object.assign({},e,(r={},r[h.$name]=h,r))};case"form/add":return h=t.payload,{v:Object.assign({},e,(o={},o[h.$name]=h,o))};case"form/update":return h=t.payload,{v:Object.assign({},e,(a={},a[h.$name]=h,a))};case"form/reset":return h=t.payload,delete e[h.$name],{v:e};case"forms/inputs/add":var y=t.payload,g=y.reduce(function(t,n){var r,o=e[n.form],i=n.inputs;return i.forEach(function(e){o[e.$name]=e}),r={},r[n.form]=o,r},{});return{v:Object.assign({},e,i({},g))};case"forms/remove":return{v:Object.assign({},s.default.omit(e,t.payload.map(function(e){return e.form})))};case"forms/inputs/remove":var m=t.payload,b=m.map(function(t){return Object.keys(e).filter(function(e){return e===t.form}).map(function(n){return{inputs:t.inputs,form:e[n]}})[0]}).reduce(function(e,t){var n=t.form.$name,r=s.default.omit(t.form,t.inputs);return e[n]=r,e},{});return{v:Object.assign({},e,b)};case"forms/inputs/update":var w=t.payload,_=w.inputs.map(function(e){return{name:e.$name,val:e}}).reduce(function(e,t){return e[t.name]=t.val,e},{}),O=_[Object.keys(_)[0]].$dirty,x=Object.assign.apply(Object,[{}].concat(e[w.form],[i({$dirty:O,$pristine:!O},_)])),k=function(){var e=s.default.extractField(x);return Object.keys(e).filter(function(t){var n=e[t].$error;return Object.keys(n).length>0}).length>0},j=Object.keys(_);j&&j.length<=0?(x.$invalid=!1,x.$valid=!0):k()?(x.$invalid=!0,x.$valid=!1):(x.$invalid=!1,x.$valid=!0);var S=Object.assign({},(u={},u[w.form]={},u),(c={},c[w.form]=i({},x),c));return{v:Object.assign({},e,S)};case"form/submit":return n=t.payload,{v:Object.assign({},e,(p={},p[n]=i({},e[n],{$submitted:!0}),p))};case"form/valid":return n=t.payload,{v:Object.assign({},e,(l={},l[n]=i({},e[n],{$invalid:!1,$valid:!0}),l))};case"form/unsubmit":return n=t.payload,{v:Object.assign({},e,(f={},f[n]=i({},e[n],{$submitted:!1}),f))};default:return{v:e}}}();if("object"===("undefined"==typeof r?"undefined":o(r)))return r.v};t.default={forms:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){try{return e.apply(t)}catch(e){return S.value=e,S}}function u(e){return function(t){return(0,f.bindActionCreators)(e,t)}}function c(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{pure:!0,withRef:!1},c=Boolean(e),f=e||O,d=r.pure,h=(r.withRef,null);h="function"==typeof t?t:t?u(t):x;var y=n||k,g=d&&y!==k,w=P++;return function(e){function t(e,t,n){var r=y(e,t,n);return r}var n="Connect("+j(e)+")",r=function(r){function u(){return o(this,u),i(this,r.apply(this,arguments))}return a(u,r),u.prototype.onCreate=function(e){this.version=w,this.store=e.store||(0,b.getProvider)(this).opts.store,this.displayName=n;var t=this.store.getState();(0,v.default)(this.store,'Could not find "store" in either the context or '+('opts of "'+n+'". ')+"Either wrap the root component in a Provider, "+('or explicitly pass "store" as a opt to "'+n+'".')),this.state={storeState:t},this.clearCache(),this.on("mount",this.componentDidMount),this.on("before-unmount",this.componentWillUnmount),this.on("update",this.render),r.prototype.onCreate.call(this,e)},u.prototype.updateStateOptsIfNeeded=function(){var e=this.computeStateOpts(this.store,this.opts);return(!this.stateOpts||!(0,m.default)(e,this.stateOpts))&&(this.stateOpts=e,!0)},u.prototype.updateDispatchOptsIfNeeded=function(){var e=this.computeDispatchOpts(this.store,this.opts);return(!this.dispatchOpts||!(0,m.default)(e,this.dispatchOpts))&&(this.dispatchOpts=e,!0)},u.prototype.updateMergedOptsIfNeeded=function(){var e=t(this.stateOpts,this.dispatchOpts,this.opts);return!(this.mergedOpts&&g&&(0,m.default)(e,this.mergedOpts))&&(this.mergedOpts=e,!0)},u.prototype.configureFinalMapState=function(e,t){var n=f(e.getState(),t),r="function"==typeof n;return this.finalMapStateToOpts=r?n:f,this.doStateOptsDependOnOwnOpts=1!==this.finalMapStateToOpts.length,r?this.computeStateOpts(e,t):n},u.prototype.handleChange=function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!d||t!==e){if(d&&!this.doStateOptsDependOnOwnOpts){var n=s(this.updateStateOptsIfNeeded,this);if(!n)return;n===S&&(this.stateOptsPrecalculationError=S.value),this.haveStateOptsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.update({state:e})}}},u.prototype.componentDidMount=function(){this.render(),this.trySubscribe()},u.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},u.prototype.trySubscribe=function(){c&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},u.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},u.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},u.prototype.clearCache=function(){this.dispatchOpts=null,this.stateOpts=null,this.mergedOpts=null,this.haveOwnOptsChanged=!0,this.hasStoreStateChanged=!0,this.haveStateOptsBeenPrecalculated=!1,this.stateOptsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToOpts=null,this.finalMapStateToOpts=null},u.prototype.componentWillReceiveOpts=function(e){d&&(0,m.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},u.prototype.computeStateOpts=function(e,t){if(!this.finalMapStateToOpts)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStateOptsDependOnOwnOpts?this.finalMapStateToOpts(n,t):this.finalMapStateToOpts(n);return r},u.prototype.computeDispatchOpts=function(e,t){if(!this.finalMapDispatchToOpts)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,r=this.doDispatchOptsDependOnOwnProps?this.finalMapDispatchToOpts(n,t):this.finalMapDispatchToOpts(n);return r},u.prototype.configureFinalMapDispatch=function(e,t){var n=h(e.dispatch,t),r="function"==typeof n;return this.finalMapDispatchToOpts=r?n:h,this.doDispatchOptsDependOnOwnOpts=1!==this.finalMapDispatchToOpts.length,r?this.computeDispatchOpts(e,t):n},u.prototype.render=function(){var e=this,t=this.haveOwnOptsChanged,n=this.hasStoreStateChanged,r=this.haveStateOptsBeenPrecalculated,o=this.stateOptsPrecalculationError,i=this.renderedElement;if(this.haveOwnOptsChanged=!1,this.hasStoreStateChanged=!1,this.haveStateOptsBeenPrecalculated=!1,this.stateOptsPrecalculationError=null,o)throw o;var a=!0,s=!0;d&&i&&(a=n||t&&this.doStateOptsDependOnOwnOpts,s=t&&this.doDispatchOptsDependOnOwnOpts);var u=!1,c=!1;r?u=!0:a&&(u=this.updateStateOptsIfNeeded()),s&&(c=this.updateDispatchOptsIfNeeded());var p=!0;p=!!(u||c||t)&&this.updateMergedOptsIfNeeded(),!p&&i||(this.renderedElement=!0,Object.assign(this.opts,l({},this.mergedOpts)),setTimeout(function(){e.update()},0))},p(u,[{key:"name",get:function(){return"connect-"+r.prototype.name||e.name}}]),u}(e);return r.displayName=n,r.WrappedComponent=e,r}}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=c;var f=n(12),d=n(108),h=(r(d),n(32)),v=r(h),y=n(106),g=(r(y),n(107)),m=r(g),b=n(11),w=n(7),_=r(w),O=function(e){return{}},x=function(e){return{dispatch:e}},k=function(e,t,n){return l({},n,e,t)},j=function(e){return e.displayName||_.default.lineToCamel(e.originName)||"Component"},S={value:null},P=0},function(e,t){"use strict";function n(e){return"object"===("undefined"==typeof e?"undefined":r(e))&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=n},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,i=0;i<n.length;i++)if(!o.call(t,n[i])||e[n[i]]!==t[n[i]])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){var r={displayName:!0,mixins:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;if("string"!=typeof t){var a=Object.getOwnPropertyNames(t);i&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!(r[a[s]]||o[a[s]]||n&&n[a[s]]))try{e[a[s]]=t[a[s]]}catch(e){console.warn("hoistStatics failed.")}}return e}function u(e){var t="View("+h(e)+")",n=function(e){function n(){return o(this,n),i(this,e.apply(this,arguments))}return a(n,e),n.prototype.onCreate=function(n){this.displayName=t;var r=(0,p.getProvider)(this);r.opts.store.getState();e.prototype.onCreate.call(this,n),this.opts.force&&Object.defineProperties(this.opts,{$show:{get:function(){return!0}}}),this.onInit()},n.prototype.enter=function(e,t){this.trigger("enter",e),this.opts.show=!0,this.opts.hidden=!1},n.prototype.getStore=function(){var e=(0,p.getProvider)(this);return e.opts.store},n.prototype.onInit=function(){var e=this.getStore();e.getState();e.subscribe(this.onSubscribe.bind(this))},n.prototype.onSubscribe=function(e){var t=this.getStore().getState(),r=t.lastAction;n.concerns.some(function(e){return r.type===e})&&r.payload===this&&this.renderForView(t)},n.prototype.renderForView=function(e){this.opts.$show=d(e.route.$views,this)||!1,this.update()},c(n,[{key:"name",get:function(){return f.default.camelToLine(e.prototype.name)}},{key:"tmpl",get:function(){return'\n\t\t\t\t\t<div if="{opts.$show}">'+e.prototype.tmpl+"</div>\n\t\t\t\t"}}]),
n}(e);return n.concerns=["$enter","$leave"],n.displayName=t,n.WrappedComponent=e,s(n,e),n}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=u;var p=n(11),l=n(7),f=r(l),d=function(e,t){return!!t.$routePath&&e[t.$routePath]},h=function(e){return e.displayName||f.default.lineToCamel(e.originName)||"Component"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r={$prev_state:"/",$prev_location:"/",$state:"/",$location:"/",$protocol:"http://",$host:"undefined"!=typeof window&&location&&location.host||"",data:{},stack:[],$views:{}},o=function e(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,o=arguments[1];switch(o.type){case"$enter":var i=o.payload.$routePath,a=(t={},t[i]=!0,t);return Object.assign({},e,{$views:n({},e.$views,a)});case"$leave":var i=o.payload.$routePath;return Object.assign({},e,{$views:Object.keys(e.$views).filter(function(e){return e!=i}).reduce(function(e,t){return e[t]=!0,e},{})});case"$route":return Object.assign({},e,{$prev_state:e.$state,$prev_location:e.$location,$state:o.payload.route.$state,$location:o.payload.route.$location,$protocol:o.payload.route.$protocol||e.$protocol,$host:e.$host,data:o.payload.route.ctx});case"$query":return Object.assign({},e,{$prev_state:e.$state,$prev_location:e.$location,$state:e.$state,$location:e.$location,$protocol:e.$protocol,$host:e.$host,data:Object.assign({},{request:{body:e.data.req.body,params:e.data.req.params,query:o.payload}})});case"$routeBusy":return Object.assign({},e,{busy:!0});case"$routeUnBusy":return Object.assign({},e,{busy:!1});default:return e}};t.default={route:o}},function(e,t){"use strict";function n(e){return function(t,n,r){var o=r.value;return r.$originOnCreate||(r.$originOnCreate=o),r.value=function(t){var n=this;r.$originOnCreate&&!r.$originOnCreateInvocated&&(r.$originOnCreate.apply(this,[t]),r.$originOnCreateInvocated=!0),this.$mws&&this.$mws.length||this.mixin("router"),this.one("leave",function(){r.$originOnCreateInvocated=!1}),this.one("unmount",function(){r.$originOnCreateInvocated=!1}),Array.isArray(e)||(e=[e]),e.forEach(function(t){n.$use(function(r,o){return"string"==typeof t&&(t=n.opts[t],e||invariant("[onUse]: Error not such a "+e+" in opts")),t.apply(n,[r,o,n])})})},r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={onUse:n}},function(e,t){"use strict";function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"warn";return t||(t=e,e=void 0),"undefined"!=typeof e?void(e||console.error(t)):void console[n](t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(o=r=function(){function e(){n(this,e)}return e.distinct=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];t.indexOf(o)<0&&t.push(o)}return t},e.genId=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",r=0;r<e;r++){var o=Math.ceil(35*Math.random());n+=t[o]}return n},e.completePart=function(e){return e.startsWith("/")?e:"/"+e},e.assert=function(e,t){if(!e)throw new Error(t)},e.omit=function(e){for(var t={},n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i in e)r.indexOf(i)<0&&(t[i]=e[i]);return t},e.compareUrl=function(e,t){for(var n=[],r=e.split("/"),o=t.split("/"),i=0,a=r.length;i<a&&r[i]===o[i];i++)n.push(r[i]);return n.join("/")},e.isEqual=function(e,t){var n=Object.keys(e).length,r=0;if(n!=Object.keys(t).length)return!1;for(var o in e)e[o]===t[o]&&r++;return r===n},e.combineUriParts=function(t,n,r){if(!t.length||n<=0)return r;var o=t[n-1]+"/"+r;return e.combineUriParts(t,--n,o)},e.composeObject=function(e,t){var n={};return Array.isArray(e)&&Array.isArray(t)&&e.length==t.length?(e.forEach(function(e,r){n[e]=t[r]}),n):n},e.getParams=function(e){if("function"!=typeof e)throw new Error("Failed to get Param on "+("undefined"==typeof e?"undefined":i(e)));var t=e.toString().match(/\(.*\)/).toString();if(t.length<=2)return null;var n=t.substr(1,t.length-2).split(",");return n.map(function(e){return e.trim()})},e.extractParams=function(e){return e.match(/_[a-zA-Z0-9:]+/g)},e.toPattern=function(e){return e.replace(/_[a-zA-Z0-9:]+/g,"*")},e.nextTick=function(e){return setTimeout(e,0)},e}(),r.flatAndComposePrefix=function(e,t){var n=e.children;if(n)for(var r=0,o=n.length;r<o;r++){var i=n[r];i.path=(e.path||"")+i.path,i.parent=e.id||"",i.id=a.genId(8),t.push(i),a.flatAndComposePrefix(i,t)}},o);t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t={},n=["tmpl","css","attrs"];for(var r in e)n.indexOf(e[r])<0&&(t[r]=e[r]);return t}function i(e){if(!e.originName)throw new Error("register decorator expected a origin name.");if(!e.prototype.tmpl)throw new Error("register decorator expected a template.");return s.default.tag(e.originName,e.prototype.tmpl,e.prototype.css||"",e.prototype.attrs||"",function(t){this.mixin(o(e.prototype)),this.onCreate.apply(this,[t])}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(2),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(7),a=r(i),s=n(12),u=n(14),c=r(u);t.configureStore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"browser",i=(0,s.combineReducers)(o({},t)),u=c.default.routerMiddlewareCreator(r);return(0,s.compose)(s.applyMiddleware.apply(void 0,[u].concat(a.default.values(n))))(s.createStore)(i,e)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=this,r=function(e){return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=n;return new Promise(function(t,n){var o=function(e){return t(e)};e.apply(i,[].concat(r,[o]))})}},o=function(e){for(var t={},n=0,o=Object.keys(e).length;n<o;n++){var i=Object.keys(e)[n];"function"==typeof e[i]&&(t[i+"Async"]=r(e[i]))}return t};t.promisify=r,t.promisifyAll=o,t.default={promisify:r,promisifyAll:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return Object.keys(e).map(function(t){return e[t]})},i=function(){return Object.assign.apply(Object,arguments)},a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).filter(function(e){return n.indexOf(e)>=0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},s=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).filter(function(e){return n.indexOf(e)<0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},u=function e(t){if(!t)return t;var n,o=[Number,String,Boolean];if(o.forEach(function(e){t instanceof e&&(n=e(t))}),"undefined"==typeof n)if("[object Array]"===Object.prototype.toString.call(t))n=[],t.forEach(function(t,r,o){n[r]=e(t)});else if("object"==("undefined"==typeof t?"undefined":r(t)))if(t.nodeType&&"function"==typeof t.cloneNode)var n=t.cloneNode(!0);else if(t.prototype)n=t;else if(t instanceof Date)n=new Date(t);else{n={};for(var i in t)n[i]=e(t[i])}else n=t;return n},c={stringify:function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},parse:function(e){return e.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})}},p=function(e,t){clearTimeout(e.timer),e.timer=setTimeout(function(){e.apply(null),e.timer=null},t)},l={ago:function(e){"string"==typeof e&&(e=new Date(e));var t=parseFloat(e.getTime()-(new Date).getTime(),10),n=t<0,r=Math.abs(t),o=Math.ceil(r/6e4);if(o<60)return n?o+"分钟前":o+"分钟内";var i=Math.ceil(r/36e5);if(i<24)return n?i+"小时前":i+"小时内";var a=Math.ceil(r/864e5);if(a<30)return n?a+"天前":a+"天内";var s=Math.ceil(a/30);if(s<12)return n?s+"个月前":s+"个月内";var u=Math.ceil(s/12);return n?u+"年前":u+"年内"},currency:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(t?"￥":"")+(e.toFixed(2)||0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")},date:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss";"string"==typeof e&&(e=new Date(e));var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},toDouble:function(e){return e<10?"00:0"+e:"00:"+e},htmlSafe:function(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/<style.*\/style>/g,"").replace(/<script/g,'<p style="display:none;" ').replace(/script>/g,"p>")}},f=function e(t,n){return t&&n&&"object"===("undefined"==typeof t?"undefined":r(t))&&"object"===("undefined"==typeof n?"undefined":r(n))?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce(function(r,o){return r&&e(t[o],n[o])},!0):t===n};t.default={values:o,mixin:i,querystring:c,throttle:p,filter:l,clone:u,deepEqual:f,omit:s,pick:a}},function(e,t,n){(function(t,n){!function(t){"use strict";function r(e,t,n,r){var o=Object.create((t||i).prototype),a=new h(r||[]);return o._invoke=l(e,n,a),o}function o(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function a(){}function s(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){this.arg=e}function p(e){function t(t,n){var r=e[t](n),o=r.value;return o instanceof c?Promise.resolve(o.arg).then(i,a):Promise.resolve(o).then(function(e){return r.value=e,r})}function r(e,n){function r(){return t(e,n)}return o=o?o.then(r,r):new Promise(function(e){e(r())})}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var o,i=t.bind(e,"next"),a=t.bind(e,"throw");t.bind(e,"return");this._invoke=r}function l(e,t,n){var r=O;return function(i,a){if(r===k)throw new Error("Generator is already running");if(r===j){if("throw"===i)throw a;return y()}for(;;){var s=n.delegate;if(s){if("return"===i||"throw"===i&&s.iterator[i]===g){n.delegate=null;var u=s.iterator.return;if(u){var c=o(u,s.iterator,a);if("throw"===c.type){i="throw",a=c.arg;continue}}if("return"===i)continue}var c=o(s.iterator[i],s.iterator,a);if("throw"===c.type){n.delegate=null,i="throw",a=c.arg;continue}i="next",a=g;var p=c.arg;if(!p.done)return r=x,p;n[s.resultName]=p.value,n.next=s.nextLoc,n.delegate=null}if("next"===i)n._sent=a,r===x?n.sent=a:n.sent=g;else if("throw"===i){if(r===O)throw r=j,a;n.dispatchException(a)&&(i="next",a=g)}else"return"===i&&n.abrupt("return",a);r=k;var c=o(e,t,n);if("normal"===c.type){r=n.done?j:x;var p={value:c.arg,done:n.done};if(c.arg!==S)return p;n.delegate&&"next"===i&&(a=g)}else"throw"===c.type&&(r=j,i="throw",a=c.arg)}}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function v(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return r.next=r}}return{next:y}}function y(){return{value:g,done:!0}}var g,m=Object.prototype.hasOwnProperty,b="function"==typeof Symbol&&Symbol.iterator||"@@iterator",w="object"==typeof e,_=t.regeneratorRuntime;if(_)return void(w&&(e.exports=_));_=t.regeneratorRuntime=w?e.exports:{},_.wrap=r;var O="suspendedStart",x="suspendedYield",k="executing",j="completed",S={},P=s.prototype=i.prototype;a.prototype=P.constructor=s,s.constructor=a,a.displayName="GeneratorFunction",_.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},_.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s,e.prototype=Object.create(P),e},_.awrap=function(e){return new c(e)},u(p.prototype),_.async=function(e,t,n,o){var i=new p(r(e,t,n,o));return _.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},u(P),P[b]=function(){return this},P.toString=function(){return"[object Generator]"},_.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},_.values=v,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),s=m.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?this.next=o.finallyLoc:this.complete(i),S},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;d(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},S}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),n(143))},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,u.default)(e)&&((0,p.default)(e.type)||(0,f.default)(e.type))&&Object.keys(e).every(a)}function i(e){return e.error===!0}function a(e){return["type","payload","error","meta"].indexOf(e)>-1}t.__esModule=!0,t.isFSA=o,t.isError=i;var s=n(121),u=r(s),c=n(122),p=r(c),l=n(123),f=r(l)},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function r(e,t){return function(n){return e(t(n))}}function o(e){return!!e&&"object"==typeof e}function i(e){if(!o(e)||f.call(e)!=a||n(e))return!1;var t=d(e);if(null===t)return!0;var r=p.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==l}var a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,p=u.hasOwnProperty,l=c.call(Object),f=u.toString,d=r(Object.getPrototypeOf,Object);e.exports=i},function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e){return"string"==typeof e||!s(e)&&n(e)&&a.call(e)==o}var o="[object String]",i=Object.prototype,a=i.toString,s=Array.isArray;e.exports=r},function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e){return"symbol"==typeof e||n(e)&&a.call(e)==o}var o="[object Symbol]",i=Object.prototype,a=i.toString;e.exports=r},function(e,t,n){function r(e){return null==e?void 0===e?u:s:c&&c in Object(e)?i(e):a(e)}var o=n(34),i=n(127),a=n(128),s="[object Null]",u="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=r},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){var r=n(129),o=r(Object.getPrototypeOf,Object);e.exports=o},function(e,t,n){function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[u]=n:delete e[u]),o}var o=n(34),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,u=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){var r=n(125),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.provide=t.connect=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),c=o(u),p=n(140),l=n(16),f=r(l),d=n(38),h=r(d),v=n(15),y=function(){function e(t){var n=t.container,r=t.reducer,o=t.middlewares,i=t.state,s=void 0===i?{}:i;if(a(this,e),!n)throw new Error("a container expected.");this.framework=c,this.container=n,this.reducer=r,this.middlewares=o,this.buildInProps=["env","entry","context","mode"],this._mode="hash",this._store=(0,p.configureStore)(s,r,o,this._mode),this.router(h.default),this._context={store:this._store,hub:{},tags:{}},this.emitter=c.observable({}),n.widgets=this._widgets={}}return s(e,[{key:"set",value:function(e,t){switch(this["_"+e]=t,this.accseptSet(e)){case"mode":var n={};this.store&&(n=this.store.getState()),this._store=(0,p.configureStore)(n,this.reducer,this.middlewares,this._mode),this._router&&(f.default.syncHistoryWithStore(this._router.hub,this._store),this.mixin("router",this._router));case"context":this.container=this._context}}},{key:"accseptSet",value:function(e){return this.buildInProps.indexOf(e)>=0?e:null}},{key:"router",value:function(e){return this._router=e,f.default.syncHistoryWithStore(this._router.hub,this._store),this}},{key:"registerWidget",value:function(e){var t=this,n=e.name,r=e.methods,o=c.mount(n)[0];this._context.tags[n]=o;var i=n.replace(/(\w)/,function(e){return e.toUpperCase()});this._widgets[i]={},r.forEach(function(e){t._widgets[i][e]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];o[e].apply(o,n)}})}},{key:"start",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(this.entry){e.next=4;break}throw new Error("application expected a entry component");case 4:this._router.hub.startup();case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"mixin",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.framework.mixin.apply(this.framework,t)}},{key:"on",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.emitter.on.apply(this.emitter,t)}},{key:"one",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.emitter.one.apply(this.emitter,t)}},{key:"off",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.emitter.off.apply(this.emitter,t)}},{key:"trigger",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.emitter.trigger.apply(this.emitter,t)}},{key:"container",get:function(){return this._container},set:function(e){this._container=e}},{key:"hub",get:function(){return this._router.hub}},{key:"context",get:function(){return this._context}},{key:"store",get:function(){return this._store},set:function(e){this._store=e}},{key:"mode",get:function(){return this._mode}},{key:"entry",get:function(){return this._entry}},{key:"env",get:function(){return this._env}}]),e}(),g=function(e){return new y(e)};t.default=g,t.connect=v.connect,t.provide=v.provide},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.view=t.connect=t.provider=t.Ninjia=t.router=void 0;var o=n(38),i=r(o),a=n(132),s=r(a),u=n(15),c=n(142),p=r(c),l=n(16),f=i.default.hub;console.warn("provider ............"),console.warn(u.provider),console.warn("connect ............."),console.warn(u.connect),f.view=(0,p.default)(f),f.on("history-pending",function(e,t){e&&e.tag&&e.tag.trigger("before-leave")}),f.on("history-resolve",function(e,t,n,r,o,i){var a=e&&e.tag||null,s=t&&t.tag||null;f.view.enter(s,a),f.view.leaveUpstream(s),i()}),f.on("history-success",function(e,t){}),t.router=i.default,t.Ninjia=s.default,t.provider=u.provider,t.connect=u.connect,t.view=l.view},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){try{return e.apply(t)}catch(e){return P.value=e,P}}function c(e){return function(t){return(0,h.bindActionCreators)(e,t)}}function p(e,t,n){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{pure:!0,withRef:!1},Boolean(e)),o=e||x,p=null;p="function"==typeof t?t:t?c(t):k;var h=n||j,v=pure&&h!==j,y=E++;return function(e){function t(e,t,n){var r=h(e,t,n);return r}var n="Connect("+S(e)+")",c=function(e){function c(){return i(this,c),a(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return s(c,e),l(c,[{key:"onCreate",value:function(e){this.version=y,this.store=e.store||(0,O.getProvider)(this).opts.store;var t=this.store.getState();(0,m.default)(this.store,'Could not find "store" in either the context or '+('opts of "'+n+'". ')+"Either wrap the root component in a Provider, "+('or explicitly pass "store" as a opt to "'+n+'".')),this.state={storeState:t},this.clearCache(),this.on("mount",this.componentDidMount),this.on("before-unmount",this.componentWillUnmount),this.on("update",this.render),f(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"onCreate",this).call(this,e)}},{key:"updateStateOptsIfNeeded",value:function(){var e=this.computeStateOpts(this.store,this.opts);return(!this.stateOpts||!(0,_.default)(e,this.stateOpts))&&(this.stateOpts=e,!0)}},{key:"updateDispatchOptsIfNeeded",value:function(){var e=this.computeDispatchOpts(this.store,this.opts);return(!this.dispatchOpts||!(0,_.default)(e,this.dispatchOpts))&&(this.dispatchOpts=e,!0)}},{key:"updateMergedOptsIfNeeded",value:function(){var e=t(this.stateOpts,this.dispatchOpts,this.opts);return!(this.mergedOpts&&v&&(0,_.default)(e,this.mergedOpts))&&(this.mergedOpts=e,!0)}},{key:"configureFinalMapState",value:function(e,t){var n=o(e.getState(),t),r="function"==typeof n;return this.finalMapStateToOpts=r?n:o,this.doStateOptsDependOnOwnOpts=1!==this.finalMapStateToOpts.length,r?this.computeStateOpts(e,t):n}},{key:"handleChange",value:function(){if(this.unsubscribe){var e=this.store.getState(),t=this.state.storeState;if(!pure||t!==e){if(pure&&!this.doStateOptsDependOnOwnOpts){var n=u(this.updateStateOptsIfNeeded,this);if(!n)return;n===P&&(this.stateOptsPrecalculationError=P.value),this.haveStateOptsBeenPrecalculated=!0}this.hasStoreStateChanged=!0,this.update({state:e})}}}},{key:"componentDidMount",value:function(){this.trySubscribe()}},{key:"componentWillUnmount",value:function(){this.tryUnsubscribe(),this.clearCache()}},{key:"trySubscribe",value:function(){r&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())}},{key:"tryUnsubscribe",value:function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}},{key:"isSubscribed",value:function(){return"function"==typeof this.unsubscribe}},{key:"clearCache",value:function(){this.dispatchOpts=null,this.stateOpts=null,this.mergedOpts=null,this.haveOwnOptsChanged=!0,this.hasStoreStateChanged=!0,this.haveStateOptsBeenPrecalculated=!1,this.stateOptsPrecalculationError=null,this.renderedElement=null,this.finalMapDispatchToOpts=null,this.finalMapStateToOpts=null}},{key:"componentWillReceiveOpts",value:function(e){pure&&(0,_.default)(e,this.props)||(this.haveOwnPropsChanged=!0)}},{key:"computeStateOpts",value:function(e,t){if(!this.finalMapStateToOpts)return this.configureFinalMapState(e,t);var n=e.getState(),r=this.doStateOptsDependOnOwnOpts?this.finalMapStateToOpts(n,t):this.finalMapStateToOpts(n);return r}},{key:"render",value:function(){var e=this.haveOwnOptsChanged,t=this.hasStoreStateChanged,n=this.haveStateOptsBeenPrecalculated,r=this.stateOptsPrecalculationError,o=this.renderedElement;if(this.haveOwnOptsChanged=!1,this.hasStoreStateChanged=!1,this.haveStateOptsBeenPrecalculated=!1,this.stateOptsPrecalculationError=null,r)throw r;var i=!0,a=!0;pure&&o&&(i=t||e&&this.doStateOptsDependOnOwnOpts,a=e&&this.doDispatchOptsDependOnOwnOpts);var s=!1,u=!1;n?s=!0:i&&(s=this.updateStateOptsIfNeeded()),a&&(u=this.updateDispatchOptsIfNeeded());var c=!0;c=!!(s||u||e)&&this.updateMergedOptsIfNeeded(),!c&&o||(this.renderedElement=!0,Object.assign(this,d({},mergedOpts)))}}]),c}(e);return c.displayName=n,c.WrappedComponent=e,c}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=p;var h=n(12),v=n(2),y=(o(v),n(137)),g=(r(y),n(37)),m=r(g),b=n(135),w=(r(b),n(136)),_=r(w),O=n(36),x=function(e){return{}},k=function(e){return{dispatch:e}},j=function(e,t,n){return d({},n,e,t)},S=function(e){return e.displayName||e.name||"Component"},P={value:null},E=0},function(e,t){"use strict";function n(e){return"object"===("undefined"==typeof e?"undefined":r(e))&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=n},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=Object.prototype.hasOwnProperty,i=0;i<n.length;i++)if(!o.call(t,n[i])||e[n[i]]!==t[n[i]])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.view=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},u=n(15);t.view=function(e){return function(e){var t=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"onCreate",value:function(e){this.on("update",this.onUpate),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onCreate",this).call(this,e)}},{key:"onUpate",value:function(){"$enter"===this.enterOrLeaveState?this.trigger("entered"):this.trigger("leaved"),delete this.enterOrLeaveState}},{key:"shouldUpdate",value:function(){var e=u.provider.opts.store.getState();return(this.isShow()||isPresent(e))&&isPresent(e)&&e.lastAction.payload===this&&(c.enterOrLeaveState=e.lastAction.type,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldUpdate",this).call(this)),
!1}},{key:"getTagName",value:function(){return this.opts&&this.opts.riotTag||this.root.localName}},{key:"isShow",value:function(){return this.opts.show||this.opts.$show}},{key:"isPresent",value:function(e){return"$enter"===e.lastAction.type||"$leave"===e.lastAction.type}}]),t}(e);return t}}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o={$prev_state:"/",$prev_location:"/",$state:"/",$location:"/",$protocol:"http://",$host:"undefined"!=typeof window&&location&&location.host||"",data:{},stack:[],$views:{}},i=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"$enter":var i=t.payload.$routePath,a=n({},i,!0);return Object.assign({},e,{$views:r({},e.$views,a)});case"$leave":var i=t.payload.$routePath;return Object.assign({},e,{$views:Object.keys(e.$views).filter(function(e){return e!=i}).reduce(function(e,t){return e[t]=!0,e},{})});case"$route":return Object.assign({},e,{$prev_state:e.$state,$prev_location:e.$location,$state:t.payload.route.$state,$location:t.payload.route.$location,$protocol:t.payload.route.$protocol||e.$protocol,$host:e.$host,data:t.payload.route.ctx});case"$query":return Object.assign({},e,{$prev_state:e.$state,$prev_location:e.$location,$state:e.$state,$location:e.$location,$protocol:e.$protocol,$host:e.$host,data:Object.assign({},{request:{body:e.data.req.body,params:e.data.req.params,query:t.payload}})});case"$routeBusy":return Object.assign({},e,{busy:!0});case"$routeUnBusy":return Object.assign({},e,{busy:!1});default:return e}};t.default={route:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(141),s=r(a),u=n(12),c=n(16),p=r(c);t.configureStore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"browser",a=(0,u.combineReducers)(i({},t)),c=p.default.routerMiddlewareCreator(r);return(0,u.compose)(u.applyMiddleware.apply(void 0,[c].concat(o(s.default.values(n)))))(u.createStore)(a,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return Object.keys(e).map(function(t){return e[t]})},i=function(){return Object.assign.apply(Object,arguments)},a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).filter(function(e){return n.indexOf(e)>=0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},s=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.keys(e).filter(function(e){return n.indexOf(e)<0}).map(function(t){return{key:t,val:e[t]}}).reduce(function(e,t){return e[t.key]=t.val,e},{})},u=function e(t){if(!t)return t;var n,o=[Number,String,Boolean];if(o.forEach(function(e){t instanceof e&&(n=e(t))}),"undefined"==typeof n)if("[object Array]"===Object.prototype.toString.call(t))n=[],t.forEach(function(t,r,o){n[r]=e(t)});else if("object"==("undefined"==typeof t?"undefined":r(t)))if(t.nodeType&&"function"==typeof t.cloneNode)var n=t.cloneNode(!0);else if(t.prototype)n=t;else if(t instanceof Date)n=new Date(t);else{n={};for(var i in t)n[i]=e(t[i])}else n=t;return n},c={stringify:function(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")},parse:function(e){return e.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})}},p=null,l=function(e,t){clearTimeout(p),p=setTimeout(function(){e.apply(context),p=null},t)},f=function e(t,n){return t&&n&&"object"===("undefined"==typeof t?"undefined":r(t))&&"object"===("undefined"==typeof n?"undefined":r(n))?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce(function(r,o){return r&&e(t[o],n[o])},!0):t===n};t.default={values:o,mixin:i,querystring:c,throttle:l,clone:u,deepEqual:f,omit:s,pick:a}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,[{key:"setHandler",value:function(e){this.handler=e}},{key:"enter",value:function(e,t,n){if(e)return e.trigger("enter",t),e.opts.show=!0,e.opts.hidden=!1,this.handler?this.handler("enter",e):void e.update()}},{key:"leaveUpstream",value:function(e){var t=this;if(e&&e.parent&&e.parent.tags&&e.parent.tags["router-outlet"]){var n=(e.parent.tags["router-outlet"].routes,e.parent.tags["router-outlet"].routes.filter(function(t){return t.tag&&t.tag!=e}));return!(!n||!n.length)&&(n.map(function(e){return e.tag}).forEach(function(n){n&&(n.opts.show||n.opts.$show)&&t.leaveDownstream(n,e)}),this.leaveUpstream(e.parent))}}},{key:"leaveDownstream",value:function(e,t){var n=this;if(e){this.leave(e,t);var r=e.tags["router-outlet"];if(r){var o=r.routes;o&&o.map(function(e){return e.tag}).forEach(function(t){if(t&&t.opts.$show&&!t.cache)return n.leave(t,e),n.leaveDownstream(t,e)})}}}},{key:"leave",value:function(e,t,n){if(e&&(e.trigger("leave",t),e.opts.show||e.opts.$show)){if(e.opts.show=!1,e.opts.hidden=!0,this.handler)return this.handler("leave",e);e.update()}}},{key:"init",value:function(e,t){e.opts.hidden=!0,e.opts.show=!1}}]),e}(),i=function(e){return new o(e)};t.default=i},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){v&&d&&(v=!1,d.length?h=d.concat(h):y=-1,h.length&&s())}function s(){if(!v){var e=o(a);v=!0;for(var t=h.length;t;){for(d=h,h=[];++y<t;)d&&d[y].run();y=-1,t=h.length}d=null,v=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var p,l,f=e.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,h=[],v=!1,y=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||v||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,o){var a=e(n,r,o),u=a.dispatch,c=[],p={getState:a.getState,dispatch:function(e){return u(e)}};return c=t.map(function(e){return e(p)}),u=s.default.apply(void 0,c)(a.dispatch),i({},a,{dispatch:u})}}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var a=n(39),s=r(a)},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),o={},i=0;i<r.length;i++){var a=r[i],s=e[a];"function"==typeof s&&(o[a]=n(s,t))}return o}t.__esModule=!0,t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=t&&t.type,r=n&&'"'+n.toString()+'"'||"an action";return"Given action "+r+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state.'}function i(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof r)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var o="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:o}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];"function"==typeof e[a]&&(n[a]=e[a])}var s,u=Object.keys(n);try{i(n)}catch(e){s=e}return function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments[1];if(s)throw s;for(var r=!1,i={},a=0;a<u.length;a++){var c=u[a],p=n[c],l=e[c],f=p(l,t);if("undefined"==typeof f){var d=o(c,t);throw new Error(d)}i[c]=f,r=r||f!==l}return r?i:e}}t.__esModule=!0,t.default=a;var s=n(40),u=n(35),c=(r(u),n(41));r(c)},function(e,t){riot.tag2("alert",'<div class="alert-container" if="{_alerts.length}"><div class="alert"><ul class="alert-list"><li each="{_alerts}"><b class="{icon: true, success: state === \'success\', warn: state === \'warn\', error: state === \'error\'}"></b><span>{msg}</span></li></ul></div></div>','alert .alert-container,[riot-tag="alert"] .alert-container,[data-is="alert"] .alert-container{ position: fixed; width: 100%; top: 0px; left: 0px; bottom: 0px; right: 0px; margin: auto; z-index: 9999; color: #82683A; } alert .alert,[riot-tag="alert"] .alert,[data-is="alert"] .alert{ margin: 0px auto; } alert .alert-list,[riot-tag="alert"] .alert-list,[data-is="alert"] .alert-list{ margin: 0px auto; padding: 0px; list-style-type: none; } alert .alert-list >li,[riot-tag="alert"] .alert-list >li,[data-is="alert"] .alert-list >li{ width: 200px; height: 40px; border-radius: 5px; line-height: 40px; padding: 0px 10px; margin: 10px auto; text-align: center; } alert .icon,[riot-tag="alert"] .icon,[data-is="alert"] .icon{ width: 8px; height: 8px; border: none; border-radius: 50em; display: inline-block; } alert .success,[riot-tag="alert"] .success,[data-is="alert"] .success{ width: 10px; height: 10px; margin-right: 5px; background: green; } alert .warn,[riot-tag="alert"] .warn,[data-is="alert"] .warn{ width: 10px; height: 10px; margin-right: 5px; background: yellow; } alert .error,[riot-tag="alert"] .error,[data-is="alert"] .error{ width: 10px; height: 10px; margin-right: 5px; background: red; }',"",function(e){"use strict";var t=this;this._alerts=[],this._busy=!1,this._during=3e3,this.add=function(e,n){t._alerts.push({state:e,msg:n}),t._busy||(t._busy=!0,t.routine())},this.routine=function(){return t.update(),t._alerts.length?void setTimeout(function(){t._alerts.splice(0,1),t.routine(),t.update()},t._during):t._busy=!1}})},function(e,t){riot.tag2("bottom",'<div class="bottom-ico"><a href="http://www.91songli.com/"><img riot-src="{\'//img.91pintuan.com/songli/icon-herf/grey_news.png\'}" alt="logo"></a></div>',"","",function(e){})},function(e,t){riot.tag2("carousel",'<div class="{\'carousel-bt\' : itemForLoop.length > 1} carousel-container" riot-style="width: {document.body.offsetWidth}px; height: {(3*document.body.offsetWidth/4.3).toFixed(2)}px;"><yield if="{!itemForLoop}"></yield><div if="{itemForLoop}"><ul class="carousel-ul carousel-transition" riot-style="width: {(itemForLoop.length || 0)*100}%;"><li riot-style="width: {100/parent.itemForLoop.length}%" uid="id-{id}" each="{item in itemForLoop}"><div riot-style="height: {parent.opts.height}px; background-image: url({parent.opts.field ? parent.opts.prefix + item[parent.opts.field] + app.config.phtStlList : opts.default})" class="bgimage"></div></li></ul><div if="{itemForLoop.length > 1}" class="carousel-nav-container"><ul class="carousel-nav" riot-style="width: {itemForLoop.length*5 + (itemForLoop.length -1)*5}"><li each="{item, index in itemForLoop}"><b class="{\'carousel-nav-active\': index === 0, \'carousel-nav-default\': index != 0}" uid="id-{item.id}"></b></li></ul></div></div></div>',".carousel-container b{ width: 5px; height: 5px; display: block; border-radius: 50%; } .carousel-nav-container{ width: 100%; top: 50px; } .carousel-nav{ margin: 0px auto; padding: 0px; list-style-type: none; overflow: hidden; position: relative; top: -20px; } .carousel-nav li{ width: 5px; height: 5px; float: left; margin-right: 5px; } .carousel-nav li b{ display: block; width: 100%; height: 100%; border-radius: 50%; } .carousel-nav li:last-child{ margin-right: 0px; } .carousel-nav-default{ background: #000000; } .carousel-nav-active{ background: #FFFFFF; } .carousel-container{ overflow: hidden; } .carousel-transition{ transition: margin .5s; -moz-transition: margin .5s; -webkit-transition: margin .5s; -o-transition: margin .5s; } .carousel-ul{ margin: 0px; padding: 0px; list-style-type: none; } .carousel-ul li{ float: left; } .carousel-ul li div{ background-size: cover; background-repeat: no-repeat; background-position:center; } .carousel-bt{margin-bottom: -10px;}","",function(e){"use strict";var t=this;this.timer=null,this.busy=!1,this.itemForLoop=null,this.during=5e3,this.on("unmount",function(){return t.cancel()}),this.parent.on("update",function(){return setTimeout(t.init,10)}),this.parent.on("unmount",function(){return t.cancel()}),this.parent.on("leave",function(){return t.cancel()}),this.init=function(){t.parent.opts.$show&&t.snapshot!==t.opts.itemForLoop&&(t.itemForLoop=t.opts.itemForLoop,t.currItem=t.opts.itemForLoop[0],t.itemForLoop.length>1&&(setTimeout(function(){t.root.addEventListener("touchstart",n),t.root.addEventListener("touchmove",r),t.root.addEventListener("touchend",o)},50),t.routine()),t.update())},this.startPosX=null,this.moveDistance=null,this.inTouching=!1,this.getListNode=function(){return t.root.querySelector(".carousel-ul")};var n=function(e){t.busy||(t.clear(),t.busy=!0,t.inTouching=!0,t.startPosX=e.touches[0].clientX,$(t.getListNode()).removeClass("carousel-transition"))},r=function(e){if(t.inTouching){var n=e.touches[0].clientX,r=t.root.querySelector(".carousel-container");t.moveDistance=n-t.startPosX;var o=t.moveDistance/r.clientWidth*100,i=t.opts.itemForLoop.indexOf(t.currItem),a="-"+100*i;t.getListNode().style.marginLeft=parseFloat(a,10)+o+"%"}},o=function(e){if(t.inTouching){var n=(t.getListNode(),parseFloat(t.moveDistance,10).toFixed(2)),r=30;$(t.getListNode()).addClass("carousel-transition"),!n||Math.abs(n)<=r?t.flyback():Math.abs(n)>r&&(n>0&&t.prevItem(),n<0&&t.nextItem()),t.busy=!1,t.inTouching=!1,t.moveDistance=null,t.startPosX=null,t.routine()}};this.routine=function(){t.timer||(t.timer=setInterval(function(){t.busy||t.nextItem()},t.during))},this.flyback=function(){t.resetStyle(t.opts.itemForLoop.indexOf(t.currItem),0),setTimeout(function(){t.busy=!1},500)},this.prevItem=function(){t.busy=!0;var e=t.getPrevNode(t.currItem);e?(t.currItem=e.node,t.resetStyle(e.index),setTimeout(function(){t.busy=!1},500)):t.cancel()},this.nextItem=function(){t.busy=!0;var e=t.getNextNode(t.currItem);e?(t.currItem=e.node,t.resetStyle(e.index),setTimeout(function(){t.busy=!1},500)):t.cancel()},this.resetStyle=function(e){var n=t.root.querySelector(".carousel-ul"),r=100;n.style.marginLeft="-"+e*r+"%",[].slice.call(t.root.querySelectorAll(".carousel-nav>li>b")).forEach(function(e){$(e).removeClass("carousel-nav-active").addClass("carousel-nav-default")}),$(t.root.querySelector('.carousel-nav>li>b[uid="id-'+t.currItem.id+'"]')).removeClass("carousel-nav-default").addClass("carousel-nav-active")},this.clear=function(){clearInterval(t.timer),t.timer=null,t.snapshot=t.itemForLoop?t.itemForLoop:t.snapshot,t.itemForLoop=null},this.cancel=function(){t.busy=!1,t.clear(),t.root.removeEventListener("touchstart",n),t.root.removeEventListener("touchmove",r),t.root.removeEventListener("touchend",o)},this.getPrevNode=function(e){var n=t.opts.itemForLoop,r=n.indexOf(e);return 0===r?{node:n[n.length-1],index:n.length-1}:{node:n[r-1],index:r-1}},this.getNextNode=function(e){var n=t.opts.itemForLoop,r=n.indexOf(e);return r===n.length-1?{node:n[0],index:0}:{node:n[r+1],index:r+1}}})},function(e,t){riot.tag2("img-lazy-loader",'<img class="fade-in" riot-style="height: {opts.height}px; width: {opts.width}px; margin-bottom: -10px;" riot-src="{holder}" alt="{opts.alt}">',"<![CDATA[ #holder_${sid} text { fill: ${themeMap[theme].color}; font-weight: bold; font-family: Arial, Helvetica, Open Sans, sans-serif, monospace; font-size: ${ this.fontSize } } ]]>","",function(e){"use strict";var t=this;this.holder=null,this.mounted=!1,this.prevSrc=null,this.hasImage=function(){return!(!t.opts.riotSrc||/undefined/gi.test(t.opts.riotSrc))},this.pretreatment=function(){if(t.fontSize=(t.opts.width/15).toFixed()+"pt",/svg:/.test(t.opts.holder)){var e=t.buildSvg();t.holder=e}else t.holder=t.opts.holder},this.extractOpts=function(e){function t(e){var t=e.split("?"),n=(t[0],t[1]);return n&&(n=n.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})),{query:n}}var n=t(e);return{theme:n&&n.query&&n.query.theme||null,text:n&&n.query&&n.query.text||null}};var n={gray:{color:"#AAAAAA",bgColor:"rgb(238, 238, 238)"}};this.getStringLength=function(e){var n=document.createElement("canvas"),r=n.getContext("2d");return r.font=t.fontSize+" Arial bold",r.measureText(e).width},this.buildSvg=function(){function e(e){for(var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n="",r=0;r<e;r++){var o=Math.ceil(35*Math.random());n+=t[o]}return n}var r=t.extractOpts(t.opts.holder),o=r.theme,i=r.text,a=(r.maxWidth,e(9)),s=(t.opts.width-t.getStringLength(i))/2,u=t.opts.height/2,c='<svg xmlns="http://www.w3.org/2000/svg" width="'+t.opts.width+'" height="'+t.opts.height+'" viewBox="0 0 '+t.opts.width+" "+t.opts.height+'" preserveAspectRatio="none">\n                <defs>\n                    \n                </defs>\n                <g id="holder_'+a+'">\n                    <rect width="'+t.opts.width+'" height="'+t.opts.height+'" fill="'+n[o].bgColor+'"/>\n                    <g>\n                        <text\n                            fill="'+n[o].color+'"\n                            style="\n                                font-size: '+t.fontSize+';\n                                font-family:Arial, Helvetica, Open Sans, sans-serif, monospace;\n                                font-weight: bold;"\n                            x="'+s+'"\n                            y="'+u+'">'+i+"</text>\n                    </g>\n                </g>\n            </svg>";return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(c)},this.buildImage=function(){var e=document.createElement("img");e.src=t.opts.riotSrc,e.style.opacity=0,e.style.height=t.opts.height+"px",e.style.width=t.opts.width+"px",e.style.WebkitTransition="opacity .5s",e.style.MozTransition="opacity .5s",e.style.display="none",e.onload=function(){setTimeout(function(){$(t.root.childNodes[0]).removeClass("fade-in").addClass("fade-out")},50),setTimeout(function(){t.root.appendChild(e),e.style.display="inline",setTimeout(function(){e.style.opacity=1},50),t.root.removeChild(t.root.childNodes[0])},500)}},this.on("update",function(){t.mounted&&t.opts.riotSrc&&t.prevSrc===t.opts.riotSrc||(t.pretreatment(),t.hasImage()&&(t.buildImage(),t.mounted=!0,t.prevSrc=t.opts.riotSrc))})})},function(e,t){riot.tag2("modal",'<div if="{show}" class="my-modal-container"></div>',".my-modal{ margin-top: 120px; } .my-modal-container{ position: fixed; z-index: 1050; overflow: hidden; top: 0px; left: 0px; right: 0px; bottom: 0px; margin: auto; background: rgba(0, 0, 0, 0.6); } .my-modal-header{ background: red; height: 40px; padding: 10px; } .my-modal-body{ background: white; padding: 10px; } .my-modal-footer{ background: white; height: 40px; padding: 10px; }","",function(e){"use strict";var t=this;this.show=!1,this.open=function(e){var n=e.tag,r=(e.size,e.props);t.content={tag:n,props:r},t.show=!0,t.update();var o=t.root.querySelector(".my-modal-container"),i=riot.mount(o,n,r)[0];return i.on("dismiss",function(){setTimeout(function(){i.off("dismiss")},50),i.unmount(!0),t.update({show:!1})}),t.update(),i}})},function(e,t){riot.tag2("on-scroll","<yield></yield>","","",function(e){"use strict";var t=this,n=function(){return t.opts.infiniteScrollIdentify.split(".").reduce(function(e,t){return e[t]},t.parent.opts)};this.onInit=function(){if(t.opts.infiniteScrollIdentify){t.parent.on("updated",t.onUpdated);var e=n();t.items=e}t.doCheck(),window.addEventListener("scroll",t.onScrollHandler),window.addEventListener("resize",t.onScrollHandler)},this.parent.on("enter",this.onInit),this.parent.on("leave",function(){t.parent.off("updated",t.onUpdated),window.removeEventListener("scroll",t.onScrollHandler),window.removeEventListener("resize",t.onScrollHandler)}),this.onUpdated=function(){if(t.items&&t.opts.infiniteScrollIdentify){var e=(t.opts.infiniteScrollIdentify,n());t.items&&e&&e!=t.items&&($.util.throttle(function(){t.doCheck()},50),t.items=e)}},this.onScrollHandler=function(e){$.util.throttle(function(){t.doCheck()},10)},this.isBottom=function(){return window.innerHeight+window.scrollY+(t.opts.infiniteScrollDistance||0)>=document.body.scrollHeight},this.doCheck=function(){setTimeout(function(){t.isBottom()&&!t.opts.infiniteScrollDisabled&&$.util.throttle(function(){t.opts.infiniteScroll()},50)},0)},this.onInit()})},function(e,t){riot.tag2("progressbar",'<div class="{opts.class} progressbar-container" riot-style="{opts.style}"><div class="progressbar" riot-style="width: {opts.value}%; background: {opts.bgcolor || \'#f23838\'}"></div></div>',".progressbar-container{ width: 100%; } .progressbar{ height: 100%; transition: width .5s; }","",function(e){})},function(e,t,n){n(44),riot.tag2("radio-group",'<div class="{opts.class}"><yield></yield></div>','radio-group,[riot-tag="radio-group"],[data-is="radio-group"]{ position: relative; display: inline-block; vertical-align: middle; } radio-group radio,[riot-tag="radio-group"] radio,[data-is="radio-group"] radio{ position: relative; float: left; } radio-group radio + radio,[riot-tag="radio-group"] radio + radio,[data-is="radio-group"] radio + radio{ margin-left: -1px; } radio-group radio[toggle]:not(:first-child) > *,[riot-tag="radio-group"] radio[toggle]:not(:first-child) > *,[data-is="radio-group"] radio[toggle]:not(:first-child) > *{ padding-right: 8px; padding-left: 8px; } radio-group > radio:hover,[riot-tag="radio-group"] > radio:hover,[data-is="radio-group"] > radio:hover,radio-group > radio:focus,[riot-tag="radio-group"] > radio:focus,[data-is="radio-group"] > radio:focus,radio-group > radio:active,[riot-tag="radio-group"] > radio:active,[data-is="radio-group"] > radio:active{ z-index: 2; } radio-group > radio:not(:first-child):not(:last-child):not([toggle]) > *,[riot-tag="radio-group"] > radio:not(:first-child):not(:last-child):not([toggle]) > *,[data-is="radio-group"] > radio:not(:first-child):not(:last-child):not([toggle]) > *{ border-radius: 0; } radio-group > radio:first-child,[riot-tag="radio-group"] > radio:first-child,[data-is="radio-group"] > radio:first-child{ margin-left: 0; } radio-group > radio:first-child:not(:last-child):not([toggle]) > *,[riot-tag="radio-group"] > radio:first-child:not(:last-child):not([toggle]) > *,[data-is="radio-group"] > radio:first-child:not(:last-child):not([toggle]) > *{ border-top-right-radius: 0; border-bottom-right-radius: 0; } radio-group > radio:last-child:not(:first-child) > *,[riot-tag="radio-group"] > radio:last-child:not(:first-child) > *,[data-is="radio-group"] > radio:last-child:not(:first-child) > *,radio-group > radio:not(:first-child)[toggle] > *,[riot-tag="radio-group"] > radio:not(:first-child)[toggle] > *,[data-is="radio-group"] > radio:not(:first-child)[toggle] > *{ border-top-left-radius: 0; border-bottom-left-radius: 0; }',"",function(e){"use strict";var t=this,r=n(42);this.mixin(r.parentScope).mixin(r.domEvent).mixin(r.syncEvent);var o=function(e){t.root.value=t.value=e,t.skipSync(),t.update(),t.triggerDomEvent("change")};this.on("mount",function(){var e=t.tags.radio||[];e.forEach(function(e){return e.on("radioClicked",o)})}).on("sync",function(){e.value&&(t.value=e.value)})})},function(e,t){riot.tag2("raw","<span>{opts.holder}</span>","","",function(e){"use strict";var t=this,n=function(){t.opts.content&&(t.root.innerHTML=e.content)};this.on("update",n.bind(this)),this.on("mount",n.bind(this))})},function(e,t,n){riot.tag2("rlink",'<button type="button" class="{clazzes}" onclick="{go}" __disabled="{disabled}"><yield></yield></button>',"","",function(e){"use strict";var t=this,r=n(133);(0,r.connect)(function(e){return{curr:e.route.$state}})(this),this.clazzes="",this.go=function(){var t=app.hub;!t.busy&&e.to&&t.go(e.to)},this.on("update",function(){var n={},r=app.hub.util;e.class&&e.class.split(" ").reduce(function(e,t){return e[t]="true",e},n),e.active&&e.curr&&e.to&&r.toPattern(e.curr)===r.toPattern(e.to)&&(n[e.active]="true"),t.clazzes=Object.keys(n).map(function(e){return""+e}).join(" ")})})},function(e,t,n){e.exports=n(158)},function(e,t,n){(function(e,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(159),s=o(a);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:r;var u=(0,s.default)(i);t.default=u}).call(t,function(){return this}(),n(160)(e))},function(e,t){"use strict";function n(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){!function(t,n){e.exports=n(t)}(window,function(e,t){function n(t,n,r){e.WeixinJSBridge?WeixinJSBridge.invoke(t,o(n),function(e){s(t,e,r)}):p(t,r)}function r(t,n,r){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){r&&r.trigger&&r.trigger(e),s(t,e,n)}):r?p(t,r):p(t,n)}function o(e){return e=e||{},e.appId=R.appId,e.verifyAppId=R.appId,e.verifySignType="sha1",e.verifyTimestamp=R.timestamp+"",e.verifyNonceStr=R.nonceStr,e.verifySignature=R.signature,e}function i(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function a(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}function s(e,t,n){"openEnterpriseChat"==e&&(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var r=t.errMsg;r||(r=t.err_msg,delete t.err_msg,r=u(e,r),t.errMsg=r),n=n||{},n._complete&&(n._complete(t),delete n._complete),r=t.errMsg||"",R.debug&&!n.isInnerInvoke&&alert(JSON.stringify(t));var o=r.indexOf(":"),i=r.substring(o+1);switch(i){case"ok":n.success&&n.success(t);break;case"cancel":n.cancel&&n.cancel(t);break;default:n.fail&&n.fail(t)}n.complete&&n.complete(t)}function u(e,t){var n=e,r=y[n];r&&(n=r);var o="ok";if(t){var i=t.indexOf(":");o=t.substring(i+1),"confirm"==o&&(o="ok"),"failed"==o&&(o="fail"),-1!=o.indexOf("failed_")&&(o=o.substring(7)),-1!=o.indexOf("fail_")&&(o=o.substring(5)),o=o.replace(/_/g," "),o=o.toLowerCase(),("access denied"==o||"no permission to execute"==o)&&(o="permission denied"),"config"==n&&"function not exist"==o&&(o="ok"),""==o&&(o="fail")}return t=n+":"+o}function c(e){if(e){for(var t=0,n=e.length;n>t;++t){var r=e[t],o=v[r];o&&(e[t]=o)}return e}}function p(e,t){if(!(!R.debug||t&&t.isInnerInvoke)){var n=y[e];n&&(e=n),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function l(e){if(!(_||O||R.debug||"6.0.2">S||E.systemType<0)){var t=new Image;E.appId=R.appId,E.initTime=P.initEndTime-P.initStartTime,E.preVerifyTime=P.preVerifyEndTime-P.preVerifyStartTime,$.getNetworkType({isInnerInvoke:!0,success:function(e){E.networkType=e.networkType;var n="https://open.weixin.qq.com/sdk/report?v="+E.version+"&o="+E.isPreVerifyOk+"&s="+E.systemType+"&c="+E.clientVersion+"&a="+E.appId+"&n="+E.networkType+"&i="+E.initTime+"&p="+E.preVerifyTime+"&u="+E.url;t.src=n}})}}function f(){return(new Date).getTime()}function d(t){x&&(e.WeixinJSBridge?t():g.addEventListener&&g.addEventListener("WeixinJSBridgeReady",t,!1))}function h(){$.invoke||($.invoke=function(t,n,r){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,o(n),r)},$.on=function(t,n){e.WeixinJSBridge&&WeixinJSBridge.on(t,n)})}if(!e.jWeixin){var v={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},y=function(){var e={};for(var t in v)e[v[t]]=t;return e}(),g=e.document,m=g.title,b=navigator.userAgent.toLowerCase(),w=navigator.platform.toLowerCase(),_=!(!w.match("mac")&&!w.match("win")),O=-1!=b.indexOf("wxdebugger"),x=-1!=b.indexOf("micromessenger"),k=-1!=b.indexOf("android"),j=-1!=b.indexOf("iphone")||-1!=b.indexOf("ipad"),S=function(){var e=b.match(/micromessenger\/(\d+\.\d+\.\d+)/)||b.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),P={initStartTime:f(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},E={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:j?1:k?2:-1,clientVersion:S,url:encodeURIComponent(location.href)},R={},C={
_completes:[]},T={state:0,data:{}};d(function(){P.initEndTime=f()});var M=!1,I=[],$={config:function(e){R=e,p("config",e);var t=R.check!==!1;d(function(){if(t)n(v.config,{verifyJsApiList:c(R.jsApiList)},function(){C._complete=function(e){P.preVerifyEndTime=f(),T.state=1,T.data=e},C.success=function(e){E.isPreVerifyOk=0},C.fail=function(e){C._fail?C._fail(e):T.state=-1};var e=C._completes;return e.push(function(){l()}),C.complete=function(t){for(var n=0,r=e.length;r>n;++n)e[n]();C._completes=[]},C}()),P.preVerifyStartTime=f();else{T.state=1;for(var e=C._completes,r=0,o=e.length;o>r;++r)e[r]();C._completes=[]}}),R.beta&&h()},ready:function(e){0!=T.state?e():(C._completes.push(e),!x&&R.debug&&e())},error:function(e){"6.0.2">S||(-1==T.state?e(T.data):C._fail=e)},checkJsApi:function(e){var t=function(e){var t=e.checkResult;for(var n in t){var r=y[n];r&&(t[r]=t[n],delete t[n])}return e};n("checkJsApi",{jsApiList:c(e.jsApiList)},function(){return e._complete=function(e){if(k){var n=e.checkResult;n&&(e.checkResult=JSON.parse(n))}e=t(e)},e}())},onMenuShareTimeline:function(e){r(v.onMenuShareTimeline,{complete:function(){n("shareTimeline",{title:e.title||m,desc:e.title||m,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){r(v.onMenuShareAppMessage,{complete:function(){n("sendAppMessage",{title:e.title||m,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){r(v.onMenuShareQQ,{complete:function(){n("shareQQ",{title:e.title||m,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){r(v.onMenuShareWeibo,{complete:function(){n("shareWeiboApp",{title:e.title||m,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){r(v.onMenuShareQZone,{complete:function(){n("shareQZone",{title:e.title||m,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){n("startRecord",{},e)},stopRecord:function(e){n("stopRecord",{},e)},onVoiceRecordEnd:function(e){r("onVoiceRecordEnd",e)},playVoice:function(e){n("playVoice",{localId:e.localId},e)},pauseVoice:function(e){n("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){n("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){r("onVoicePlayEnd",e)},uploadVoice:function(e){n("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){n("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){n("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){n("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},function(){return e._complete=function(e){if(k){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},getLocation:function(e){},previewImage:function(e){n(v.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){n("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){n("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){M===!1?(M=!0,n("getLocalImgData",{localId:e.localId},function(){return e._complete=function(e){if(M=!1,I.length>0){var t=I.shift();wx.getLocalImgData(t)}},e}())):I.push(e)},getNetworkType:function(e){var t=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var n=e.subtype;if(delete e.subtype,n)e.networkType=n;else{var r=t.indexOf(":"),o=t.substring(r+1);switch(o){case"wifi":case"edge":case"wwan":e.networkType=o;break;default:e.errMsg="getNetworkType:fail"}}return e};n("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){n("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},n(v.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){n("hideOptionMenu",{},e)},showOptionMenu:function(e){n("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},n("closeWindow",{},e)},hideMenuItems:function(e){n("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){n("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){n("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){n("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},n("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){if(j){var t=e.resultStr;if(t){var n=JSON.parse(t);e.resultStr=n&&n.scan_code&&n.scan_code.scan_result}}},e}())},openAddress:function(e){n(v.openAddress,{},function(){return e._complete=function(e){e=a(e)},e}())},openProductSpecificView:function(e){n(v.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)},addCard:function(e){for(var t=e.cardList,r=[],o=0,i=t.length;i>o;++o){var a=t[o],s={card_id:a.cardId,card_ext:a.cardExt};r.push(s)}n(v.addCard,{card_list:r},function(){return e._complete=function(e){var t=e.card_list;if(t){t=JSON.parse(t);for(var n=0,r=t.length;r>n;++n){var o=t[n];o.cardId=o.card_id,o.cardExt=o.card_ext,o.isSuccess=!!o.is_succ,delete o.card_id,delete o.card_ext,delete o.is_succ}e.cardList=t,delete e.card_list}},e}())},chooseCard:function(e){n("chooseCard",{app_id:R.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){for(var t=e.cardList,r=[],o=0,i=t.length;i>o;++o){var a=t[o],s={card_id:a.cardId,code:a.code};r.push(s)}n(v.openCard,{card_list:r},e)},consumeAndShareCard:function(e){n(v.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)},chooseWXPay:function(e){n(v.chooseWXPay,i(e),e)},openEnterpriseRedPacket:function(e){n(v.openEnterpriseRedPacket,i(e),e)},startSearchBeacons:function(e){n(v.startSearchBeacons,{ticket:e.ticket},e)},stopSearchBeacons:function(e){n(v.stopSearchBeacons,{},e)},onSearchBeacons:function(e){r(v.onSearchBeacons,e)},openEnterpriseChat:function(e){n("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)}},A=1,N={};return g.addEventListener("error",function(e){if(!k){var t=e.target,n=t.tagName,r=t.src;if("IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){var o=-1!=r.indexOf("wxlocalresource://");if(o){e.preventDefault(),e.stopPropagation();var i=t["wx-id"];if(i||(i=A++,t["wx-id"]=i),N[i])return;N[i]=!0,wx.getLocalImgData({localId:r,success:function(e){t.src=e.localData}})}}}},!0),g.addEventListener("load",function(e){if(!k){var t=e.target,n=t.tagName;if(t.src,"IMG"==n||"VIDEO"==n||"AUDIO"==n||"SOURCE"==n){var r=t["wx-id"];r&&(N[r]=!1)}}},!0),t&&(e.wx=e.jWeixin=$),$}})},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&b(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if("string"==typeof e)this.url=e;else{if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function v(e){var t=new o;return e.split("\r\n").forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function y(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&m.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},g.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},l.call(d.prototype),l.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var O=[301,302,303,307,308];y.redirect=function(e,t){if(O.indexOf(t)===-1)throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=d,e.Response=y,e.fetch=function(e,t){return new Promise(function(n,r){var o=new d(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:v(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new y(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&g.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)}]);